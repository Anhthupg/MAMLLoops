function Pb(r,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const c=Object.getOwnPropertyDescriptor(i,o);c&&Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Cy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var cf={exports:{}},go={};var x0;function Gb(){if(x0)return go;x0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:u,ref:o!==void 0?o:null,props:c}}return go.Fragment=t,go.jsx=n,go.jsxs=n,go}var E0;function Hb(){return E0||(E0=1,cf.exports=Gb()),cf.exports}var B=Hb(),uf={exports:{}},Tt={};var A0;function Fb(){if(A0)return Tt;A0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function b(R){return R===null||typeof R!="object"?null:(R=v&&R[v]||R["@@iterator"],typeof R=="function"?R:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,x={};function E(R,F,it){this.props=R,this.context=F,this.refs=x,this.updater=it||S}E.prototype.isReactComponent={},E.prototype.setState=function(R,F){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,F,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function w(){}w.prototype=E.prototype;function N(R,F,it){this.props=R,this.context=F,this.refs=x,this.updater=it||S}var X=N.prototype=new w;X.constructor=N,T(X,E.prototype),X.isPureReactComponent=!0;var O=Array.isArray;function U(){}var j={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function nt(R,F,it){var ut=it.ref;return{$$typeof:r,type:R,key:F,ref:ut!==void 0?ut:null,props:it}}function G(R,F){return nt(R.type,F,R.props)}function $(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function Q(R){var F={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(it){return F[it]})}var st=/\/+/g;function J(R,F){return typeof R=="object"&&R!==null&&R.key!=null?Q(""+R.key):F.toString(36)}function ot(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(U,U):(R.status="pending",R.then(function(F){R.status==="pending"&&(R.status="fulfilled",R.value=F)},function(F){R.status==="pending"&&(R.status="rejected",R.reason=F)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function M(R,F,it,ut,I){var D=typeof R;(D==="undefined"||D==="boolean")&&(R=null);var ht=!1;if(R===null)ht=!0;else switch(D){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(R.$$typeof){case r:case t:ht=!0;break;case g:return ht=R._init,M(ht(R._payload),F,it,ut,I)}}if(ht)return I=I(R),ht=ut===""?"."+J(R,0):ut,O(I)?(it="",ht!=null&&(it=ht.replace(st,"$&/")+"/"),M(I,F,it,"",function(Ot){return Ot})):I!=null&&($(I)&&(I=G(I,it+(I.key==null||R&&R.key===I.key?"":(""+I.key).replace(st,"$&/")+"/")+ht)),F.push(I)),1;ht=0;var lt=ut===""?".":ut+":";if(O(R))for(var yt=0;yt<R.length;yt++)ut=R[yt],D=lt+J(ut,yt),ht+=M(ut,F,it,D,I);else if(yt=b(R),typeof yt=="function")for(R=yt.call(R),yt=0;!(ut=R.next()).done;)ut=ut.value,D=lt+J(ut,yt++),ht+=M(ut,F,it,D,I);else if(D==="object"){if(typeof R.then=="function")return M(ot(R),F,it,ut,I);throw F=String(R),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ht}function A(R,F,it){if(R==null)return R;var ut=[],I=0;return M(R,ut,"","",function(D){return F.call(it,D,I++)}),ut}function Y(R){if(R._status===-1){var F=R._result;F=F(),F.then(function(it){(R._status===0||R._status===-1)&&(R._status=1,R._result=it)},function(it){(R._status===0||R._status===-1)&&(R._status=2,R._result=it)}),R._status===-1&&(R._status=0,R._result=F)}if(R._status===1)return R._result.default;throw R._result}var W=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},rt={map:A,forEach:function(R,F,it){A(R,function(){F.apply(this,arguments)},it)},count:function(R){var F=0;return A(R,function(){F++}),F},toArray:function(R){return A(R,function(F){return F})||[]},only:function(R){if(!$(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Tt.Activity=y,Tt.Children=rt,Tt.Component=E,Tt.Fragment=n,Tt.Profiler=o,Tt.PureComponent=N,Tt.StrictMode=i,Tt.Suspense=f,Tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Tt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return j.H.useMemoCache(R)}},Tt.cache=function(R){return function(){return R.apply(null,arguments)}},Tt.cacheSignal=function(){return null},Tt.cloneElement=function(R,F,it){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ut=T({},R.props),I=R.key;if(F!=null)for(D in F.key!==void 0&&(I=""+F.key),F)!z.call(F,D)||D==="key"||D==="__self"||D==="__source"||D==="ref"&&F.ref===void 0||(ut[D]=F[D]);var D=arguments.length-2;if(D===1)ut.children=it;else if(1<D){for(var ht=Array(D),lt=0;lt<D;lt++)ht[lt]=arguments[lt+2];ut.children=ht}return nt(R.type,I,ut)},Tt.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:c,_context:R},R},Tt.createElement=function(R,F,it){var ut,I={},D=null;if(F!=null)for(ut in F.key!==void 0&&(D=""+F.key),F)z.call(F,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(I[ut]=F[ut]);var ht=arguments.length-2;if(ht===1)I.children=it;else if(1<ht){for(var lt=Array(ht),yt=0;yt<ht;yt++)lt[yt]=arguments[yt+2];I.children=lt}if(R&&R.defaultProps)for(ut in ht=R.defaultProps,ht)I[ut]===void 0&&(I[ut]=ht[ut]);return nt(R,D,I)},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(R){return{$$typeof:d,render:R}},Tt.isValidElement=$,Tt.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:Y}},Tt.memo=function(R,F){return{$$typeof:p,type:R,compare:F===void 0?null:F}},Tt.startTransition=function(R){var F=j.T,it={};j.T=it;try{var ut=R(),I=j.S;I!==null&&I(it,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(U,W)}catch(D){W(D)}finally{F!==null&&it.types!==null&&(F.types=it.types),j.T=F}},Tt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Tt.use=function(R){return j.H.use(R)},Tt.useActionState=function(R,F,it){return j.H.useActionState(R,F,it)},Tt.useCallback=function(R,F){return j.H.useCallback(R,F)},Tt.useContext=function(R){return j.H.useContext(R)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(R,F){return j.H.useDeferredValue(R,F)},Tt.useEffect=function(R,F){return j.H.useEffect(R,F)},Tt.useEffectEvent=function(R){return j.H.useEffectEvent(R)},Tt.useId=function(){return j.H.useId()},Tt.useImperativeHandle=function(R,F,it){return j.H.useImperativeHandle(R,F,it)},Tt.useInsertionEffect=function(R,F){return j.H.useInsertionEffect(R,F)},Tt.useLayoutEffect=function(R,F){return j.H.useLayoutEffect(R,F)},Tt.useMemo=function(R,F){return j.H.useMemo(R,F)},Tt.useOptimistic=function(R,F){return j.H.useOptimistic(R,F)},Tt.useReducer=function(R,F,it){return j.H.useReducer(R,F,it)},Tt.useRef=function(R){return j.H.useRef(R)},Tt.useState=function(R){return j.H.useState(R)},Tt.useSyncExternalStore=function(R,F,it){return j.H.useSyncExternalStore(R,F,it)},Tt.useTransition=function(){return j.H.useTransition()},Tt.version="19.2.1",Tt}var M0;function If(){return M0||(M0=1,uf.exports=Fb()),uf.exports}var at=If();const Ie=Cy(at);var hf={exports:{}},yo={},ff={exports:{}},df={};var R0;function Yb(){return R0||(R0=1,(function(r){function t(M,A){var Y=M.length;M.push(A);t:for(;0<Y;){var W=Y-1>>>1,rt=M[W];if(0<o(rt,A))M[W]=A,M[Y]=rt,Y=W;else break t}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var A=M[0],Y=M.pop();if(Y!==A){M[0]=Y;t:for(var W=0,rt=M.length,R=rt>>>1;W<R;){var F=2*(W+1)-1,it=M[F],ut=F+1,I=M[ut];if(0>o(it,Y))ut<rt&&0>o(I,it)?(M[W]=I,M[ut]=Y,W=ut):(M[W]=it,M[F]=Y,W=F);else if(ut<rt&&0>o(I,Y))M[W]=I,M[ut]=Y,W=ut;else break t}}return A}function o(M,A){var Y=M.sortIndex-A.sortIndex;return Y!==0?Y:M.id-A.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();r.unstable_now=function(){return u.now()-d}}var f=[],p=[],g=1,y=null,v=3,b=!1,S=!1,T=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function X(M){for(var A=n(p);A!==null;){if(A.callback===null)i(p);else if(A.startTime<=M)i(p),A.sortIndex=A.expirationTime,t(f,A);else break;A=n(p)}}function O(M){if(T=!1,X(M),!S)if(n(f)!==null)S=!0,U||(U=!0,Q());else{var A=n(p);A!==null&&ot(O,A.startTime-M)}}var U=!1,j=-1,z=5,nt=-1;function G(){return x?!0:!(r.unstable_now()-nt<z)}function $(){if(x=!1,U){var M=r.unstable_now();nt=M;var A=!0;try{t:{S=!1,T&&(T=!1,w(j),j=-1),b=!0;var Y=v;try{e:{for(X(M),y=n(f);y!==null&&!(y.expirationTime>M&&G());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var rt=W(y.expirationTime<=M);if(M=r.unstable_now(),typeof rt=="function"){y.callback=rt,X(M),A=!0;break e}y===n(f)&&i(f),X(M)}else i(f);y=n(f)}if(y!==null)A=!0;else{var R=n(p);R!==null&&ot(O,R.startTime-M),A=!1}}break t}finally{y=null,v=Y,b=!1}A=void 0}}finally{A?Q():U=!1}}}var Q;if(typeof N=="function")Q=function(){N($)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,J=st.port2;st.port1.onmessage=$,Q=function(){J.postMessage(null)}}else Q=function(){E($,0)};function ot(M,A){j=E(function(){M(r.unstable_now())},A)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(M){M.callback=null},r.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<M?Math.floor(1e3/M):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(M){switch(v){case 1:case 2:case 3:var A=3;break;default:A=v}var Y=v;v=A;try{return M()}finally{v=Y}},r.unstable_requestPaint=function(){x=!0},r.unstable_runWithPriority=function(M,A){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=v;v=M;try{return A()}finally{v=Y}},r.unstable_scheduleCallback=function(M,A,Y){var W=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?W+Y:W):Y=W,M){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=Y+rt,M={id:g++,callback:A,priorityLevel:M,startTime:Y,expirationTime:rt,sortIndex:-1},Y>W?(M.sortIndex=Y,t(p,M),n(f)===null&&M===n(p)&&(T?(w(j),j=-1):T=!0,ot(O,Y-W))):(M.sortIndex=rt,t(f,M),S||b||(S=!0,U||(U=!0,Q()))),M},r.unstable_shouldYield=G,r.unstable_wrapCallback=function(M){var A=v;return function(){var Y=v;v=A;try{return M.apply(this,arguments)}finally{v=Y}}}})(df)),df}var k0;function Xb(){return k0||(k0=1,ff.exports=Yb()),ff.exports}var pf={exports:{}},nn={};var O0;function Qb(){if(O0)return nn;O0=1;var r=If();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(f,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:f,containerInfo:p,implementation:g}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nn.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(f,p,null,g)},nn.flushSync=function(f){var p=u.T,g=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=p,i.p=g,i.d.f()}},nn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},nn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},nn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):g==="script"&&i.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},nn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},nn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin);i.d.L(f,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},nn.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=d(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},nn.requestFormReset=function(f){i.d.r(f)},nn.unstable_batchedUpdates=function(f,p){return f(p)},nn.useFormState=function(f,p,g){return u.H.useFormState(f,p,g)},nn.useFormStatus=function(){return u.H.useHostTransitionStatus()},nn.version="19.2.1",nn}var N0;function $b(){if(N0)return pf.exports;N0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),pf.exports=Qb(),pf.exports}var D0;function Zb(){if(D0)return yo;D0=1;var r=Xb(),t=If(),n=$b();function i(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function u(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function d(e){if(e.tag===31){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function f(e){if(c(e)!==e)throw Error(i(188))}function p(e){var s=e.alternate;if(!s){if(s=c(e),s===null)throw Error(i(188));return s!==e?null:e}for(var a=e,l=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return f(h),e;if(m===l)return f(h),s;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=m;else{for(var _=!1,C=h.child;C;){if(C===a){_=!0,a=h,l=m;break}if(C===l){_=!0,l=h,a=m;break}C=C.sibling}if(!_){for(C=m.child;C;){if(C===a){_=!0,a=m,l=h;break}if(C===l){_=!0,l=m,a=h;break}C=C.sibling}if(!_)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:s}function g(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=g(e),s!==null)return s;e=e.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),N=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),nt=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function Q(e){return e===null||typeof e!="object"?null:(e=$&&e[$]||e["@@iterator"],typeof e=="function"?e:null)}var st=Symbol.for("react.client.reference");function J(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===st?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case O:return"Suspense";case U:return"SuspenseList";case nt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case N:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case X:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case j:return s=e.displayName||null,s!==null?s:J(e.type)||"Memo";case z:s=e._payload,e=e._init;try{return J(e(s))}catch{}}return null}var ot=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},W=[],rt=-1;function R(e){return{current:e}}function F(e){0>rt||(e.current=W[rt],W[rt]=null,rt--)}function it(e,s){rt++,W[rt]=e.current,e.current=s}var ut=R(null),I=R(null),D=R(null),ht=R(null);function lt(e,s){switch(it(D,s),it(I,e),it(ut,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?Xg(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=Xg(s),e=Qg(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(ut),it(ut,e)}function yt(){F(ut),F(I),F(D)}function Ot(e){e.memoizedState!==null&&it(ht,e);var s=ut.current,a=Qg(s,e.type);s!==a&&(it(I,e),it(ut,a))}function Gt(e){I.current===e&&(F(ut),F(I)),ht.current===e&&(F(ht),ho._currentValue=Y)}var fe,cn;function Ve(e){if(fe===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);fe=s&&s[1]||"",cn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+e+cn}var ct=!1;function pt(e,s){if(!e||ct)return"";ct=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(Z){var H=Z}Reflect.construct(e,[],et)}else{try{et.call()}catch(Z){H=Z}e.call(et.prototype)}}else{try{throw Error()}catch(Z){H=Z}(et=e())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(Z){if(Z&&H&&typeof Z.stack=="string")return[Z.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],C=m[1];if(_&&C){var k=_.split(`
`),P=C.split(`
`);for(h=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;if(l===k.length||h===P.length)for(l=k.length-1,h=P.length-1;1<=l&&0<=h&&k[l]!==P[h];)h--;for(;1<=l&&0<=h;l--,h--)if(k[l]!==P[h]){if(l!==1||h!==1)do if(l--,h--,0>h||k[l]!==P[h]){var K=`
`+k[l].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=l&&0<=h);break}}}finally{ct=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ve(a):""}function zt(e,s){switch(e.tag){case 26:case 27:case 5:return Ve(e.type);case 16:return Ve("Lazy");case 13:return e.child!==s&&s!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return pt(e.type,!1);case 11:return pt(e.type.render,!1);case 1:return pt(e.type,!0);case 31:return Ve("Activity");default:return""}}function Lt(e){try{var s="",a=null;do s+=zt(e,a),a=e,e=e.return;while(e);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var vt=Object.prototype.hasOwnProperty,kt=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,Nt=r.unstable_shouldYield,Dt=r.unstable_requestPaint,de=r.unstable_now,Yt=r.unstable_getCurrentPriorityLevel,Ee=r.unstable_ImmediatePriority,Ss=r.unstable_UserBlockingPriority,en=r.unstable_NormalPriority,us=r.unstable_LowPriority,mn=r.unstable_IdlePriority,gn=r.log,Un=r.unstable_setDisableYieldValue,mt=null,At=null;function le(e){if(typeof gn=="function"&&Un(e),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(mt,e)}catch{}}var Qt=Math.clz32?Math.clz32:ma,Vi=Math.log,Ui=Math.LN2;function ma(e){return e>>>=0,e===0?32:31-(Vi(e)/Ui|0)|0}var Zt=256,Ae=262144,Wt=4194304;function Ye(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function In(e,s,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,m=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var C=l&134217727;return C!==0?(l=C&~m,l!==0?h=Ye(l):(_&=C,_!==0?h=Ye(_):a||(a=C&~e,a!==0&&(h=Ye(a))))):(C=l&~m,C!==0?h=Ye(C):_!==0?h=Ye(_):a||(a=l&~e,a!==0&&(h=Ye(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function ce(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function Cs(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ts(){var e=Wt;return Wt<<=1,(Wt&62914560)===0&&(Wt=4194304),e}function Js(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function xs(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ga(e,s,a,l,h,m){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var C=e.entanglements,k=e.expirationTimes,P=e.hiddenUpdates;for(a=_&~a;0<a;){var K=31-Qt(a),et=1<<K;C[K]=0,k[K]=-1;var H=P[K];if(H!==null)for(P[K]=null,K=0;K<H.length;K++){var Z=H[K];Z!==null&&(Z.lane&=-536870913)}a&=~et}l!==0&&ti(e,l,0),m!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=m&~(_&~s))}function ti(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var l=31-Qt(s);e.entangledLanes|=s,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function qo(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var l=31-Qt(a),h=1<<l;h&s|e[l]&s&&(e[l]|=s),a&=~h}}function xr(e,s){var a=s&-s;return a=(a&42)!==0?1:Er(a),(a&(e.suspendedLanes|s))!==0?0:a}function Er(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ya(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Dd(){var e=A.p;return e!==0?e:(e=window.event,e===void 0?32:y0(e.type))}function wd(e,s){var a=A.p;try{return A.p=e,s()}finally{A.p=a}}var ei=Math.random().toString(36).slice(2),Xe="__reactFiber$"+ei,yn="__reactProps$"+ei,_a="__reactContainer$"+ei,Jc="__reactEvents$"+ei,Nv="__reactListeners$"+ei,Dv="__reactHandles$"+ei,Ld="__reactResources$"+ei,Ar="__reactMarker$"+ei;function tu(e){delete e[Xe],delete e[yn],delete e[Jc],delete e[Nv],delete e[Dv]}function va(e){var s=e[Xe];if(s)return s;for(var a=e.parentNode;a;){if(s=a[_a]||a[Xe]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=e0(e);e!==null;){if(a=e[Xe])return a;e=e0(e)}return s}e=a,a=e.parentNode}return null}function ba(e){if(e=e[Xe]||e[_a]){var s=e.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return e}return null}function Mr(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(i(33))}function Sa(e){var s=e[Ld];return s||(s=e[Ld]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ge(e){e[Ar]=!0}var zd=new Set,Bd={};function Ii(e,s){Ca(e,s),Ca(e+"Capture",s)}function Ca(e,s){for(Bd[e]=s,e=0;e<s.length;e++)zd.add(s[e])}var wv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jd={},Vd={};function Lv(e){return vt.call(Vd,e)?!0:vt.call(jd,e)?!1:wv.test(e)?Vd[e]=!0:(jd[e]=!0,!1)}function Po(e,s,a){if(Lv(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function Go(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function Es(e,s,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+l)}}function qn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ud(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function zv(e,s,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,s);if(!e.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(e,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function eu(e){if(!e._valueTracker){var s=Ud(e)?"checked":"value";e._valueTracker=zv(e,s,""+e[s])}}function Id(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return e&&(l=Ud(e)?e.checked?"true":"false":e.value),e=l,e!==a?(s.setValue(e),!0):!1}function Ho(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Bv=/[\n"\\]/g;function Pn(e){return e.replace(Bv,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function nu(e,s,a,l,h,m,_,C){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),s!=null?_==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+qn(s)):e.value!==""+qn(s)&&(e.value=""+qn(s)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),s!=null?su(e,_,qn(s)):a!=null?su(e,_,qn(a)):l!=null&&e.removeAttribute("value"),h==null&&m!=null&&(e.defaultChecked=!!m),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+qn(C):e.removeAttribute("name")}function qd(e,s,a,l,h,m,_,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){eu(e);return}a=a!=null?""+qn(a):"",s=s!=null?""+qn(s):a,C||s===e.value||(e.value=s),e.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=C?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),eu(e)}function su(e,s,a){s==="number"&&Ho(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ta(e,s,a,l){if(e=e.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=s.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+qn(a),s=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}s!==null||e[h].disabled||(s=e[h])}s!==null&&(s.selected=!0)}}function Pd(e,s,a){if(s!=null&&(s=""+qn(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+qn(a):""}function Gd(e,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(ot(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=qn(s),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),eu(e)}function xa(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var jv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hd(e,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":l?e.setProperty(s,a):typeof a!="number"||a===0||jv.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function Fd(e,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Hd(e,h,l)}else for(var m in s)s.hasOwnProperty(m)&&Hd(e,m,s[m])}function iu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fo(e){return Uv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function As(){}var au=null;function ru(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ea=null,Aa=null;function Yd(e){var s=ba(e);if(s&&(e=s.stateNode)){var a=e[yn]||null;t:switch(e=s.stateNode,s.type){case"input":if(nu(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==e&&l.form===e.form){var h=l[yn]||null;if(!h)throw Error(i(90));nu(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===e.form&&Id(l)}break t;case"textarea":Pd(e,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Ta(e,!!a.multiple,s,!1)}}}var ou=!1;function Xd(e,s,a){if(ou)return e(s,a);ou=!0;try{var l=e(s);return l}finally{if(ou=!1,(Ea!==null||Aa!==null)&&(Dl(),Ea&&(s=Ea,e=Aa,Aa=Ea=null,Yd(s),e)))for(s=0;s<e.length;s++)Yd(e[s])}}function Rr(e,s){var a=e.stateNode;if(a===null)return null;var l=a[yn]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lu=!1;if(Ms)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){lu=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{lu=!1}var ni=null,cu=null,Yo=null;function Qd(){if(Yo)return Yo;var e,s=cu,a=s.length,l,h="value"in ni?ni.value:ni.textContent,m=h.length;for(e=0;e<a&&s[e]===h[e];e++);var _=a-e;for(l=1;l<=_&&s[a-l]===h[m-l];l++);return Yo=h.slice(e,1<l?1-l:void 0)}function Xo(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Qo(){return!0}function $d(){return!1}function _n(e){function s(a,l,h,m,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(a=e[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Qo:$d,this.isPropagationStopped=$d,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),s}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$o=_n(qi),Or=y({},qi,{view:0,detail:0}),Iv=_n(Or),uu,hu,Nr,Zo=y({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:du,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nr&&(Nr&&e.type==="mousemove"?(uu=e.screenX-Nr.screenX,hu=e.screenY-Nr.screenY):hu=uu=0,Nr=e),uu)},movementY:function(e){return"movementY"in e?e.movementY:hu}}),Zd=_n(Zo),qv=y({},Zo,{dataTransfer:0}),Pv=_n(qv),Gv=y({},Or,{relatedTarget:0}),fu=_n(Gv),Hv=y({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=_n(Hv),Yv=y({},qi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xv=_n(Yv),Qv=y({},qi,{data:0}),Wd=_n(Qv),$v={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kv(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Wv[e])?!!s[e]:!1}function du(){return Kv}var Jv=y({},Or,{key:function(e){if(e.key){var s=$v[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Xo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:du,charCode:function(e){return e.type==="keypress"?Xo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t1=_n(Jv),e1=y({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kd=_n(e1),n1=y({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:du}),s1=_n(n1),i1=y({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),a1=_n(i1),r1=y({},Zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),o1=_n(r1),l1=y({},qi,{newState:0,oldState:0}),c1=_n(l1),u1=[9,13,27,32],pu=Ms&&"CompositionEvent"in window,Dr=null;Ms&&"documentMode"in document&&(Dr=document.documentMode);var h1=Ms&&"TextEvent"in window&&!Dr,Jd=Ms&&(!pu||Dr&&8<Dr&&11>=Dr),tp=" ",ep=!1;function np(e,s){switch(e){case"keyup":return u1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ma=!1;function f1(e,s){switch(e){case"compositionend":return sp(s);case"keypress":return s.which!==32?null:(ep=!0,tp);case"textInput":return e=s.data,e===tp&&ep?null:e;default:return null}}function d1(e,s){if(Ma)return e==="compositionend"||!pu&&np(e,s)?(e=Qd(),Yo=cu=ni=null,Ma=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Jd&&s.locale!=="ko"?null:s.data;default:return null}}var p1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!p1[e.type]:s==="textarea"}function ap(e,s,a,l){Ea?Aa?Aa.push(l):Aa=[l]:Ea=l,s=Ul(s,"onChange"),0<s.length&&(a=new $o("onChange","change",null,a,l),e.push({event:a,listeners:s}))}var wr=null,Lr=null;function m1(e){qg(e,0)}function Wo(e){var s=Mr(e);if(Id(s))return e}function rp(e,s){if(e==="change")return s}var op=!1;if(Ms){var mu;if(Ms){var gu="oninput"in document;if(!gu){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),gu=typeof lp.oninput=="function"}mu=gu}else mu=!1;op=mu&&(!document.documentMode||9<document.documentMode)}function cp(){wr&&(wr.detachEvent("onpropertychange",up),Lr=wr=null)}function up(e){if(e.propertyName==="value"&&Wo(Lr)){var s=[];ap(s,Lr,e,ru(e)),Xd(m1,s)}}function g1(e,s,a){e==="focusin"?(cp(),wr=s,Lr=a,wr.attachEvent("onpropertychange",up)):e==="focusout"&&cp()}function y1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wo(Lr)}function _1(e,s){if(e==="click")return Wo(s)}function v1(e,s){if(e==="input"||e==="change")return Wo(s)}function b1(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var kn=typeof Object.is=="function"?Object.is:b1;function zr(e,s){if(kn(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!vt.call(s,h)||!kn(e[h],s[h]))return!1}return!0}function hp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fp(e,s){var a=hp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=s&&l>=s)return{node:a,offset:s-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=hp(a)}}function dp(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?dp(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function pp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Ho(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)e=s.contentWindow;else break;s=Ho(e.document)}return s}function yu(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var S1=Ms&&"documentMode"in document&&11>=document.documentMode,Ra=null,_u=null,Br=null,vu=!1;function mp(e,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vu||Ra==null||Ra!==Ho(l)||(l=Ra,"selectionStart"in l&&yu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Br&&zr(Br,l)||(Br=l,l=Ul(_u,"onSelect"),0<l.length&&(s=new $o("onSelect","select",null,s,a),e.push({event:s,listeners:l}),s.target=Ra)))}function Pi(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var ka={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionrun:Pi("Transition","TransitionRun"),transitionstart:Pi("Transition","TransitionStart"),transitioncancel:Pi("Transition","TransitionCancel"),transitionend:Pi("Transition","TransitionEnd")},bu={},gp={};Ms&&(gp=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Gi(e){if(bu[e])return bu[e];if(!ka[e])return e;var s=ka[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in gp)return bu[e]=s[a];return e}var yp=Gi("animationend"),_p=Gi("animationiteration"),vp=Gi("animationstart"),C1=Gi("transitionrun"),T1=Gi("transitionstart"),x1=Gi("transitioncancel"),bp=Gi("transitionend"),Sp=new Map,Su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Su.push("scrollEnd");function Kn(e,s){Sp.set(e,s),Ii(s,[e])}var Ko=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Gn=[],Oa=0,Cu=0;function Jo(){for(var e=Oa,s=Cu=Oa=0;s<e;){var a=Gn[s];Gn[s++]=null;var l=Gn[s];Gn[s++]=null;var h=Gn[s];Gn[s++]=null;var m=Gn[s];if(Gn[s++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}m!==0&&Cp(a,h,m)}}function tl(e,s,a,l){Gn[Oa++]=e,Gn[Oa++]=s,Gn[Oa++]=a,Gn[Oa++]=l,Cu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Tu(e,s,a,l){return tl(e,s,a,l),el(e)}function Hi(e,s){return tl(e,null,null,s),el(e)}function Cp(e,s,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=e.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(h=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,h&&s!==null&&(h=31-Qt(a),e=m.hiddenUpdates,l=e[h],l===null?e[h]=[s]:l.push(s),s.lane=a|536870912),m):null}function el(e){if(50<io)throw io=0,Dh=null,Error(i(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var Na={};function E1(e,s,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(e,s,a,l){return new E1(e,s,a,l)}function xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rs(e,s){var a=e.alternate;return a===null?(a=On(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Tp(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function nl(e,s,a,l,h,m){var _=0;if(l=e,typeof e=="function")xu(e)&&(_=1);else if(typeof e=="string")_=Ob(e,a,ut.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case nt:return e=On(31,a,s,h),e.elementType=nt,e.lanes=m,e;case T:return Fi(a.children,h,m,s);case x:_=8,h|=24;break;case E:return e=On(12,a,s,h|2),e.elementType=E,e.lanes=m,e;case O:return e=On(13,a,s,h),e.elementType=O,e.lanes=m,e;case U:return e=On(19,a,s,h),e.elementType=U,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:_=10;break t;case w:_=9;break t;case X:_=11;break t;case j:_=14;break t;case z:_=16,l=null;break t}_=29,a=Error(i(130,e===null?"null":typeof e,"")),l=null}return s=On(_,a,s,h),s.elementType=e,s.type=l,s.lanes=m,s}function Fi(e,s,a,l){return e=On(7,e,l,s),e.lanes=a,e}function Eu(e,s,a){return e=On(6,e,null,s),e.lanes=a,e}function xp(e){var s=On(18,null,null,0);return s.stateNode=e,s}function Au(e,s,a){return s=On(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var Ep=new WeakMap;function Hn(e,s){if(typeof e=="object"&&e!==null){var a=Ep.get(e);return a!==void 0?a:(s={value:e,source:s,stack:Lt(s)},Ep.set(e,s),s)}return{value:e,source:s,stack:Lt(s)}}var Da=[],wa=0,sl=null,jr=0,Fn=[],Yn=0,si=null,hs=1,fs="";function ks(e,s){Da[wa++]=jr,Da[wa++]=sl,sl=e,jr=s}function Ap(e,s,a){Fn[Yn++]=hs,Fn[Yn++]=fs,Fn[Yn++]=si,si=e;var l=hs;e=fs;var h=32-Qt(l)-1;l&=~(1<<h),a+=1;var m=32-Qt(s)+h;if(30<m){var _=h-h%5;m=(l&(1<<_)-1).toString(32),l>>=_,h-=_,hs=1<<32-Qt(s)+h|a<<h|l,fs=m+e}else hs=1<<m|a<<h|l,fs=e}function Mu(e){e.return!==null&&(ks(e,1),Ap(e,1,0))}function Ru(e){for(;e===sl;)sl=Da[--wa],Da[wa]=null,jr=Da[--wa],Da[wa]=null;for(;e===si;)si=Fn[--Yn],Fn[Yn]=null,fs=Fn[--Yn],Fn[Yn]=null,hs=Fn[--Yn],Fn[Yn]=null}function Mp(e,s){Fn[Yn++]=hs,Fn[Yn++]=fs,Fn[Yn++]=si,hs=s.id,fs=s.overflow,si=e}var Qe=null,pe=null,qt=!1,ii=null,Xn=!1,ku=Error(i(519));function ai(e){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vr(Hn(s,e)),ku}function Rp(e){var s=e.stateNode,a=e.type,l=e.memoizedProps;switch(s[Xe]=e,s[yn]=l,a){case"dialog":jt("cancel",s),jt("close",s);break;case"iframe":case"object":case"embed":jt("load",s);break;case"video":case"audio":for(a=0;a<ro.length;a++)jt(ro[a],s);break;case"source":jt("error",s);break;case"img":case"image":case"link":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"input":jt("invalid",s),qd(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":jt("invalid",s);break;case"textarea":jt("invalid",s),Gd(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Fg(s.textContent,a)?(l.popover!=null&&(jt("beforetoggle",s),jt("toggle",s)),l.onScroll!=null&&jt("scroll",s),l.onScrollEnd!=null&&jt("scrollend",s),l.onClick!=null&&(s.onclick=As),s=!0):s=!1,s||ai(e,!0)}function kp(e){for(Qe=e.return;Qe;)switch(Qe.tag){case 5:case 31:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:Qe=Qe.return}}function La(e){if(e!==Qe)return!1;if(!qt)return kp(e),qt=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Xh(e.type,e.memoizedProps)),a=!a),a&&pe&&ai(e),kp(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));pe=t0(e)}else if(s===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));pe=t0(e)}else s===27?(s=pe,vi(e.type)?(e=Kh,Kh=null,pe=e):pe=s):pe=Qe?$n(e.stateNode.nextSibling):null;return!0}function Yi(){pe=Qe=null,qt=!1}function Ou(){var e=ii;return e!==null&&(Cn===null?Cn=e:Cn.push.apply(Cn,e),ii=null),e}function Vr(e){ii===null?ii=[e]:ii.push(e)}var Nu=R(null),Xi=null,Os=null;function ri(e,s,a){it(Nu,s._currentValue),s._currentValue=a}function Ns(e){e._currentValue=Nu.current,F(Nu)}function Du(e,s,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),e===a)break;e=e.return}}function wu(e,s,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var m=h.dependencies;if(m!==null){var _=h.child;m=m.firstContext;t:for(;m!==null;){var C=m;m=h;for(var k=0;k<s.length;k++)if(C.context===s[k]){m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),Du(m.return,a,e),l||(_=null);break t}m=C.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(i(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Du(_,a,e),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===e){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function za(e,s,a,l){e=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var C=h.type;kn(h.pendingProps.value,_.value)||(e!==null?e.push(C):e=[C])}}else if(h===ht.current){if(_=h.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(ho):e=[ho])}h=h.return}e!==null&&wu(s,e,a,l),s.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qi(e){Xi=e,Os=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $e(e){return Op(Xi,e)}function al(e,s){return Xi===null&&Qi(e),Op(e,s)}function Op(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Os===null){if(e===null)throw Error(i(308));Os=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Os=Os.next=s;return a}var A1=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},M1=r.unstable_scheduleCallback,R1=r.unstable_NormalPriority,Oe={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lu(){return{controller:new A1,data:new Map,refCount:0}}function Ur(e){e.refCount--,e.refCount===0&&M1(R1,function(){e.controller.abort()})}var Ir=null,zu=0,Ba=0,ja=null;function k1(e,s){if(Ir===null){var a=Ir=[];zu=0,Ba=Vh(),ja={status:"pending",value:void 0,then:function(l){a.push(l)}}}return zu++,s.then(Np,Np),s}function Np(){if(--zu===0&&Ir!==null){ja!==null&&(ja.status="fulfilled");var e=Ir;Ir=null,Ba=0,ja=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function O1(e,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Dp=M.S;M.S=function(e,s){mg=de(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&k1(e,s),Dp!==null&&Dp(e,s)};var $i=R(null);function Bu(){var e=$i.current;return e!==null?e:ae.pooledCache}function rl(e,s){s===null?it($i,$i.current):it($i,s.pool)}function wp(){var e=Bu();return e===null?null:{parent:Oe._currentValue,pool:e}}var Va=Error(i(460)),ju=Error(i(474)),ol=Error(i(542)),ll={then:function(){}};function Lp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function zp(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(As,As),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,jp(e),e;default:if(typeof s.status=="string")s.then(As,As);else{if(e=ae,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=s,e.status="pending",e.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,jp(e),e}throw Wi=s,Va}}function Zi(e){try{var s=e._init;return s(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Wi=a,Va):a}}var Wi=null;function Bp(){if(Wi===null)throw Error(i(459));var e=Wi;return Wi=null,e}function jp(e){if(e===Va||e===ol)throw Error(i(483))}var Ua=null,qr=0;function cl(e){var s=qr;return qr+=1,Ua===null&&(Ua=[]),zp(Ua,e,s)}function Pr(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function ul(e,s){throw s.$$typeof===v?Error(i(525)):(e=Object.prototype.toString.call(s),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function Vp(e){function s(V,L){if(e){var q=V.deletions;q===null?(V.deletions=[L],V.flags|=16):q.push(L)}}function a(V,L){if(!e)return null;for(;L!==null;)s(V,L),L=L.sibling;return null}function l(V){for(var L=new Map;V!==null;)V.key!==null?L.set(V.key,V):L.set(V.index,V),V=V.sibling;return L}function h(V,L){return V=Rs(V,L),V.index=0,V.sibling=null,V}function m(V,L,q){return V.index=q,e?(q=V.alternate,q!==null?(q=q.index,q<L?(V.flags|=67108866,L):q):(V.flags|=67108866,L)):(V.flags|=1048576,L)}function _(V){return e&&V.alternate===null&&(V.flags|=67108866),V}function C(V,L,q,tt){return L===null||L.tag!==6?(L=Eu(q,V.mode,tt),L.return=V,L):(L=h(L,q),L.return=V,L)}function k(V,L,q,tt){var _t=q.type;return _t===T?K(V,L,q.props.children,tt,q.key):L!==null&&(L.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===z&&Zi(_t)===L.type)?(L=h(L,q.props),Pr(L,q),L.return=V,L):(L=nl(q.type,q.key,q.props,null,V.mode,tt),Pr(L,q),L.return=V,L)}function P(V,L,q,tt){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=Au(q,V.mode,tt),L.return=V,L):(L=h(L,q.children||[]),L.return=V,L)}function K(V,L,q,tt,_t){return L===null||L.tag!==7?(L=Fi(q,V.mode,tt,_t),L.return=V,L):(L=h(L,q),L.return=V,L)}function et(V,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Eu(""+L,V.mode,q),L.return=V,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return q=nl(L.type,L.key,L.props,null,V.mode,q),Pr(q,L),q.return=V,q;case S:return L=Au(L,V.mode,q),L.return=V,L;case z:return L=Zi(L),et(V,L,q)}if(ot(L)||Q(L))return L=Fi(L,V.mode,q,null),L.return=V,L;if(typeof L.then=="function")return et(V,cl(L),q);if(L.$$typeof===N)return et(V,al(V,L),q);ul(V,L)}return null}function H(V,L,q,tt){var _t=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return _t!==null?null:C(V,L,""+q,tt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return q.key===_t?k(V,L,q,tt):null;case S:return q.key===_t?P(V,L,q,tt):null;case z:return q=Zi(q),H(V,L,q,tt)}if(ot(q)||Q(q))return _t!==null?null:K(V,L,q,tt,null);if(typeof q.then=="function")return H(V,L,cl(q),tt);if(q.$$typeof===N)return H(V,L,al(V,q),tt);ul(V,q)}return null}function Z(V,L,q,tt,_t){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return V=V.get(q)||null,C(L,V,""+tt,_t);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case b:return V=V.get(tt.key===null?q:tt.key)||null,k(L,V,tt,_t);case S:return V=V.get(tt.key===null?q:tt.key)||null,P(L,V,tt,_t);case z:return tt=Zi(tt),Z(V,L,q,tt,_t)}if(ot(tt)||Q(tt))return V=V.get(q)||null,K(L,V,tt,_t,null);if(typeof tt.then=="function")return Z(V,L,q,cl(tt),_t);if(tt.$$typeof===N)return Z(V,L,q,al(L,tt),_t);ul(L,tt)}return null}function ft(V,L,q,tt){for(var _t=null,Ht=null,gt=L,Rt=L=0,It=null;gt!==null&&Rt<q.length;Rt++){gt.index>Rt?(It=gt,gt=null):It=gt.sibling;var Ft=H(V,gt,q[Rt],tt);if(Ft===null){gt===null&&(gt=It);break}e&&gt&&Ft.alternate===null&&s(V,gt),L=m(Ft,L,Rt),Ht===null?_t=Ft:Ht.sibling=Ft,Ht=Ft,gt=It}if(Rt===q.length)return a(V,gt),qt&&ks(V,Rt),_t;if(gt===null){for(;Rt<q.length;Rt++)gt=et(V,q[Rt],tt),gt!==null&&(L=m(gt,L,Rt),Ht===null?_t=gt:Ht.sibling=gt,Ht=gt);return qt&&ks(V,Rt),_t}for(gt=l(gt);Rt<q.length;Rt++)It=Z(gt,V,Rt,q[Rt],tt),It!==null&&(e&&It.alternate!==null&&gt.delete(It.key===null?Rt:It.key),L=m(It,L,Rt),Ht===null?_t=It:Ht.sibling=It,Ht=It);return e&&gt.forEach(function(xi){return s(V,xi)}),qt&&ks(V,Rt),_t}function bt(V,L,q,tt){if(q==null)throw Error(i(151));for(var _t=null,Ht=null,gt=L,Rt=L=0,It=null,Ft=q.next();gt!==null&&!Ft.done;Rt++,Ft=q.next()){gt.index>Rt?(It=gt,gt=null):It=gt.sibling;var xi=H(V,gt,Ft.value,tt);if(xi===null){gt===null&&(gt=It);break}e&&gt&&xi.alternate===null&&s(V,gt),L=m(xi,L,Rt),Ht===null?_t=xi:Ht.sibling=xi,Ht=xi,gt=It}if(Ft.done)return a(V,gt),qt&&ks(V,Rt),_t;if(gt===null){for(;!Ft.done;Rt++,Ft=q.next())Ft=et(V,Ft.value,tt),Ft!==null&&(L=m(Ft,L,Rt),Ht===null?_t=Ft:Ht.sibling=Ft,Ht=Ft);return qt&&ks(V,Rt),_t}for(gt=l(gt);!Ft.done;Rt++,Ft=q.next())Ft=Z(gt,V,Rt,Ft.value,tt),Ft!==null&&(e&&Ft.alternate!==null&&gt.delete(Ft.key===null?Rt:Ft.key),L=m(Ft,L,Rt),Ht===null?_t=Ft:Ht.sibling=Ft,Ht=Ft);return e&&gt.forEach(function(qb){return s(V,qb)}),qt&&ks(V,Rt),_t}function ne(V,L,q,tt){if(typeof q=="object"&&q!==null&&q.type===T&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case b:t:{for(var _t=q.key;L!==null;){if(L.key===_t){if(_t=q.type,_t===T){if(L.tag===7){a(V,L.sibling),tt=h(L,q.props.children),tt.return=V,V=tt;break t}}else if(L.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===z&&Zi(_t)===L.type){a(V,L.sibling),tt=h(L,q.props),Pr(tt,q),tt.return=V,V=tt;break t}a(V,L);break}else s(V,L);L=L.sibling}q.type===T?(tt=Fi(q.props.children,V.mode,tt,q.key),tt.return=V,V=tt):(tt=nl(q.type,q.key,q.props,null,V.mode,tt),Pr(tt,q),tt.return=V,V=tt)}return _(V);case S:t:{for(_t=q.key;L!==null;){if(L.key===_t)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){a(V,L.sibling),tt=h(L,q.children||[]),tt.return=V,V=tt;break t}else{a(V,L);break}else s(V,L);L=L.sibling}tt=Au(q,V.mode,tt),tt.return=V,V=tt}return _(V);case z:return q=Zi(q),ne(V,L,q,tt)}if(ot(q))return ft(V,L,q,tt);if(Q(q)){if(_t=Q(q),typeof _t!="function")throw Error(i(150));return q=_t.call(q),bt(V,L,q,tt)}if(typeof q.then=="function")return ne(V,L,cl(q),tt);if(q.$$typeof===N)return ne(V,L,al(V,q),tt);ul(V,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(a(V,L.sibling),tt=h(L,q),tt.return=V,V=tt):(a(V,L),tt=Eu(q,V.mode,tt),tt.return=V,V=tt),_(V)):a(V,L)}return function(V,L,q,tt){try{qr=0;var _t=ne(V,L,q,tt);return Ua=null,_t}catch(gt){if(gt===Va||gt===ol)throw gt;var Ht=On(29,gt,null,V.mode);return Ht.lanes=tt,Ht.return=V,Ht}finally{}}}var Ki=Vp(!0),Up=Vp(!1),oi=!1;function Vu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uu(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function li(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ci(e,s,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Xt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=el(e),Cp(e,null,a),s}return tl(e,l,s,a),el(e)}function Gr(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,qo(e,a)}}function Iu(e,s){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var qu=!1;function Hr(){if(qu){var e=ja;if(e!==null)throw e}}function Fr(e,s,a,l){qu=!1;var h=e.updateQueue;oi=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var k=C,P=k.next;k.next=null,_===null?m=P:_.next=P,_=k;var K=e.alternate;K!==null&&(K=K.updateQueue,C=K.lastBaseUpdate,C!==_&&(C===null?K.firstBaseUpdate=P:C.next=P,K.lastBaseUpdate=k))}if(m!==null){var et=h.baseState;_=0,K=P=k=null,C=m;do{var H=C.lane&-536870913,Z=H!==C.lane;if(Z?(Ut&H)===H:(l&H)===H){H!==0&&H===Ba&&(qu=!0),K!==null&&(K=K.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var ft=e,bt=C;H=s;var ne=a;switch(bt.tag){case 1:if(ft=bt.payload,typeof ft=="function"){et=ft.call(ne,et,H);break t}et=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=bt.payload,H=typeof ft=="function"?ft.call(ne,et,H):ft,H==null)break t;et=y({},et,H);break t;case 2:oi=!0}}H=C.callback,H!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=h.callbacks,Z===null?h.callbacks=[H]:Z.push(H))}else Z={lane:H,tag:C.tag,payload:C.payload,callback:C.callback,next:null},K===null?(P=K=Z,k=et):K=K.next=Z,_|=H;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,h.lastBaseUpdate=Z,h.shared.pending=null}}while(!0);K===null&&(k=et),h.baseState=k,h.firstBaseUpdate=P,h.lastBaseUpdate=K,m===null&&(h.shared.lanes=0),pi|=_,e.lanes=_,e.memoizedState=et}}function Ip(e,s){if(typeof e!="function")throw Error(i(191,e));e.call(s)}function qp(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ip(a[e],s)}var Ia=R(null),hl=R(0);function Pp(e,s){e=Is,it(hl,e),it(Ia,s),Is=e|s.baseLanes}function Pu(){it(hl,Is),it(Ia,Ia.current)}function Gu(){Is=hl.current,F(Ia),F(hl)}var Nn=R(null),Qn=null;function ui(e){var s=e.alternate;it(Me,Me.current&1),it(Nn,e),Qn===null&&(s===null||Ia.current!==null||s.memoizedState!==null)&&(Qn=e)}function Hu(e){it(Me,Me.current),it(Nn,e),Qn===null&&(Qn=e)}function Gp(e){e.tag===22?(it(Me,Me.current),it(Nn,e),Qn===null&&(Qn=e)):hi()}function hi(){it(Me,Me.current),it(Nn,Nn.current)}function Dn(e){F(Nn),Qn===e&&(Qn=null),F(Me)}var Me=R(0);function fl(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Zh(a)||Wh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ds=0,Mt=null,te=null,Ne=null,dl=!1,qa=!1,Ji=!1,pl=0,Yr=0,Pa=null,N1=0;function Se(){throw Error(i(321))}function Fu(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!kn(e[a],s[a]))return!1;return!0}function Yu(e,s,a,l,h,m){return Ds=m,Mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,M.H=e===null||e.memoizedState===null?Am:oh,Ji=!1,m=a(l,h),Ji=!1,qa&&(m=Fp(s,a,l,h)),Hp(e),m}function Hp(e){M.H=$r;var s=te!==null&&te.next!==null;if(Ds=0,Ne=te=Mt=null,dl=!1,Yr=0,Pa=null,s)throw Error(i(300));e===null||De||(e=e.dependencies,e!==null&&il(e)&&(De=!0))}function Fp(e,s,a,l){Mt=e;var h=0;do{if(qa&&(Pa=null),Yr=0,qa=!1,25<=h)throw Error(i(301));if(h+=1,Ne=te=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}M.H=Mm,m=s(a,l)}while(qa);return m}function D1(){var e=M.H,s=e.useState()[0];return s=typeof s.then=="function"?Xr(s):s,e=e.useState()[0],(te!==null?te.memoizedState:null)!==e&&(Mt.flags|=1024),s}function Xu(){var e=pl!==0;return pl=0,e}function Qu(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function $u(e){if(dl){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}dl=!1}Ds=0,Ne=te=Mt=null,qa=!1,Yr=pl=0,Pa=null}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?Mt.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function Re(){if(te===null){var e=Mt.alternate;e=e!==null?e.memoizedState:null}else e=te.next;var s=Ne===null?Mt.memoizedState:Ne.next;if(s!==null)Ne=s,te=e;else{if(e===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));te=e,e={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},Ne===null?Mt.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function ml(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xr(e){var s=Yr;return Yr+=1,Pa===null&&(Pa=[]),e=zp(Pa,e,s),s=Mt,(Ne===null?s.memoizedState:Ne.next)===null&&(s=s.alternate,M.H=s===null||s.memoizedState===null?Am:oh),e}function gl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Xr(e);if(e.$$typeof===N)return $e(e)}throw Error(i(438,String(e)))}function Zu(e){var s=null,a=Mt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Mt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ml(),Mt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),l=0;l<e;l++)a[l]=G;return s.index++,a}function ws(e,s){return typeof s=="function"?s(e):s}function yl(e){var s=Re();return Wu(s,te,e)}function Wu(e,s,a){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=e.baseQueue,m=l.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}s.baseQueue=h=m,l.pending=null}if(m=e.baseState,h===null)e.memoizedState=m;else{s=h.next;var C=_=null,k=null,P=s,K=!1;do{var et=P.lane&-536870913;if(et!==P.lane?(Ut&et)===et:(Ds&et)===et){var H=P.revertLane;if(H===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),et===Ba&&(K=!0);else if((Ds&H)===H){P=P.next,H===Ba&&(K=!0);continue}else et={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},k===null?(C=k=et,_=m):k=k.next=et,Mt.lanes|=H,pi|=H;et=P.action,Ji&&a(m,et),m=P.hasEagerState?P.eagerState:a(m,et)}else H={lane:et,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},k===null?(C=k=H,_=m):k=k.next=H,Mt.lanes|=et,pi|=et;P=P.next}while(P!==null&&P!==s);if(k===null?_=m:k.next=C,!kn(m,e.memoizedState)&&(De=!0,K&&(a=ja,a!==null)))throw a;e.memoizedState=m,e.baseState=_,e.baseQueue=k,l.lastRenderedState=m}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Ku(e){var s=Re(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do m=e(m,_.action),_=_.next;while(_!==h);kn(m,s.memoizedState)||(De=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function Yp(e,s,a){var l=Mt,h=Re(),m=qt;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var _=!kn((te||h).memoizedState,a);if(_&&(h.memoizedState=a,De=!0),h=h.queue,eh($p.bind(null,l,h,e),[e]),h.getSnapshot!==s||_||Ne!==null&&Ne.memoizedState.tag&1){if(l.flags|=2048,Ga(9,{destroy:void 0},Qp.bind(null,l,h,a,s),null),ae===null)throw Error(i(349));m||(Ds&127)!==0||Xp(l,s,a)}return a}function Xp(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=Mt.updateQueue,s===null?(s=ml(),Mt.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function Qp(e,s,a,l){s.value=a,s.getSnapshot=l,Zp(s)&&Wp(e)}function $p(e,s,a){return a(function(){Zp(s)&&Wp(e)})}function Zp(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!kn(e,a)}catch{return!0}}function Wp(e){var s=Hi(e,2);s!==null&&Tn(s,e,2)}function Ju(e){var s=un();if(typeof e=="function"){var a=e;if(e=a(),Ji){le(!0);try{a()}finally{le(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},s}function Kp(e,s,a,l){return e.baseState=a,Wu(e,te,typeof l=="function"?l:ws)}function w1(e,s,a,l,h){if(bl(e))throw Error(i(485));if(e=s.action,e!==null){var m={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};M.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,Jp(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Jp(e,s){var a=s.action,l=s.payload,h=e.state;if(s.isTransition){var m=M.T,_={};M.T=_;try{var C=a(h,l),k=M.S;k!==null&&k(_,C),tm(e,s,C)}catch(P){th(e,s,P)}finally{m!==null&&_.types!==null&&(m.types=_.types),M.T=m}}else try{m=a(h,l),tm(e,s,m)}catch(P){th(e,s,P)}}function tm(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){em(e,s,l)},function(l){return th(e,s,l)}):em(e,s,a)}function em(e,s,a){s.status="fulfilled",s.value=a,nm(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,Jp(e,a)))}function th(e,s,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,nm(s),s=s.next;while(s!==l)}e.action=null}function nm(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function sm(e,s){return s}function im(e,s){if(qt){var a=ae.formState;if(a!==null){t:{var l=Mt;if(qt){if(pe){e:{for(var h=pe,m=Xn;h.nodeType!==8;){if(!m){h=null;break e}if(h=$n(h.nextSibling),h===null){h=null;break e}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){pe=$n(h.nextSibling),l=h.data==="F!";break t}}ai(l)}l=!1}l&&(s=a[0])}}return a=un(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sm,lastRenderedState:s},a.queue=l,a=Tm.bind(null,Mt,l),l.dispatch=a,l=Ju(!1),m=rh.bind(null,Mt,!1,l.queue),l=un(),h={state:s,dispatch:null,action:e,pending:null},l.queue=h,a=w1.bind(null,Mt,h,m,a),h.dispatch=a,l.memoizedState=e,[s,a,!1]}function am(e){var s=Re();return rm(s,te,e)}function rm(e,s,a){if(s=Wu(e,s,sm)[0],e=yl(ws)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Xr(s)}catch(_){throw _===Va?ol:_}else l=s;s=Re();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(Mt.flags|=2048,Ga(9,{destroy:void 0},L1.bind(null,h,a),null)),[l,m,e]}function L1(e,s){e.action=s}function om(e){var s=Re(),a=te;if(a!==null)return rm(s,a,e);Re(),s=s.memoizedState,a=Re();var l=a.queue.dispatch;return a.memoizedState=e,[s,l,!1]}function Ga(e,s,a,l){return e={tag:e,create:a,deps:l,inst:s,next:null},s=Mt.updateQueue,s===null&&(s=ml(),Mt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,s.lastEffect=e),e}function lm(){return Re().memoizedState}function _l(e,s,a,l){var h=un();Mt.flags|=e,h.memoizedState=Ga(1|s,{destroy:void 0},a,l===void 0?null:l)}function vl(e,s,a,l){var h=Re();l=l===void 0?null:l;var m=h.memoizedState.inst;te!==null&&l!==null&&Fu(l,te.memoizedState.deps)?h.memoizedState=Ga(s,m,a,l):(Mt.flags|=e,h.memoizedState=Ga(1|s,m,a,l))}function cm(e,s){_l(8390656,8,e,s)}function eh(e,s){vl(2048,8,e,s)}function z1(e){Mt.flags|=4;var s=Mt.updateQueue;if(s===null)s=ml(),Mt.updateQueue=s,s.events=[e];else{var a=s.events;a===null?s.events=[e]:a.push(e)}}function um(e){var s=Re().memoizedState;return z1({ref:s,nextImpl:e}),function(){if((Xt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function hm(e,s){return vl(4,2,e,s)}function fm(e,s){return vl(4,4,e,s)}function dm(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function pm(e,s,a){a=a!=null?a.concat([e]):null,vl(4,4,dm.bind(null,s,e),a)}function nh(){}function mm(e,s){var a=Re();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Fu(s,l[1])?l[0]:(a.memoizedState=[e,s],e)}function gm(e,s){var a=Re();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Fu(s,l[1]))return l[0];if(l=e(),Ji){le(!0);try{e()}finally{le(!1)}}return a.memoizedState=[l,s],l}function sh(e,s,a){return a===void 0||(Ds&1073741824)!==0&&(Ut&261930)===0?e.memoizedState=s:(e.memoizedState=a,e=yg(),Mt.lanes|=e,pi|=e,a)}function ym(e,s,a,l){return kn(a,s)?a:Ia.current!==null?(e=sh(e,a,l),kn(e,s)||(De=!0),e):(Ds&42)===0||(Ds&1073741824)!==0&&(Ut&261930)===0?(De=!0,e.memoizedState=a):(e=yg(),Mt.lanes|=e,pi|=e,s)}function _m(e,s,a,l,h){var m=A.p;A.p=m!==0&&8>m?m:8;var _=M.T,C={};M.T=C,rh(e,!1,s,a);try{var k=h(),P=M.S;if(P!==null&&P(C,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var K=O1(k,l);Qr(e,s,K,zn(e))}else Qr(e,s,l,zn(e))}catch(et){Qr(e,s,{then:function(){},status:"rejected",reason:et},zn())}finally{A.p=m,_!==null&&C.types!==null&&(_.types=C.types),M.T=_}}function B1(){}function ih(e,s,a,l){if(e.tag!==5)throw Error(i(476));var h=vm(e).queue;_m(e,h,s,Y,a===null?B1:function(){return bm(e),a(l)})}function vm(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:Y},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function bm(e){var s=vm(e);s.next===null&&(s=e.alternate.memoizedState),Qr(e,s.next.queue,{},zn())}function ah(){return $e(ho)}function Sm(){return Re().memoizedState}function Cm(){return Re().memoizedState}function j1(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=zn();e=li(a);var l=ci(s,e,a);l!==null&&(Tn(l,s,a),Gr(l,s,a)),s={cache:Lu()},e.payload=s;return}s=s.return}}function V1(e,s,a){var l=zn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bl(e)?xm(s,a):(a=Tu(e,s,a,l),a!==null&&(Tn(a,e,l),Em(a,s,l)))}function Tm(e,s,a){var l=zn();Qr(e,s,a,l)}function Qr(e,s,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(bl(e))xm(s,h);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,C=m(_,a);if(h.hasEagerState=!0,h.eagerState=C,kn(C,_))return tl(e,s,h,0),ae===null&&Jo(),!1}catch{}finally{}if(a=Tu(e,s,h,l),a!==null)return Tn(a,e,l),Em(a,s,l),!0}return!1}function rh(e,s,a,l){if(l={lane:2,revertLane:Vh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bl(e)){if(s)throw Error(i(479))}else s=Tu(e,a,l,2),s!==null&&Tn(s,e,2)}function bl(e){var s=e.alternate;return e===Mt||s!==null&&s===Mt}function xm(e,s){qa=dl=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function Em(e,s,a){if((a&4194048)!==0){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,qo(e,a)}}var $r={readContext:$e,use:gl,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useLayoutEffect:Se,useInsertionEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useSyncExternalStore:Se,useId:Se,useHostTransitionStatus:Se,useFormState:Se,useActionState:Se,useOptimistic:Se,useMemoCache:Se,useCacheRefresh:Se};$r.useEffectEvent=Se;var Am={readContext:$e,use:gl,useCallback:function(e,s){return un().memoizedState=[e,s===void 0?null:s],e},useContext:$e,useEffect:cm,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,_l(4194308,4,dm.bind(null,s,e),a)},useLayoutEffect:function(e,s){return _l(4194308,4,e,s)},useInsertionEffect:function(e,s){_l(4,2,e,s)},useMemo:function(e,s){var a=un();s=s===void 0?null:s;var l=e();if(Ji){le(!0);try{e()}finally{le(!1)}}return a.memoizedState=[l,s],l},useReducer:function(e,s,a){var l=un();if(a!==void 0){var h=a(s);if(Ji){le(!0);try{a(s)}finally{le(!1)}}}else h=s;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=V1.bind(null,Mt,e),[l.memoizedState,e]},useRef:function(e){var s=un();return e={current:e},s.memoizedState=e},useState:function(e){e=Ju(e);var s=e.queue,a=Tm.bind(null,Mt,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:nh,useDeferredValue:function(e,s){var a=un();return sh(a,e,s)},useTransition:function(){var e=Ju(!1);return e=_m.bind(null,Mt,e.queue,!0,!1),un().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var l=Mt,h=un();if(qt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),ae===null)throw Error(i(349));(Ut&127)!==0||Xp(l,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,cm($p.bind(null,l,m,e),[e]),l.flags|=2048,Ga(9,{destroy:void 0},Qp.bind(null,l,m,a,s),null),a},useId:function(){var e=un(),s=ae.identifierPrefix;if(qt){var a=fs,l=hs;a=(l&~(1<<32-Qt(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=pl++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=N1++,s="_"+s+"r_"+a.toString(32)+"_";return e.memoizedState=s},useHostTransitionStatus:ah,useFormState:im,useActionState:im,useOptimistic:function(e){var s=un();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=rh.bind(null,Mt,!0,a),a.dispatch=s,[e,s]},useMemoCache:Zu,useCacheRefresh:function(){return un().memoizedState=j1.bind(null,Mt)},useEffectEvent:function(e){var s=un(),a={impl:e};return s.memoizedState=a,function(){if((Xt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},oh={readContext:$e,use:gl,useCallback:mm,useContext:$e,useEffect:eh,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:fm,useMemo:gm,useReducer:yl,useRef:lm,useState:function(){return yl(ws)},useDebugValue:nh,useDeferredValue:function(e,s){var a=Re();return ym(a,te.memoizedState,e,s)},useTransition:function(){var e=yl(ws)[0],s=Re().memoizedState;return[typeof e=="boolean"?e:Xr(e),s]},useSyncExternalStore:Yp,useId:Sm,useHostTransitionStatus:ah,useFormState:am,useActionState:am,useOptimistic:function(e,s){var a=Re();return Kp(a,te,e,s)},useMemoCache:Zu,useCacheRefresh:Cm};oh.useEffectEvent=um;var Mm={readContext:$e,use:gl,useCallback:mm,useContext:$e,useEffect:eh,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:fm,useMemo:gm,useReducer:Ku,useRef:lm,useState:function(){return Ku(ws)},useDebugValue:nh,useDeferredValue:function(e,s){var a=Re();return te===null?sh(a,e,s):ym(a,te.memoizedState,e,s)},useTransition:function(){var e=Ku(ws)[0],s=Re().memoizedState;return[typeof e=="boolean"?e:Xr(e),s]},useSyncExternalStore:Yp,useId:Sm,useHostTransitionStatus:ah,useFormState:om,useActionState:om,useOptimistic:function(e,s){var a=Re();return te!==null?Kp(a,te,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Zu,useCacheRefresh:Cm};Mm.useEffectEvent=um;function lh(e,s,a,l){s=e.memoizedState,a=a(l,s),a=a==null?s:y({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ch={enqueueSetState:function(e,s,a){e=e._reactInternals;var l=zn(),h=li(l);h.payload=s,a!=null&&(h.callback=a),s=ci(e,h,l),s!==null&&(Tn(s,e,l),Gr(s,e,l))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var l=zn(),h=li(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=ci(e,h,l),s!==null&&(Tn(s,e,l),Gr(s,e,l))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=zn(),l=li(a);l.tag=2,s!=null&&(l.callback=s),s=ci(e,l,a),s!==null&&(Tn(s,e,a),Gr(s,e,a))}};function Rm(e,s,a,l,h,m,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,_):s.prototype&&s.prototype.isPureReactComponent?!zr(a,l)||!zr(h,m):!0}function km(e,s,a,l){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==e&&ch.enqueueReplaceState(s,s.state,null)}function ta(e,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(e=e.defaultProps){a===s&&(a=y({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function Om(e){Ko(e)}function Nm(e){console.error(e)}function Dm(e){Ko(e)}function Sl(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function wm(e,s,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function uh(e,s,a){return a=li(a),a.tag=3,a.payload={element:null},a.callback=function(){Sl(e,s)},a}function Lm(e){return e=li(e),e.tag=3,e}function zm(e,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;e.payload=function(){return h(m)},e.callback=function(){wm(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){wm(s,a,l),typeof h!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function U1(e,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&za(s,a,h,!0),a=Nn.current,a!==null){switch(a.tag){case 31:case 13:return Qn===null?wl():a.alternate===null&&Ce===0&&(Ce=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===ll?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),zh(e,l,h)),!1;case 22:return a.flags|=65536,l===ll?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),zh(e,l,h)),!1}throw Error(i(435,a.tag))}return zh(e,l,h),wl(),!1}if(qt)return s=Nn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==ku&&(e=Error(i(422),{cause:l}),Vr(Hn(e,a)))):(l!==ku&&(s=Error(i(423),{cause:l}),Vr(Hn(s,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Hn(l,a),h=uh(e.stateNode,l,h),Iu(e,h),Ce!==4&&(Ce=2)),!1;var m=Error(i(520),{cause:l});if(m=Hn(m,a),so===null?so=[m]:so.push(m),Ce!==4&&(Ce=2),s===null)return!0;l=Hn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=uh(a.stateNode,l,e),Iu(a,e),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(mi===null||!mi.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Lm(h),zm(h,e,a,l),Iu(a,h),!1}a=a.return}while(a!==null);return!1}var hh=Error(i(461)),De=!1;function Ze(e,s,a,l){s.child=e===null?Up(s,null,a,l):Ki(s,e.child,a,l)}function Bm(e,s,a,l,h){a=a.render;var m=s.ref;if("ref"in l){var _={};for(var C in l)C!=="ref"&&(_[C]=l[C])}else _=l;return Qi(s),l=Yu(e,s,a,_,m,h),C=Xu(),e!==null&&!De?(Qu(e,s,h),Ls(e,s,h)):(qt&&C&&Mu(s),s.flags|=1,Ze(e,s,l,h),s.child)}function jm(e,s,a,l,h){if(e===null){var m=a.type;return typeof m=="function"&&!xu(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Vm(e,s,m,l,h)):(e=nl(a.type,null,l,s,s.mode,h),e.ref=s.ref,e.return=s,s.child=e)}if(m=e.child,!vh(e,h)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:zr,a(_,l)&&e.ref===s.ref)return Ls(e,s,h)}return s.flags|=1,e=Rs(m,l),e.ref=s.ref,e.return=s,s.child=e}function Vm(e,s,a,l,h){if(e!==null){var m=e.memoizedProps;if(zr(m,l)&&e.ref===s.ref)if(De=!1,s.pendingProps=l=m,vh(e,h))(e.flags&131072)!==0&&(De=!0);else return s.lanes=e.lanes,Ls(e,s,h)}return fh(e,s,a,l,h)}function Um(e,s,a,l){var h=l.children,m=e!==null?e.memoizedState:null;if(e===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(l=s.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,s.child=null;return Im(e,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&rl(s,m!==null?m.cachePool:null),m!==null?Pp(s,m):Pu(),Gp(s);else return l=s.lanes=536870912,Im(e,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(rl(s,m.cachePool),Pp(s,m),hi(),s.memoizedState=null):(e!==null&&rl(s,null),Pu(),hi());return Ze(e,s,h,a),s.child}function Zr(e,s){return e!==null&&e.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Im(e,s,a,l,h){var m=Bu();return m=m===null?null:{parent:Oe._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},e!==null&&rl(s,null),Pu(),Gp(s),e!==null&&za(e,s,l,!0),s.childLanes=h,null}function Cl(e,s){return s=xl({mode:s.mode,children:s.children},e.mode),s.ref=e.ref,e.child=s,s.return=e,s}function qm(e,s,a){return Ki(s,e.child,null,a),e=Cl(s,s.pendingProps),e.flags|=2,Dn(s),s.memoizedState=null,e}function I1(e,s,a){var l=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,e===null){if(qt){if(l.mode==="hidden")return e=Cl(s,l),s.lanes=536870912,Zr(null,e);if(Hu(s),(e=pe)?(e=Jg(e,Xn),e=e!==null&&e.data==="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:si!==null?{id:hs,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},a=xp(e),a.return=s,s.child=a,Qe=s,pe=null)):e=null,e===null)throw ai(s);return s.lanes=536870912,null}return Cl(s,l)}var m=e.memoizedState;if(m!==null){var _=m.dehydrated;if(Hu(s),h)if(s.flags&256)s.flags&=-257,s=qm(e,s,a);else if(s.memoizedState!==null)s.child=e.child,s.flags|=128,s=null;else throw Error(i(558));else if(De||za(e,s,a,!1),h=(a&e.childLanes)!==0,De||h){if(l=ae,l!==null&&(_=xr(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,Hi(e,_),Tn(l,e,_),hh;wl(),s=qm(e,s,a)}else e=m.treeContext,pe=$n(_.nextSibling),Qe=s,qt=!0,ii=null,Xn=!1,e!==null&&Mp(s,e),s=Cl(s,l),s.flags|=4096;return s}return e=Rs(e.child,{mode:l.mode,children:l.children}),e.ref=s.ref,s.child=e,e.return=s,e}function Tl(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function fh(e,s,a,l,h){return Qi(s),a=Yu(e,s,a,l,void 0,h),l=Xu(),e!==null&&!De?(Qu(e,s,h),Ls(e,s,h)):(qt&&l&&Mu(s),s.flags|=1,Ze(e,s,a,h),s.child)}function Pm(e,s,a,l,h,m){return Qi(s),s.updateQueue=null,a=Fp(s,l,a,h),Hp(e),l=Xu(),e!==null&&!De?(Qu(e,s,m),Ls(e,s,m)):(qt&&l&&Mu(s),s.flags|=1,Ze(e,s,a,m),s.child)}function Gm(e,s,a,l,h){if(Qi(s),s.stateNode===null){var m=Na,_=a.contextType;typeof _=="object"&&_!==null&&(m=$e(_)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ch,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Vu(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?$e(_):Na,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(lh(s,a,_,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&ch.enqueueReplaceState(m,m.state,null),Fr(s,l,m,h),Hr(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(e===null){m=s.stateNode;var C=s.memoizedProps,k=ta(a,C);m.props=k;var P=m.context,K=a.contextType;_=Na,typeof K=="object"&&K!==null&&(_=$e(K));var et=a.getDerivedStateFromProps;K=typeof et=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,K||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||P!==_)&&km(s,m,l,_),oi=!1;var H=s.memoizedState;m.state=H,Fr(s,l,m,h),Hr(),P=s.memoizedState,C||H!==P||oi?(typeof et=="function"&&(lh(s,a,et,l),P=s.memoizedState),(k=oi||Rm(s,a,k,l,H,P,_))?(K||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=P),m.props=l,m.state=P,m.context=_,l=k):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Uu(e,s),_=s.memoizedProps,K=ta(a,_),m.props=K,et=s.pendingProps,H=m.context,P=a.contextType,k=Na,typeof P=="object"&&P!==null&&(k=$e(P)),C=a.getDerivedStateFromProps,(P=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==et||H!==k)&&km(s,m,l,k),oi=!1,H=s.memoizedState,m.state=H,Fr(s,l,m,h),Hr();var Z=s.memoizedState;_!==et||H!==Z||oi||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof C=="function"&&(lh(s,a,C,l),Z=s.memoizedState),(K=oi||Rm(s,a,K,l,H,Z,k)||e!==null&&e.dependencies!==null&&il(e.dependencies))?(P||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Z,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Z,k)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&H===e.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&H===e.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Z),m.props=l,m.state=Z,m.context=k,l=K):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&H===e.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&H===e.memoizedState||(s.flags|=1024),l=!1)}return m=l,Tl(e,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,e!==null&&l?(s.child=Ki(s,e.child,null,h),s.child=Ki(s,null,a,h)):Ze(e,s,a,h),s.memoizedState=m.state,e=s.child):e=Ls(e,s,h),e}function Hm(e,s,a,l){return Yi(),s.flags|=256,Ze(e,s,a,l),s.child}var dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ph(e){return{baseLanes:e,cachePool:wp()}}function mh(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=Ln),e}function Fm(e,s,a){var l=s.pendingProps,h=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(Me.current&2)!==0),_&&(h=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,e===null){if(qt){if(h?ui(s):hi(),(e=pe)?(e=Jg(e,Xn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:si!==null?{id:hs,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},a=xp(e),a.return=s,s.child=a,Qe=s,pe=null)):e=null,e===null)throw ai(s);return Wh(e)?s.lanes=32:s.lanes=536870912,null}var C=l.children;return l=l.fallback,h?(hi(),h=s.mode,C=xl({mode:"hidden",children:C},h),l=Fi(l,h,a,null),C.return=s,l.return=s,C.sibling=l,s.child=C,l=s.child,l.memoizedState=ph(a),l.childLanes=mh(e,_,a),s.memoizedState=dh,Zr(null,l)):(ui(s),gh(s,C))}var k=e.memoizedState;if(k!==null&&(C=k.dehydrated,C!==null)){if(m)s.flags&256?(ui(s),s.flags&=-257,s=yh(e,s,a)):s.memoizedState!==null?(hi(),s.child=e.child,s.flags|=128,s=null):(hi(),C=l.fallback,h=s.mode,l=xl({mode:"visible",children:l.children},h),C=Fi(C,h,a,null),C.flags|=2,l.return=s,C.return=s,l.sibling=C,s.child=l,Ki(s,e.child,null,a),l=s.child,l.memoizedState=ph(a),l.childLanes=mh(e,_,a),s.memoizedState=dh,s=Zr(null,l));else if(ui(s),Wh(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var P=_.dgst;_=P,l=Error(i(419)),l.stack="",l.digest=_,Vr({value:l,source:null,stack:null}),s=yh(e,s,a)}else if(De||za(e,s,a,!1),_=(a&e.childLanes)!==0,De||_){if(_=ae,_!==null&&(l=xr(_,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Hi(e,l),Tn(_,e,l),hh;Zh(C)||wl(),s=yh(e,s,a)}else Zh(C)?(s.flags|=192,s.child=e.child,s=null):(e=k.treeContext,pe=$n(C.nextSibling),Qe=s,qt=!0,ii=null,Xn=!1,e!==null&&Mp(s,e),s=gh(s,l.children),s.flags|=4096);return s}return h?(hi(),C=l.fallback,h=s.mode,k=e.child,P=k.sibling,l=Rs(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,P!==null?C=Rs(P,C):(C=Fi(C,h,a,null),C.flags|=2),C.return=s,l.return=s,l.sibling=C,s.child=l,Zr(null,l),l=s.child,C=e.child.memoizedState,C===null?C=ph(a):(h=C.cachePool,h!==null?(k=Oe._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=wp(),C={baseLanes:C.baseLanes|a,cachePool:h}),l.memoizedState=C,l.childLanes=mh(e,_,a),s.memoizedState=dh,Zr(e.child,l)):(ui(s),a=e.child,e=a.sibling,a=Rs(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,e!==null&&(_=s.deletions,_===null?(s.deletions=[e],s.flags|=16):_.push(e)),s.child=a,s.memoizedState=null,a)}function gh(e,s){return s=xl({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function xl(e,s){return e=On(22,e,null,s),e.lanes=0,e}function yh(e,s,a){return Ki(s,e.child,null,a),e=gh(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Ym(e,s,a){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s),Du(e.return,s,a)}function _h(e,s,a,l,h,m){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=m)}function Xm(e,s,a){var l=s.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var _=Me.current,C=(_&2)!==0;if(C?(_=_&1|2,s.flags|=128):_&=1,it(Me,_),Ze(e,s,l,a),l=qt?jr:0,!C&&e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ym(e,a,s);else if(e.tag===19)Ym(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)e=a.alternate,e!==null&&fl(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),_h(s,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(e=h.alternate,e!==null&&fl(e)===null){s.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}_h(s,!0,a,null,m,l);break;case"together":_h(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Ls(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),pi|=s.lanes,(a&s.childLanes)===0)if(e!==null){if(za(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(i(153));if(s.child!==null){for(e=s.child,a=Rs(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=Rs(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function vh(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function q1(e,s,a){switch(s.tag){case 3:lt(s,s.stateNode.containerInfo),ri(s,Oe,e.memoizedState.cache),Yi();break;case 27:case 5:Ot(s);break;case 4:lt(s,s.stateNode.containerInfo);break;case 10:ri(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Hu(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ui(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Fm(e,s,a):(ui(s),e=Ls(e,s,a),e!==null?e.sibling:null);ui(s);break;case 19:var h=(e.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(za(e,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return Xm(e,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),it(Me,Me.current),l)break;return null;case 22:return s.lanes=0,Um(e,s,a,s.pendingProps);case 24:ri(s,Oe,e.memoizedState.cache)}return Ls(e,s,a)}function Qm(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)De=!0;else{if(!vh(e,a)&&(s.flags&128)===0)return De=!1,q1(e,s,a);De=(e.flags&131072)!==0}else De=!1,qt&&(s.flags&1048576)!==0&&Ap(s,jr,s.index);switch(s.lanes=0,s.tag){case 16:t:{var l=s.pendingProps;if(e=Zi(s.elementType),s.type=e,typeof e=="function")xu(e)?(l=ta(e,l),s.tag=1,s=Gm(null,s,e,l,a)):(s.tag=0,s=fh(null,s,e,l,a));else{if(e!=null){var h=e.$$typeof;if(h===X){s.tag=11,s=Bm(null,s,e,l,a);break t}else if(h===j){s.tag=14,s=jm(null,s,e,l,a);break t}}throw s=J(e)||e,Error(i(306,s,""))}}return s;case 0:return fh(e,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=ta(l,s.pendingProps),Gm(e,s,l,h,a);case 3:t:{if(lt(s,s.stateNode.containerInfo),e===null)throw Error(i(387));l=s.pendingProps;var m=s.memoizedState;h=m.element,Uu(e,s),Fr(s,l,null,a);var _=s.memoizedState;if(l=_.cache,ri(s,Oe,l),l!==m.cache&&wu(s,[Oe],a,!0),Hr(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Hm(e,s,l,a);break t}else if(l!==h){h=Hn(Error(i(424)),s),Vr(h),s=Hm(e,s,l,a);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(pe=$n(e.firstChild),Qe=s,qt=!0,ii=null,Xn=!0,a=Up(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Yi(),l===h){s=Ls(e,s,a);break t}Ze(e,s,l,a)}s=s.child}return s;case 26:return Tl(e,s),e===null?(a=a0(s.type,null,s.pendingProps,null))?s.memoizedState=a:qt||(a=s.type,e=s.pendingProps,l=Il(D.current).createElement(a),l[Xe]=s,l[yn]=e,We(l,a,e),Ge(l),s.stateNode=l):s.memoizedState=a0(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return Ot(s),e===null&&qt&&(l=s.stateNode=n0(s.type,s.pendingProps,D.current),Qe=s,Xn=!0,h=pe,vi(s.type)?(Kh=h,pe=$n(l.firstChild)):pe=h),Ze(e,s,s.pendingProps.children,a),Tl(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&qt&&((h=l=pe)&&(l=yb(l,s.type,s.pendingProps,Xn),l!==null?(s.stateNode=l,Qe=s,pe=$n(l.firstChild),Xn=!1,h=!0):h=!1),h||ai(s)),Ot(s),h=s.type,m=s.pendingProps,_=e!==null?e.memoizedProps:null,l=m.children,Xh(h,m)?l=null:_!==null&&Xh(h,_)&&(s.flags|=32),s.memoizedState!==null&&(h=Yu(e,s,D1,null,null,a),ho._currentValue=h),Tl(e,s),Ze(e,s,l,a),s.child;case 6:return e===null&&qt&&((e=a=pe)&&(a=_b(a,s.pendingProps,Xn),a!==null?(s.stateNode=a,Qe=s,pe=null,e=!0):e=!1),e||ai(s)),null;case 13:return Fm(e,s,a);case 4:return lt(s,s.stateNode.containerInfo),l=s.pendingProps,e===null?s.child=Ki(s,null,l,a):Ze(e,s,l,a),s.child;case 11:return Bm(e,s,s.type,s.pendingProps,a);case 7:return Ze(e,s,s.pendingProps,a),s.child;case 8:return Ze(e,s,s.pendingProps.children,a),s.child;case 12:return Ze(e,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,ri(s,s.type,l.value),Ze(e,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,Qi(s),h=$e(h),l=l(h),s.flags|=1,Ze(e,s,l,a),s.child;case 14:return jm(e,s,s.type,s.pendingProps,a);case 15:return Vm(e,s,s.type,s.pendingProps,a);case 19:return Xm(e,s,a);case 31:return I1(e,s,a);case 22:return Um(e,s,a,s.pendingProps);case 24:return Qi(s),l=$e(Oe),e===null?(h=Bu(),h===null&&(h=ae,m=Lu(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:l,cache:h},Vu(s),ri(s,Oe,h)):((e.lanes&a)!==0&&(Uu(e,s),Fr(s,null,null,a),Hr()),h=e.memoizedState,m=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ri(s,Oe,l)):(l=m.cache,ri(s,Oe,l),l!==h.cache&&wu(s,[Oe],a,!0))),Ze(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function zs(e){e.flags|=4}function bh(e,s,a,l,h){if((s=(e.mode&32)!==0)&&(s=!1),s){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Sg())e.flags|=8192;else throw Wi=ll,ju}else e.flags&=-16777217}function $m(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!u0(s))if(Sg())e.flags|=8192;else throw Wi=ll,ju}function El(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?Ts():536870912,e.lanes|=s,Xa|=s)}function Wr(e,s){if(!qt)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function me(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(s)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,s}function P1(e,s,a){var l=s.pendingProps;switch(Ru(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(s),null;case 1:return me(s),null;case 3:return a=s.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ns(Oe),yt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(La(s)?zs(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ou())),me(s),null;case 26:var h=s.type,m=s.memoizedState;return e===null?(zs(s),m!==null?(me(s),$m(s,m)):(me(s),bh(s,h,null,l,a))):m?m!==e.memoizedState?(zs(s),me(s),$m(s,m)):(me(s),s.flags&=-16777217):(e=e.memoizedProps,e!==l&&zs(s),me(s),bh(s,h,e,l,a)),null;case 27:if(Gt(s),a=D.current,h=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&zs(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return me(s),null}e=ut.current,La(s)?Rp(s):(e=n0(h,l,a),s.stateNode=e,zs(s))}return me(s),null;case 5:if(Gt(s),h=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&zs(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return me(s),null}if(m=ut.current,La(s))Rp(s);else{var _=Il(D.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}m[Xe]=s,m[yn]=l;t:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break t;for(;_.sibling===null;){if(_.return===null||_.return===s)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;t:switch(We(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&zs(s)}}return me(s),bh(s,s.type,e===null?null:e.memoizedProps,s.pendingProps,a),null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==l&&zs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(e=D.current,La(s)){if(e=s.stateNode,a=s.memoizedProps,l=null,h=Qe,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Xe]=s,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Fg(e.nodeValue,a)),e||ai(s,!0)}else e=Il(e).createTextNode(l),e[Xe]=s,s.stateNode=e}return me(s),null;case 31:if(a=s.memoizedState,e===null||e.memoizedState!==null){if(l=La(s),a!==null){if(e===null){if(!l)throw Error(i(318));if(e=s.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Xe]=s}else Yi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;me(s),e=!1}else a=Ou(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return s.flags&256?(Dn(s),s):(Dn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return me(s),null;case 13:if(l=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=La(s),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Xe]=s}else Yi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;me(s),h=!1}else h=Ou(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Dn(s),s):(Dn(s),null)}return Dn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==e&&a&&(s.child.flags|=8192),El(s,s.updateQueue),me(s),null);case 4:return yt(),e===null&&Ph(s.stateNode.containerInfo),me(s),null;case 10:return Ns(s.type),me(s),null;case 19:if(F(Me),l=s.memoizedState,l===null)return me(s),null;if(h=(s.flags&128)!==0,m=l.rendering,m===null)if(h)Wr(l,!1);else{if(Ce!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(m=fl(e),m!==null){for(s.flags|=128,Wr(l,!1),e=m.updateQueue,s.updateQueue=e,El(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)Tp(a,e),a=a.sibling;return it(Me,Me.current&1|2),qt&&ks(s,l.treeForkCount),s.child}e=e.sibling}l.tail!==null&&de()>Ol&&(s.flags|=128,h=!0,Wr(l,!1),s.lanes=4194304)}else{if(!h)if(e=fl(m),e!==null){if(s.flags|=128,h=!0,e=e.updateQueue,s.updateQueue=e,El(s,e),Wr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!qt)return me(s),null}else 2*de()-l.renderingStartTime>Ol&&a!==536870912&&(s.flags|=128,h=!0,Wr(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(e=l.last,e!==null?e.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=de(),e.sibling=null,a=Me.current,it(Me,h?a&1|2:a&1),qt&&ks(s,l.treeForkCount),e):(me(s),null);case 22:case 23:return Dn(s),Gu(),l=s.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(me(s),s.subtreeFlags&6&&(s.flags|=8192)):me(s),a=s.updateQueue,a!==null&&El(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),e!==null&&F($i),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ns(Oe),me(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function G1(e,s){switch(Ru(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Ns(Oe),yt(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Gt(s),null;case 31:if(s.memoizedState!==null){if(Dn(s),s.alternate===null)throw Error(i(340));Yi()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 13:if(Dn(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Yi()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return F(Me),null;case 4:return yt(),null;case 10:return Ns(s.type),null;case 22:case 23:return Dn(s),Gu(),e!==null&&F($i),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Ns(Oe),null;case 25:return null;default:return null}}function Zm(e,s){switch(Ru(s),s.tag){case 3:Ns(Oe),yt();break;case 26:case 27:case 5:Gt(s);break;case 4:yt();break;case 31:s.memoizedState!==null&&Dn(s);break;case 13:Dn(s);break;case 19:F(Me);break;case 10:Ns(s.type);break;case 22:case 23:Dn(s),Gu(),e!==null&&F($i);break;case 24:Ns(Oe)}}function Kr(e,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==h)}}catch(C){Jt(s,s.return,C)}}function fi(e,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&e)===e){var _=l.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,h=s;var k=a,P=C;try{P()}catch(K){Jt(h,k,K)}}}l=l.next}while(l!==m)}}catch(K){Jt(s,s.return,K)}}function Wm(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{qp(s,a)}catch(l){Jt(e,e.return,l)}}}function Km(e,s,a){a.props=ta(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Jt(e,s,l)}}function Jr(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){Jt(e,s,h)}}function ds(e,s){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Jt(e,s,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Jt(e,s,h)}else a.current=null}function Jm(e){var s=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Jt(e,e.return,h)}}function Sh(e,s,a){try{var l=e.stateNode;hb(l,e.type,a,s),l[yn]=s}catch(h){Jt(e,e.return,h)}}function tg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vi(e.type)||e.tag===4}function Ch(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||tg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Th(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=As));else if(l!==4&&(l===27&&vi(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(Th(e,s,a),e=e.sibling;e!==null;)Th(e,s,a),e=e.sibling}function Al(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(l!==4&&(l===27&&vi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Al(e,s,a),e=e.sibling;e!==null;)Al(e,s,a),e=e.sibling}function eg(e){var s=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);We(s,l,a),s[Xe]=e,s[yn]=a}catch(m){Jt(e,e.return,m)}}var Bs=!1,we=!1,xh=!1,ng=typeof WeakSet=="function"?WeakSet:Set,He=null;function H1(e,s){if(e=e.containerInfo,Fh=Xl,e=pp(e),yu(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var _=0,C=-1,k=-1,P=0,K=0,et=e,H=null;e:for(;;){for(var Z;et!==a||h!==0&&et.nodeType!==3||(C=_+h),et!==m||l!==0&&et.nodeType!==3||(k=_+l),et.nodeType===3&&(_+=et.nodeValue.length),(Z=et.firstChild)!==null;)H=et,et=Z;for(;;){if(et===e)break e;if(H===a&&++P===h&&(C=_),H===m&&++K===l&&(k=_),(Z=et.nextSibling)!==null)break;et=H,H=et.parentNode}et=Z}a=C===-1||k===-1?null:{start:C,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yh={focusedElem:e,selectionRange:a},Xl=!1,He=s;He!==null;)if(s=He,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,He=e;else for(;He!==null;){switch(s=He,m=s.alternate,e=s.flags,s.tag){case 0:if((e&4)!==0&&(e=s.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ft=ta(a.type,h);e=l.getSnapshotBeforeUpdate(ft,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(bt){Jt(a,a.return,bt)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)$h(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$h(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=s.sibling,e!==null){e.return=s.return,He=e;break}He=s.return}}function sg(e,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Vs(e,a),l&4&&Kr(5,a);break;case 1:if(Vs(e,a),l&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(_){Jt(a,a.return,_)}else{var h=ta(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(h,s,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Jt(a,a.return,_)}}l&64&&Wm(a),l&512&&Jr(a,a.return);break;case 3:if(Vs(e,a),l&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{qp(e,s)}catch(_){Jt(a,a.return,_)}}break;case 27:s===null&&l&4&&eg(a);case 26:case 5:Vs(e,a),s===null&&l&4&&Jm(a),l&512&&Jr(a,a.return);break;case 12:Vs(e,a);break;case 31:Vs(e,a),l&4&&rg(e,a);break;case 13:Vs(e,a),l&4&&og(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=J1.bind(null,a),vb(e,a))));break;case 22:if(l=a.memoizedState!==null||Bs,!l){s=s!==null&&s.memoizedState!==null||we,h=Bs;var m=we;Bs=l,(we=s)&&!m?Us(e,a,(a.subtreeFlags&8772)!==0):Vs(e,a),Bs=h,we=m}break;case 30:break;default:Vs(e,a)}}function ig(e){var s=e.alternate;s!==null&&(e.alternate=null,ig(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&tu(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ye=null,vn=!1;function js(e,s,a){for(a=a.child;a!==null;)ag(e,s,a),a=a.sibling}function ag(e,s,a){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:we||ds(a,s),js(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:we||ds(a,s);var l=ye,h=vn;vi(a.type)&&(ye=a.stateNode,vn=!1),js(e,s,a),lo(a.stateNode),ye=l,vn=h;break;case 5:we||ds(a,s);case 6:if(l=ye,h=vn,ye=null,js(e,s,a),ye=l,vn=h,ye!==null)if(vn)try{(ye.nodeType===9?ye.body:ye.nodeName==="HTML"?ye.ownerDocument.body:ye).removeChild(a.stateNode)}catch(m){Jt(a,s,m)}else try{ye.removeChild(a.stateNode)}catch(m){Jt(a,s,m)}break;case 18:ye!==null&&(vn?(e=ye,Wg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),er(e)):Wg(ye,a.stateNode));break;case 4:l=ye,h=vn,ye=a.stateNode.containerInfo,vn=!0,js(e,s,a),ye=l,vn=h;break;case 0:case 11:case 14:case 15:fi(2,a,s),we||fi(4,a,s),js(e,s,a);break;case 1:we||(ds(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Km(a,s,l)),js(e,s,a);break;case 21:js(e,s,a);break;case 22:we=(l=we)||a.memoizedState!==null,js(e,s,a),we=l;break;default:js(e,s,a)}}function rg(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{er(e)}catch(a){Jt(s,s.return,a)}}}function og(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{er(e)}catch(a){Jt(s,s.return,a)}}function F1(e){switch(e.tag){case 31:case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new ng),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new ng),s;default:throw Error(i(435,e.tag))}}function Ml(e,s){var a=F1(e);s.forEach(function(l){if(!a.has(l)){a.add(l);var h=tb.bind(null,e,l);l.then(h,h)}})}function bn(e,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=e,_=s,C=_;t:for(;C!==null;){switch(C.tag){case 27:if(vi(C.type)){ye=C.stateNode,vn=!1;break t}break;case 5:ye=C.stateNode,vn=!1;break t;case 3:case 4:ye=C.stateNode.containerInfo,vn=!0;break t}C=C.return}if(ye===null)throw Error(i(160));ag(m,_,h),ye=null,vn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)lg(s,e),s=s.sibling}var Jn=null;function lg(e,s){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:bn(s,e),Sn(e),l&4&&(fi(3,e,e.return),Kr(3,e),fi(5,e,e.return));break;case 1:bn(s,e),Sn(e),l&512&&(we||a===null||ds(a,a.return)),l&64&&Bs&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Jn;if(bn(s,e),Sn(e),l&512&&(we||a===null||ds(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Ar]||m[Xe]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),We(m,l,a),m[Xe]=e,Ge(m),l=m;break t;case"link":var _=l0("link","href",h).get(l+(a.href||""));if(_){for(var C=0;C<_.length;C++)if(m=_[C],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(C,1);break e}}m=h.createElement(l),We(m,l,a),h.head.appendChild(m);break;case"meta":if(_=l0("meta","content",h).get(l+(a.content||""))){for(C=0;C<_.length;C++)if(m=_[C],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(C,1);break e}}m=h.createElement(l),We(m,l,a),h.head.appendChild(m);break;default:throw Error(i(468,l))}m[Xe]=e,Ge(m),l=m}e.stateNode=l}else c0(h,e.type,e.stateNode);else e.stateNode=o0(h,l,e.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?c0(h,e.type,e.stateNode):o0(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Sh(e,e.memoizedProps,a.memoizedProps)}break;case 27:bn(s,e),Sn(e),l&512&&(we||a===null||ds(a,a.return)),a!==null&&l&4&&Sh(e,e.memoizedProps,a.memoizedProps);break;case 5:if(bn(s,e),Sn(e),l&512&&(we||a===null||ds(a,a.return)),e.flags&32){h=e.stateNode;try{xa(h,"")}catch(ft){Jt(e,e.return,ft)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,Sh(e,h,a!==null?a.memoizedProps:h)),l&1024&&(xh=!0);break;case 6:if(bn(s,e),Sn(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(ft){Jt(e,e.return,ft)}}break;case 3:if(Gl=null,h=Jn,Jn=ql(s.containerInfo),bn(s,e),Jn=h,Sn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{er(s.containerInfo)}catch(ft){Jt(e,e.return,ft)}xh&&(xh=!1,cg(e));break;case 4:l=Jn,Jn=ql(e.stateNode.containerInfo),bn(s,e),Sn(e),Jn=l;break;case 12:bn(s,e),Sn(e);break;case 31:bn(s,e),Sn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ml(e,l)));break;case 13:bn(s,e),Sn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kl=de()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ml(e,l)));break;case 22:h=e.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,P=Bs,K=we;if(Bs=P||h,we=K||k,bn(s,e),we=K,Bs=P,Sn(e),l&8192)t:for(s=e.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||k||Bs||we||ea(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){k=a=s;try{if(m=k.stateNode,h)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=k.stateNode;var et=k.memoizedProps.style,H=et!=null&&et.hasOwnProperty("display")?et.display:null;C.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(ft){Jt(k,k.return,ft)}}}else if(s.tag===6){if(a===null){k=s;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(ft){Jt(k,k.return,ft)}}}else if(s.tag===18){if(a===null){k=s;try{var Z=k.stateNode;h?Kg(Z,!0):Kg(k.stateNode,!1)}catch(ft){Jt(k,k.return,ft)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ml(e,a))));break;case 19:bn(s,e),Sn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ml(e,l)));break;case 30:break;case 21:break;default:bn(s,e),Sn(e)}}function Sn(e){var s=e.flags;if(s&2){try{for(var a,l=e.return;l!==null;){if(tg(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=Ch(e);Al(e,m,h);break;case 5:var _=a.stateNode;a.flags&32&&(xa(_,""),a.flags&=-33);var C=Ch(e);Al(e,C,_);break;case 3:case 4:var k=a.stateNode.containerInfo,P=Ch(e);Th(e,P,k);break;default:throw Error(i(161))}}catch(K){Jt(e,e.return,K)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function cg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;cg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Vs(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)sg(e,s.alternate,s),s=s.sibling}function ea(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:fi(4,s,s.return),ea(s);break;case 1:ds(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Km(s,s.return,a),ea(s);break;case 27:lo(s.stateNode);case 26:case 5:ds(s,s.return),ea(s);break;case 22:s.memoizedState===null&&ea(s);break;case 30:ea(s);break;default:ea(s)}e=e.sibling}}function Us(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=e,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:Us(h,m,a),Kr(4,m);break;case 1:if(Us(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(P){Jt(l,l.return,P)}if(l=m,h=l.updateQueue,h!==null){var C=l.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)Ip(k[h],C)}catch(P){Jt(l,l.return,P)}}a&&_&64&&Wm(m),Jr(m,m.return);break;case 27:eg(m);case 26:case 5:Us(h,m,a),a&&l===null&&_&4&&Jm(m),Jr(m,m.return);break;case 12:Us(h,m,a);break;case 31:Us(h,m,a),a&&_&4&&rg(h,m);break;case 13:Us(h,m,a),a&&_&4&&og(h,m);break;case 22:m.memoizedState===null&&Us(h,m,a),Jr(m,m.return);break;case 30:break;default:Us(h,m,a)}s=s.sibling}}function Eh(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ur(a))}function Ah(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Ur(e))}function ts(e,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ug(e,s,a,l),s=s.sibling}function ug(e,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:ts(e,s,a,l),h&2048&&Kr(9,s);break;case 1:ts(e,s,a,l);break;case 3:ts(e,s,a,l),h&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Ur(e)));break;case 12:if(h&2048){ts(e,s,a,l),e=s.stateNode;try{var m=s.memoizedProps,_=m.id,C=m.onPostCommit;typeof C=="function"&&C(_,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){Jt(s,s.return,k)}}else ts(e,s,a,l);break;case 31:ts(e,s,a,l);break;case 13:ts(e,s,a,l);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?ts(e,s,a,l):to(e,s):m._visibility&2?ts(e,s,a,l):(m._visibility|=2,Ha(e,s,a,l,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Eh(_,s);break;case 24:ts(e,s,a,l),h&2048&&Ah(s.alternate,s);break;default:ts(e,s,a,l)}}function Ha(e,s,a,l,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=e,_=s,C=a,k=l,P=_.flags;switch(_.tag){case 0:case 11:case 15:Ha(m,_,C,k,h),Kr(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?Ha(m,_,C,k,h):to(m,_):(K._visibility|=2,Ha(m,_,C,k,h)),h&&P&2048&&Eh(_.alternate,_);break;case 24:Ha(m,_,C,k,h),h&&P&2048&&Ah(_.alternate,_);break;default:Ha(m,_,C,k,h)}s=s.sibling}}function to(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,l=s,h=l.flags;switch(l.tag){case 22:to(a,l),h&2048&&Eh(l.alternate,l);break;case 24:to(a,l),h&2048&&Ah(l.alternate,l);break;default:to(a,l)}s=s.sibling}}var eo=8192;function Fa(e,s,a){if(e.subtreeFlags&eo)for(e=e.child;e!==null;)hg(e,s,a),e=e.sibling}function hg(e,s,a){switch(e.tag){case 26:Fa(e,s,a),e.flags&eo&&e.memoizedState!==null&&Nb(a,Jn,e.memoizedState,e.memoizedProps);break;case 5:Fa(e,s,a);break;case 3:case 4:var l=Jn;Jn=ql(e.stateNode.containerInfo),Fa(e,s,a),Jn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=eo,eo=16777216,Fa(e,s,a),eo=l):Fa(e,s,a));break;default:Fa(e,s,a)}}function fg(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function no(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];He=l,pg(l,e)}fg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)dg(e),e=e.sibling}function dg(e){switch(e.tag){case 0:case 11:case 15:no(e),e.flags&2048&&fi(9,e,e.return);break;case 3:no(e);break;case 12:no(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Rl(e)):no(e);break;default:no(e)}}function Rl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];He=l,pg(l,e)}fg(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:fi(8,s,s.return),Rl(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Rl(s));break;default:Rl(s)}e=e.sibling}}function pg(e,s){for(;He!==null;){var a=He;switch(a.tag){case 0:case 11:case 15:fi(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ur(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,He=l;else t:for(a=e;He!==null;){l=He;var h=l.sibling,m=l.return;if(ig(l),l===a){He=null;break t}if(h!==null){h.return=m,He=h;break t}He=m}}}var Y1={getCacheForType:function(e){var s=$e(Oe),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a},cacheSignal:function(){return $e(Oe).controller.signal}},X1=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ae=null,Bt=null,Ut=0,Kt=0,wn=null,di=!1,Ya=!1,Mh=!1,Is=0,Ce=0,pi=0,na=0,Rh=0,Ln=0,Xa=0,so=null,Cn=null,kh=!1,kl=0,mg=0,Ol=1/0,Nl=null,mi=null,Ue=0,gi=null,Qa=null,qs=0,Oh=0,Nh=null,gg=null,io=0,Dh=null;function zn(){return(Xt&2)!==0&&Ut!==0?Ut&-Ut:M.T!==null?Vh():Dd()}function yg(){if(Ln===0)if((Ut&536870912)===0||qt){var e=Ae;Ae<<=1,(Ae&3932160)===0&&(Ae=262144),Ln=e}else Ln=536870912;return e=Nn.current,e!==null&&(e.flags|=32),Ln}function Tn(e,s,a){(e===ae&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)&&($a(e,0),yi(e,Ut,Ln,!1)),xs(e,a),((Xt&2)===0||e!==ae)&&(e===ae&&((Xt&2)===0&&(na|=a),Ce===4&&yi(e,Ut,Ln,!1)),ps(e))}function _g(e,s,a){if((Xt&6)!==0)throw Error(i(327));var l=!a&&(s&127)===0&&(s&e.expiredLanes)===0||ce(e,s),h=l?Z1(e,s):Lh(e,s,!0),m=l;do{if(h===0){Ya&&!l&&yi(e,s,0,!1);break}else{if(a=e.current.alternate,m&&!Q1(a)){h=Lh(e,s,!1),m=!1;continue}if(h===2){if(m=s,e.errorRecoveryDisabledLanes&m)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;t:{var C=e;h=so;var k=C.current.memoizedState.isDehydrated;if(k&&($a(C,_).flags|=256),_=Lh(C,_,!1),_!==2){if(Mh&&!k){C.errorRecoveryDisabledLanes|=m,na|=m,h=4;break t}m=Cn,Cn=h,m!==null&&(Cn===null?Cn=m:Cn.push.apply(Cn,m))}h=_}if(m=!1,h!==2)continue}}if(h===1){$a(e,0),yi(e,s,0,!0);break}t:{switch(l=e,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:yi(l,s,Ln,!di);break t;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=kl+300-de(),10<h)){if(yi(l,s,Ln,!di),In(l,0,!0)!==0)break t;qs=s,l.timeoutHandle=$g(vg.bind(null,l,a,Cn,Nl,kh,s,Ln,na,Xa,di,m,"Throttled",-0,0),h);break t}vg(l,a,Cn,Nl,kh,s,Ln,na,Xa,di,m,null,-0,0)}}break}while(!0);ps(e)}function vg(e,s,a,l,h,m,_,C,k,P,K,et,H,Z){if(e.timeoutHandle=-1,et=s.subtreeFlags,et&8192||(et&16785408)===16785408){et={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:As},hg(s,m,et);var ft=(m&62914560)===m?kl-de():(m&4194048)===m?mg-de():0;if(ft=Db(et,ft),ft!==null){qs=m,e.cancelPendingCommit=ft(Mg.bind(null,e,s,m,a,l,h,_,C,k,K,et,null,H,Z)),yi(e,m,_,!P);return}}Mg(e,s,m,a,l,h,_,C,k)}function Q1(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!kn(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(e,s,a,l){s&=~Rh,s&=~na,e.suspendedLanes|=s,e.pingedLanes&=~s,l&&(e.warmLanes|=s),l=e.expirationTimes;for(var h=s;0<h;){var m=31-Qt(h),_=1<<m;l[m]=-1,h&=~_}a!==0&&ti(e,a,s)}function Dl(){return(Xt&6)===0?(ao(0),!1):!0}function wh(){if(Bt!==null){if(Kt===0)var e=Bt.return;else e=Bt,Os=Xi=null,$u(e),Ua=null,qr=0,e=Bt;for(;e!==null;)Zm(e.alternate,e),e=e.return;Bt=null}}function $a(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,pb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),qs=0,wh(),ae=e,Bt=a=Rs(e.current,null),Ut=s,Kt=0,wn=null,di=!1,Ya=ce(e,s),Mh=!1,Xa=Ln=Rh=na=pi=Ce=0,Cn=so=null,kh=!1,(s&8)!==0&&(s|=s&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=s;0<l;){var h=31-Qt(l),m=1<<h;s|=e[h],l&=~m}return Is=s,Jo(),a}function bg(e,s){Mt=null,M.H=$r,s===Va||s===ol?(s=Bp(),Kt=3):s===ju?(s=Bp(),Kt=4):Kt=s===hh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,wn=s,Bt===null&&(Ce=1,Sl(e,Hn(s,e.current)))}function Sg(){var e=Nn.current;return e===null?!0:(Ut&4194048)===Ut?Qn===null:(Ut&62914560)===Ut||(Ut&536870912)!==0?e===Qn:!1}function Cg(){var e=M.H;return M.H=$r,e===null?$r:e}function Tg(){var e=M.A;return M.A=Y1,e}function wl(){Ce=4,di||(Ut&4194048)!==Ut&&Nn.current!==null||(Ya=!0),(pi&134217727)===0&&(na&134217727)===0||ae===null||yi(ae,Ut,Ln,!1)}function Lh(e,s,a){var l=Xt;Xt|=2;var h=Cg(),m=Tg();(ae!==e||Ut!==s)&&(Nl=null,$a(e,s)),s=!1;var _=Ce;t:do try{if(Kt!==0&&Bt!==null){var C=Bt,k=wn;switch(Kt){case 8:wh(),_=6;break t;case 3:case 2:case 9:case 6:Nn.current===null&&(s=!0);var P=Kt;if(Kt=0,wn=null,Za(e,C,k,P),a&&Ya){_=0;break t}break;default:P=Kt,Kt=0,wn=null,Za(e,C,k,P)}}$1(),_=Ce;break}catch(K){bg(e,K)}while(!0);return s&&e.shellSuspendCounter++,Os=Xi=null,Xt=l,M.H=h,M.A=m,Bt===null&&(ae=null,Ut=0,Jo()),_}function $1(){for(;Bt!==null;)xg(Bt)}function Z1(e,s){var a=Xt;Xt|=2;var l=Cg(),h=Tg();ae!==e||Ut!==s?(Nl=null,Ol=de()+500,$a(e,s)):Ya=ce(e,s);t:do try{if(Kt!==0&&Bt!==null){s=Bt;var m=wn;e:switch(Kt){case 1:Kt=0,wn=null,Za(e,s,m,1);break;case 2:case 9:if(Lp(m)){Kt=0,wn=null,Eg(s);break}s=function(){Kt!==2&&Kt!==9||ae!==e||(Kt=7),ps(e)},m.then(s,s);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:Lp(m)?(Kt=0,wn=null,Eg(s)):(Kt=0,wn=null,Za(e,s,m,7));break;case 5:var _=null;switch(Bt.tag){case 26:_=Bt.memoizedState;case 5:case 27:var C=Bt;if(_?u0(_):C.stateNode.complete){Kt=0,wn=null;var k=C.sibling;if(k!==null)Bt=k;else{var P=C.return;P!==null?(Bt=P,Ll(P)):Bt=null}break e}}Kt=0,wn=null,Za(e,s,m,5);break;case 6:Kt=0,wn=null,Za(e,s,m,6);break;case 8:wh(),Ce=6;break t;default:throw Error(i(462))}}W1();break}catch(K){bg(e,K)}while(!0);return Os=Xi=null,M.H=l,M.A=h,Xt=a,Bt!==null?0:(ae=null,Ut=0,Jo(),Ce)}function W1(){for(;Bt!==null&&!Nt();)xg(Bt)}function xg(e){var s=Qm(e.alternate,e,Is);e.memoizedProps=e.pendingProps,s===null?Ll(e):Bt=s}function Eg(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=Pm(a,s,s.pendingProps,s.type,void 0,Ut);break;case 11:s=Pm(a,s,s.pendingProps,s.type.render,s.ref,Ut);break;case 5:$u(s);default:Zm(a,s),s=Bt=Tp(s,Is),s=Qm(a,s,Is)}e.memoizedProps=e.pendingProps,s===null?Ll(e):Bt=s}function Za(e,s,a,l){Os=Xi=null,$u(s),Ua=null,qr=0;var h=s.return;try{if(U1(e,h,s,a,Ut)){Ce=1,Sl(e,Hn(a,e.current)),Bt=null;return}}catch(m){if(h!==null)throw Bt=h,m;Ce=1,Sl(e,Hn(a,e.current)),Bt=null;return}s.flags&32768?(qt||l===1?e=!0:Ya||(Ut&536870912)!==0?e=!1:(di=e=!0,(l===2||l===9||l===3||l===6)&&(l=Nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ag(s,e)):Ll(s)}function Ll(e){var s=e;do{if((s.flags&32768)!==0){Ag(s,di);return}e=s.return;var a=P1(s.alternate,s,Is);if(a!==null){Bt=a;return}if(s=s.sibling,s!==null){Bt=s;return}Bt=s=e}while(s!==null);Ce===0&&(Ce=5)}function Ag(e,s){do{var a=G1(e.alternate,e);if(a!==null){a.flags&=32767,Bt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){Bt=e;return}Bt=e=a}while(e!==null);Ce=6,Bt=null}function Mg(e,s,a,l,h,m,_,C,k){e.cancelPendingCommit=null;do zl();while(Ue!==0);if((Xt&6)!==0)throw Error(i(327));if(s!==null){if(s===e.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Cu,ga(e,a,m,_,C,k),e===ae&&(Bt=ae=null,Ut=0),Qa=s,gi=e,qs=a,Oh=m,Nh=h,gg=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,eb(en,function(){return Dg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,h=A.p,A.p=2,_=Xt,Xt|=4;try{H1(e,s,a)}finally{Xt=_,A.p=h,M.T=l}}Ue=1,Rg(),kg(),Og()}}function Rg(){if(Ue===1){Ue=0;var e=gi,s=Qa,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var l=A.p;A.p=2;var h=Xt;Xt|=4;try{lg(s,e);var m=Yh,_=pp(e.containerInfo),C=m.focusedElem,k=m.selectionRange;if(_!==C&&C&&C.ownerDocument&&dp(C.ownerDocument.documentElement,C)){if(k!==null&&yu(C)){var P=k.start,K=k.end;if(K===void 0&&(K=P),"selectionStart"in C)C.selectionStart=P,C.selectionEnd=Math.min(K,C.value.length);else{var et=C.ownerDocument||document,H=et&&et.defaultView||window;if(H.getSelection){var Z=H.getSelection(),ft=C.textContent.length,bt=Math.min(k.start,ft),ne=k.end===void 0?bt:Math.min(k.end,ft);!Z.extend&&bt>ne&&(_=ne,ne=bt,bt=_);var V=fp(C,bt),L=fp(C,ne);if(V&&L&&(Z.rangeCount!==1||Z.anchorNode!==V.node||Z.anchorOffset!==V.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var q=et.createRange();q.setStart(V.node,V.offset),Z.removeAllRanges(),bt>ne?(Z.addRange(q),Z.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),Z.addRange(q))}}}}for(et=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&et.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<et.length;C++){var tt=et[C];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}Xl=!!Fh,Yh=Fh=null}finally{Xt=h,A.p=l,M.T=a}}e.current=s,Ue=2}}function kg(){if(Ue===2){Ue=0;var e=gi,s=Qa,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var l=A.p;A.p=2;var h=Xt;Xt|=4;try{sg(e,s.alternate,s)}finally{Xt=h,A.p=l,M.T=a}}Ue=3}}function Og(){if(Ue===4||Ue===3){Ue=0,Dt();var e=gi,s=Qa,a=qs,l=gg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ue=5:(Ue=0,Qa=gi=null,Ng(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(mi=null),ya(a),s=s.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(mt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=M.T,h=A.p,A.p=2,M.T=null;try{for(var m=e.onRecoverableError,_=0;_<l.length;_++){var C=l[_];m(C.value,{componentStack:C.stack})}}finally{M.T=s,A.p=h}}(qs&3)!==0&&zl(),ps(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===Dh?io++:(io=0,Dh=e):io=0,ao(0)}}function Ng(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Ur(s)))}function zl(){return Rg(),kg(),Og(),Dg()}function Dg(){if(Ue!==5)return!1;var e=gi,s=Oh;Oh=0;var a=ya(qs),l=M.T,h=A.p;try{A.p=32>a?32:a,M.T=null,a=Nh,Nh=null;var m=gi,_=qs;if(Ue=0,Qa=gi=null,qs=0,(Xt&6)!==0)throw Error(i(331));var C=Xt;if(Xt|=4,dg(m.current),ug(m,m.current,_,a),Xt=C,ao(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(mt,m)}catch{}return!0}finally{A.p=h,M.T=l,Ng(e,s)}}function wg(e,s,a){s=Hn(a,s),s=uh(e.stateNode,s,2),e=ci(e,s,2),e!==null&&(xs(e,2),ps(e))}function Jt(e,s,a){if(e.tag===3)wg(e,e,a);else for(;s!==null;){if(s.tag===3){wg(s,e,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(mi===null||!mi.has(l))){e=Hn(a,e),a=Lm(2),l=ci(s,a,2),l!==null&&(zm(a,l,s,e),xs(l,2),ps(l));break}}s=s.return}}function zh(e,s,a){var l=e.pingCache;if(l===null){l=e.pingCache=new X1;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Mh=!0,h.add(a),e=K1.bind(null,e,s,a),s.then(e,e))}function K1(e,s,a){var l=e.pingCache;l!==null&&l.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ae===e&&(Ut&a)===a&&(Ce===4||Ce===3&&(Ut&62914560)===Ut&&300>de()-kl?(Xt&2)===0&&$a(e,0):Rh|=a,Xa===Ut&&(Xa=0)),ps(e)}function Lg(e,s){s===0&&(s=Ts()),e=Hi(e,s),e!==null&&(xs(e,s),ps(e))}function J1(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),Lg(e,a)}function tb(e,s){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),Lg(e,a)}function eb(e,s){return kt(e,s)}var Bl=null,Wa=null,Bh=!1,jl=!1,jh=!1,_i=0;function ps(e){e!==Wa&&e.next===null&&(Wa===null?Bl=Wa=e:Wa=Wa.next=e),jl=!0,Bh||(Bh=!0,sb())}function ao(e,s){if(!jh&&jl){jh=!0;do for(var a=!1,l=Bl;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var _=l.suspendedLanes,C=l.pingedLanes;m=(1<<31-Qt(42|e)+1)-1,m&=h&~(_&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Vg(l,m))}else m=Ut,m=In(l,l===ae?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ce(l,m)||(a=!0,Vg(l,m));l=l.next}while(a);jh=!1}}function nb(){zg()}function zg(){jl=Bh=!1;var e=0;_i!==0&&db()&&(e=_i);for(var s=de(),a=null,l=Bl;l!==null;){var h=l.next,m=Bg(l,s);m===0?(l.next=null,a===null?Bl=h:a.next=h,h===null&&(Wa=a)):(a=l,(e!==0||(m&3)!==0)&&(jl=!0)),l=h}Ue!==0&&Ue!==5||ao(e),_i!==0&&(_i=0)}function Bg(e,s){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var _=31-Qt(m),C=1<<_,k=h[_];k===-1?((C&a)===0||(C&l)!==0)&&(h[_]=Cs(C,s)):k<=s&&(e.expiredLanes|=C),m&=~C}if(s=ae,a=Ut,a=In(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===s&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ie(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ce(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(l!==null&&ie(l),ya(a)){case 2:case 8:a=Ss;break;case 32:a=en;break;case 268435456:a=mn;break;default:a=en}return l=jg.bind(null,e),a=kt(a,l),e.callbackPriority=s,e.callbackNode=a,s}return l!==null&&l!==null&&ie(l),e.callbackPriority=2,e.callbackNode=null,2}function jg(e,s){if(Ue!==0&&Ue!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(zl()&&e.callbackNode!==a)return null;var l=Ut;return l=In(e,e===ae?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(_g(e,l,s),Bg(e,de()),e.callbackNode!=null&&e.callbackNode===a?jg.bind(null,e):null)}function Vg(e,s){if(zl())return null;_g(e,s,!0)}function sb(){mb(function(){(Xt&6)!==0?kt(Ee,nb):zg()})}function Vh(){if(_i===0){var e=Ba;e===0&&(e=Zt,Zt<<=1,(Zt&261888)===0&&(Zt=256)),_i=e}return _i}function Ug(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fo(""+e)}function Ig(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function ib(e,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var m=Ug((h[yn]||null).action),_=l.submitter;_&&(s=(s=_[yn]||null)?Ug(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var C=new $o("action","action",null,l,h);e.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(_i!==0){var k=_?Ig(h,_):new FormData(h);ih(a,{pending:!0,data:k,method:h.method,action:m},null,k)}}else typeof m=="function"&&(C.preventDefault(),k=_?Ig(h,_):new FormData(h),ih(a,{pending:!0,data:k,method:h.method,action:m},m,k))},currentTarget:h}]})}}for(var Uh=0;Uh<Su.length;Uh++){var Ih=Su[Uh],ab=Ih.toLowerCase(),rb=Ih[0].toUpperCase()+Ih.slice(1);Kn(ab,"on"+rb)}Kn(yp,"onAnimationEnd"),Kn(_p,"onAnimationIteration"),Kn(vp,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(C1,"onTransitionRun"),Kn(T1,"onTransitionStart"),Kn(x1,"onTransitionCancel"),Kn(bp,"onTransitionEnd"),Ca("onMouseEnter",["mouseout","mouseover"]),Ca("onMouseLeave",["mouseout","mouseover"]),Ca("onPointerEnter",["pointerout","pointerover"]),Ca("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ob=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ro));function qg(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var m=void 0;if(s)for(var _=l.length-1;0<=_;_--){var C=l[_],k=C.instance,P=C.currentTarget;if(C=C.listener,k!==m&&h.isPropagationStopped())break t;m=C,h.currentTarget=P;try{m(h)}catch(K){Ko(K)}h.currentTarget=null,m=k}else for(_=0;_<l.length;_++){if(C=l[_],k=C.instance,P=C.currentTarget,C=C.listener,k!==m&&h.isPropagationStopped())break t;m=C,h.currentTarget=P;try{m(h)}catch(K){Ko(K)}h.currentTarget=null,m=k}}}}function jt(e,s){var a=s[Jc];a===void 0&&(a=s[Jc]=new Set);var l=e+"__bubble";a.has(l)||(Pg(s,e,2,!1),a.add(l))}function qh(e,s,a){var l=0;s&&(l|=4),Pg(a,e,l,s)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function Ph(e){if(!e[Vl]){e[Vl]=!0,zd.forEach(function(a){a!=="selectionchange"&&(ob.has(a)||qh(a,!1,e),qh(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Vl]||(s[Vl]=!0,qh("selectionchange",!1,s))}}function Pg(e,s,a,l){switch(y0(s)){case 2:var h=zb;break;case 8:h=Bb;break;default:h=sf}a=h.bind(null,s,a,e),h=void 0,!lu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(s,a,{capture:!0,passive:h}):e.addEventListener(s,a,!0):h!==void 0?e.addEventListener(s,a,{passive:h}):e.addEventListener(s,a,!1)}function Gh(e,s,a,l,h){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var C=l.stateNode.containerInfo;if(C===h)break;if(_===4)for(_=l.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;C!==null;){if(_=va(C),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){l=m=_;continue t}C=C.parentNode}}l=l.return}Xd(function(){var P=m,K=ru(a),et=[];t:{var H=Sp.get(e);if(H!==void 0){var Z=$o,ft=e;switch(e){case"keypress":if(Xo(a)===0)break t;case"keydown":case"keyup":Z=t1;break;case"focusin":ft="focus",Z=fu;break;case"focusout":ft="blur",Z=fu;break;case"beforeblur":case"afterblur":Z=fu;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Pv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=s1;break;case yp:case _p:case vp:Z=Fv;break;case bp:Z=a1;break;case"scroll":case"scrollend":Z=Iv;break;case"wheel":Z=o1;break;case"copy":case"cut":case"paste":Z=Xv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Kd;break;case"toggle":case"beforetoggle":Z=c1}var bt=(s&4)!==0,ne=!bt&&(e==="scroll"||e==="scrollend"),V=bt?H!==null?H+"Capture":null:H;bt=[];for(var L=P,q;L!==null;){var tt=L;if(q=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||q===null||V===null||(tt=Rr(L,V),tt!=null&&bt.push(oo(L,tt,q))),ne)break;L=L.return}0<bt.length&&(H=new Z(H,ft,null,a,K),et.push({event:H,listeners:bt}))}}if((s&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",H&&a!==au&&(ft=a.relatedTarget||a.fromElement)&&(va(ft)||ft[_a]))break t;if((Z||H)&&(H=K.window===K?K:(H=K.ownerDocument)?H.defaultView||H.parentWindow:window,Z?(ft=a.relatedTarget||a.toElement,Z=P,ft=ft?va(ft):null,ft!==null&&(ne=c(ft),bt=ft.tag,ft!==ne||bt!==5&&bt!==27&&bt!==6)&&(ft=null)):(Z=null,ft=P),Z!==ft)){if(bt=Zd,tt="onMouseLeave",V="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(bt=Kd,tt="onPointerLeave",V="onPointerEnter",L="pointer"),ne=Z==null?H:Mr(Z),q=ft==null?H:Mr(ft),H=new bt(tt,L+"leave",Z,a,K),H.target=ne,H.relatedTarget=q,tt=null,va(K)===P&&(bt=new bt(V,L+"enter",ft,a,K),bt.target=q,bt.relatedTarget=ne,tt=bt),ne=tt,Z&&ft)e:{for(bt=lb,V=Z,L=ft,q=0,tt=V;tt;tt=bt(tt))q++;tt=0;for(var _t=L;_t;_t=bt(_t))tt++;for(;0<q-tt;)V=bt(V),q--;for(;0<tt-q;)L=bt(L),tt--;for(;q--;){if(V===L||L!==null&&V===L.alternate){bt=V;break e}V=bt(V),L=bt(L)}bt=null}else bt=null;Z!==null&&Gg(et,H,Z,bt,!1),ft!==null&&ne!==null&&Gg(et,ne,ft,bt,!0)}}t:{if(H=P?Mr(P):window,Z=H.nodeName&&H.nodeName.toLowerCase(),Z==="select"||Z==="input"&&H.type==="file")var Ht=rp;else if(ip(H))if(op)Ht=v1;else{Ht=y1;var gt=g1}else Z=H.nodeName,!Z||Z.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?P&&iu(P.elementType)&&(Ht=rp):Ht=_1;if(Ht&&(Ht=Ht(e,P))){ap(et,Ht,a,K);break t}gt&&gt(e,H,P),e==="focusout"&&P&&H.type==="number"&&P.memoizedProps.value!=null&&su(H,"number",H.value)}switch(gt=P?Mr(P):window,e){case"focusin":(ip(gt)||gt.contentEditable==="true")&&(Ra=gt,_u=P,Br=null);break;case"focusout":Br=_u=Ra=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,mp(et,a,K);break;case"selectionchange":if(S1)break;case"keydown":case"keyup":mp(et,a,K)}var Rt;if(pu)t:{switch(e){case"compositionstart":var It="onCompositionStart";break t;case"compositionend":It="onCompositionEnd";break t;case"compositionupdate":It="onCompositionUpdate";break t}It=void 0}else Ma?np(e,a)&&(It="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(It="onCompositionStart");It&&(Jd&&a.locale!=="ko"&&(Ma||It!=="onCompositionStart"?It==="onCompositionEnd"&&Ma&&(Rt=Qd()):(ni=K,cu="value"in ni?ni.value:ni.textContent,Ma=!0)),gt=Ul(P,It),0<gt.length&&(It=new Wd(It,e,null,a,K),et.push({event:It,listeners:gt}),Rt?It.data=Rt:(Rt=sp(a),Rt!==null&&(It.data=Rt)))),(Rt=h1?f1(e,a):d1(e,a))&&(It=Ul(P,"onBeforeInput"),0<It.length&&(gt=new Wd("onBeforeInput","beforeinput",null,a,K),et.push({event:gt,listeners:It}),gt.data=Rt)),ib(et,e,P,a,K)}qg(et,s)})}function oo(e,s,a){return{instance:e,listener:s,currentTarget:a}}function Ul(e,s){for(var a=s+"Capture",l=[];e!==null;){var h=e,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Rr(e,a),h!=null&&l.unshift(oo(e,h,m)),h=Rr(e,s),h!=null&&l.push(oo(e,h,m))),e.tag===3)return l;e=e.return}return[]}function lb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gg(e,s,a,l,h){for(var m=s._reactName,_=[];a!==null&&a!==l;){var C=a,k=C.alternate,P=C.stateNode;if(C=C.tag,k!==null&&k===l)break;C!==5&&C!==26&&C!==27||P===null||(k=P,h?(P=Rr(a,m),P!=null&&_.unshift(oo(a,P,k))):h||(P=Rr(a,m),P!=null&&_.push(oo(a,P,k)))),a=a.return}_.length!==0&&e.push({event:s,listeners:_})}var cb=/\r\n?/g,ub=/\u0000|\uFFFD/g;function Hg(e){return(typeof e=="string"?e:""+e).replace(cb,`
`).replace(ub,"")}function Fg(e,s){return s=Hg(s),Hg(e)===s}function ee(e,s,a,l,h,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||xa(e,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&xa(e,""+l);break;case"className":Go(e,"class",l);break;case"tabIndex":Go(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Go(e,a,l);break;case"style":Fd(e,l,m);break;case"data":if(s!=="object"){Go(e,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Fo(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&ee(e,s,"name",h.name,h,null),ee(e,s,"formEncType",h.formEncType,h,null),ee(e,s,"formMethod",h.formMethod,h,null),ee(e,s,"formTarget",h.formTarget,h,null)):(ee(e,s,"encType",h.encType,h,null),ee(e,s,"method",h.method,h,null),ee(e,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Fo(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=As);break;case"onScroll":l!=null&&jt("scroll",e);break;case"onScrollEnd":l!=null&&jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Fo(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":jt("beforetoggle",e),jt("toggle",e),Po(e,"popover",l);break;case"xlinkActuate":Es(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Es(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Es(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Es(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Es(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Es(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Es(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Es(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Es(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Po(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vv.get(a)||a,Po(e,a,l))}}function Hh(e,s,a,l,h,m){switch(a){case"style":Fd(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof l=="string"?xa(e,l):(typeof l=="number"||typeof l=="bigint")&&xa(e,""+l);break;case"onScroll":l!=null&&jt("scroll",e);break;case"onScrollEnd":l!=null&&jt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=As);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bd.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=e[yn]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(s,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Po(e,a,l)}}}function We(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",e),jt("load",e);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ee(e,s,m,_,a,null)}}h&&ee(e,s,"srcSet",a.srcSet,a,null),l&&ee(e,s,"src",a.src,a,null);return;case"input":jt("invalid",e);var C=m=_=h=null,k=null,P=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":h=K;break;case"type":_=K;break;case"checked":k=K;break;case"defaultChecked":P=K;break;case"value":m=K;break;case"defaultValue":C=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:ee(e,s,l,K,a,null)}}qd(e,m,C,k,P,_,h,!1);return;case"select":jt("invalid",e),l=_=m=null;for(h in a)if(a.hasOwnProperty(h)&&(C=a[h],C!=null))switch(h){case"value":m=C;break;case"defaultValue":_=C;break;case"multiple":l=C;default:ee(e,s,h,C,a,null)}s=m,a=_,e.multiple=!!l,s!=null?Ta(e,!!l,s,!1):a!=null&&Ta(e,!!l,a,!0);return;case"textarea":jt("invalid",e),m=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(C=a[_],C!=null))switch(_){case"value":l=C;break;case"defaultValue":h=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:ee(e,s,_,C,a,null)}Gd(e,l,h,m);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ee(e,s,k,l,a,null)}return;case"dialog":jt("beforetoggle",e),jt("toggle",e),jt("cancel",e),jt("close",e);break;case"iframe":case"object":jt("load",e);break;case"video":case"audio":for(l=0;l<ro.length;l++)jt(ro[l],e);break;case"image":jt("error",e),jt("load",e);break;case"details":jt("toggle",e);break;case"embed":case"source":case"link":jt("error",e),jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ee(e,s,P,l,a,null)}return;default:if(iu(s)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&Hh(e,s,K,l,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null&&ee(e,s,C,l,a,null))}function hb(e,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,_=null,C=null,k=null,P=null,K=null;for(Z in a){var et=a[Z];if(a.hasOwnProperty(Z)&&et!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":k=et;default:l.hasOwnProperty(Z)||ee(e,s,Z,null,l,et)}}for(var H in l){var Z=l[H];if(et=a[H],l.hasOwnProperty(H)&&(Z!=null||et!=null))switch(H){case"type":m=Z;break;case"name":h=Z;break;case"checked":P=Z;break;case"defaultChecked":K=Z;break;case"value":_=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==et&&ee(e,s,H,Z,l,et)}}nu(e,_,C,k,P,K,m,h);return;case"select":Z=_=C=H=null;for(m in a)if(k=a[m],a.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":Z=k;default:l.hasOwnProperty(m)||ee(e,s,m,null,l,k)}for(h in l)if(m=l[h],k=a[h],l.hasOwnProperty(h)&&(m!=null||k!=null))switch(h){case"value":H=m;break;case"defaultValue":C=m;break;case"multiple":_=m;default:m!==k&&ee(e,s,h,m,l,k)}s=C,a=_,l=Z,H!=null?Ta(e,!!a,H,!1):!!l!=!!a&&(s!=null?Ta(e,!!a,s,!0):Ta(e,!!a,a?[]:"",!1));return;case"textarea":Z=H=null;for(C in a)if(h=a[C],a.hasOwnProperty(C)&&h!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ee(e,s,C,null,l,h)}for(_ in l)if(h=l[_],m=a[_],l.hasOwnProperty(_)&&(h!=null||m!=null))switch(_){case"value":H=h;break;case"defaultValue":Z=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&ee(e,s,_,h,l,m)}Pd(e,H,Z);return;case"option":for(var ft in a)if(H=a[ft],a.hasOwnProperty(ft)&&H!=null&&!l.hasOwnProperty(ft))switch(ft){case"selected":e.selected=!1;break;default:ee(e,s,ft,null,l,H)}for(k in l)if(H=l[k],Z=a[k],l.hasOwnProperty(k)&&H!==Z&&(H!=null||Z!=null))switch(k){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ee(e,s,k,H,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in a)H=a[bt],a.hasOwnProperty(bt)&&H!=null&&!l.hasOwnProperty(bt)&&ee(e,s,bt,null,l,H);for(P in l)if(H=l[P],Z=a[P],l.hasOwnProperty(P)&&H!==Z&&(H!=null||Z!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:ee(e,s,P,H,l,Z)}return;default:if(iu(s)){for(var ne in a)H=a[ne],a.hasOwnProperty(ne)&&H!==void 0&&!l.hasOwnProperty(ne)&&Hh(e,s,ne,void 0,l,H);for(K in l)H=l[K],Z=a[K],!l.hasOwnProperty(K)||H===Z||H===void 0&&Z===void 0||Hh(e,s,K,H,l,Z);return}}for(var V in a)H=a[V],a.hasOwnProperty(V)&&H!=null&&!l.hasOwnProperty(V)&&ee(e,s,V,null,l,H);for(et in l)H=l[et],Z=a[et],!l.hasOwnProperty(et)||H===Z||H==null&&Z==null||ee(e,s,et,H,l,Z)}function Yg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,_=h.initiatorType,C=h.duration;if(m&&C&&Yg(_)){for(_=0,C=h.responseEnd,l+=1;l<a.length;l++){var k=a[l],P=k.startTime;if(P>C)break;var K=k.transferSize,et=k.initiatorType;K&&Yg(et)&&(k=k.responseEnd,_+=K*(k<C?1:(C-P)/(k-P)))}if(--l,s+=8*(m+_)/(h.duration/1e3),e++,10<e)break}}if(0<e)return s/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Fh=null,Yh=null;function Il(e){return e.nodeType===9?e:e.ownerDocument}function Xg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qg(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Xh(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qh=null;function db(){var e=window.event;return e&&e.type==="popstate"?e===Qh?!1:(Qh=e,!0):(Qh=null,!1)}var $g=typeof setTimeout=="function"?setTimeout:void 0,pb=typeof clearTimeout=="function"?clearTimeout:void 0,Zg=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof Zg<"u"?function(e){return Zg.resolve(null).then(e).catch(gb)}:$g;function gb(e){setTimeout(function(){throw e})}function vi(e){return e==="head"}function Wg(e,s){var a=s,l=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(h),er(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")lo(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,lo(a);for(var m=a.firstChild;m;){var _=m.nextSibling,C=m.nodeName;m[Ar]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&lo(e.ownerDocument.body);a=h}while(a);er(s)}function Kg(e,s){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function $h(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$h(a),tu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function yb(e,s,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ar])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=$n(e.nextSibling),e===null)break}return null}function _b(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=$n(e.nextSibling),e===null))return null;return e}function Jg(e,s){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=$n(e.nextSibling),e===null))return null;return e}function Zh(e){return e.data==="$?"||e.data==="$~"}function Wh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function vb(e,s){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=s;else if(e.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function $n(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return e}var Kh=null;function t0(e){e=e.nextSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(s===0)return $n(e.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}e=e.nextSibling}return null}function e0(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return e;s--}else a!=="/$"&&a!=="/&"||s++}e=e.previousSibling}return null}function n0(e,s,a){switch(s=Il(a),e){case"html":if(e=s.documentElement,!e)throw Error(i(452));return e;case"head":if(e=s.head,!e)throw Error(i(453));return e;case"body":if(e=s.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function lo(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);tu(e)}var Zn=new Map,s0=new Set;function ql(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ps=A.d;A.d={f:bb,r:Sb,D:Cb,C:Tb,L:xb,m:Eb,X:Mb,S:Ab,M:Rb};function bb(){var e=Ps.f(),s=Dl();return e||s}function Sb(e){var s=ba(e);s!==null&&s.tag===5&&s.type==="form"?bm(s):Ps.r(e)}var Ka=typeof document>"u"?null:document;function i0(e,s,a){var l=Ka;if(l&&typeof s=="string"&&s){var h=Pn(s);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),s0.has(h)||(s0.add(h),e={rel:e,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),We(s,"link",e),Ge(s),l.head.appendChild(s)))}}function Cb(e){Ps.D(e),i0("dns-prefetch",e,null)}function Tb(e,s){Ps.C(e,s),i0("preconnect",e,s)}function xb(e,s,a){Ps.L(e,s,a);var l=Ka;if(l&&e&&s){var h='link[rel="preload"][as="'+Pn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Pn(a.imageSizes)+'"]')):h+='[href="'+Pn(e)+'"]';var m=h;switch(s){case"style":m=Ja(e);break;case"script":m=tr(e)}Zn.has(m)||(e=y({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),Zn.set(m,e),l.querySelector(h)!==null||s==="style"&&l.querySelector(co(m))||s==="script"&&l.querySelector(uo(m))||(s=l.createElement("link"),We(s,"link",e),Ge(s),l.head.appendChild(s)))}}function Eb(e,s){Ps.m(e,s);var a=Ka;if(a&&e){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Pn(l)+'"][href="'+Pn(e)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=tr(e)}if(!Zn.has(m)&&(e=y({rel:"modulepreload",href:e},s),Zn.set(m,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uo(m)))return}l=a.createElement("link"),We(l,"link",e),Ge(l),a.head.appendChild(l)}}}function Ab(e,s,a){Ps.S(e,s,a);var l=Ka;if(l&&e){var h=Sa(l).hoistableStyles,m=Ja(e);s=s||"default";var _=h.get(m);if(!_){var C={loading:0,preload:null};if(_=l.querySelector(co(m)))C.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":s},a),(a=Zn.get(m))&&Jh(e,a);var k=_=l.createElement("link");Ge(k),We(k,"link",e),k._p=new Promise(function(P,K){k.onload=P,k.onerror=K}),k.addEventListener("load",function(){C.loading|=1}),k.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Pl(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:C},h.set(m,_)}}}function Mb(e,s){Ps.X(e,s);var a=Ka;if(a&&e){var l=Sa(a).hoistableScripts,h=tr(e),m=l.get(h);m||(m=a.querySelector(uo(h)),m||(e=y({src:e,async:!0},s),(s=Zn.get(h))&&tf(e,s),m=a.createElement("script"),Ge(m),We(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Rb(e,s){Ps.M(e,s);var a=Ka;if(a&&e){var l=Sa(a).hoistableScripts,h=tr(e),m=l.get(h);m||(m=a.querySelector(uo(h)),m||(e=y({src:e,async:!0,type:"module"},s),(s=Zn.get(h))&&tf(e,s),m=a.createElement("script"),Ge(m),We(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function a0(e,s,a,l){var h=(h=D.current)?ql(h):null;if(!h)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ja(a.href),a=Sa(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ja(a.href);var m=Sa(h).hoistableStyles,_=m.get(e);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,_),(m=h.querySelector(co(e)))&&!m._p&&(_.instance=m,_.state.loading=5),Zn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(e,a),m||kb(h,e,a,_.state))),s&&l===null)throw Error(i(528,""));return _}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=tr(a),a=Sa(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Ja(e){return'href="'+Pn(e)+'"'}function co(e){return'link[rel="stylesheet"]['+e+"]"}function r0(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function kb(e,s,a,l){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=e.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),We(s,"link",a),Ge(s),e.head.appendChild(s))}function tr(e){return'[src="'+Pn(e)+'"]'}function uo(e){return"script[async]"+e}function o0(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=e.querySelector('style[data-href~="'+Pn(a.href)+'"]');if(l)return s.instance=l,Ge(l),l;var h=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ge(l),We(l,"style",h),Pl(l,a.precedence,e),s.instance=l;case"stylesheet":h=Ja(a.href);var m=e.querySelector(co(h));if(m)return s.state.loading|=4,s.instance=m,Ge(m),m;l=r0(a),(h=Zn.get(h))&&Jh(l,h),m=(e.ownerDocument||e).createElement("link"),Ge(m);var _=m;return _._p=new Promise(function(C,k){_.onload=C,_.onerror=k}),We(m,"link",l),s.state.loading|=4,Pl(m,a.precedence,e),s.instance=m;case"script":return m=tr(a.src),(h=e.querySelector(uo(m)))?(s.instance=h,Ge(h),h):(l=a,(h=Zn.get(m))&&(l=y({},a),tf(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),Ge(h),We(h,"link",l),e.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Pl(l,a.precedence,e));return s.instance}function Pl(e,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,_=0;_<l.length;_++){var C=l[_];if(C.dataset.precedence===s)m=C;else if(m!==h)break}m?m.parentNode.insertBefore(e,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function Jh(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function tf(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Gl=null;function l0(e,s,a){if(Gl===null){var l=new Map,h=Gl=new Map;h.set(a,l)}else h=Gl,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var m=a[h];if(!(m[Ar]||m[Xe]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=e+_;var C=l.get(_);C?C.push(m):l.set(_,[m])}}return l}function c0(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function Ob(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function u0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Nb(e,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Ja(l.href),m=s.querySelector(co(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(e.count++,e=Hl.bind(e),s.then(e,e)),a.state.loading|=4,a.instance=m,Ge(m);return}m=s.ownerDocument||s,l=r0(l),(h=Zn.get(h))&&Jh(l,h),m=m.createElement("link"),Ge(m);var _=m;_._p=new Promise(function(C,k){_.onload=C,_.onerror=k}),We(m,"link",l),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Hl.bind(e),s.addEventListener("load",a),s.addEventListener("error",a))}}var ef=0;function Db(e,s){return e.stylesheets&&e.count===0&&Yl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Yl(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+s);0<e.imgBytes&&ef===0&&(ef=62500*fb());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Yl(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>ef?50:800)+s);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Hl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fl=null;function Yl(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fl=new Map,s.forEach(wb,e),Fl=null,Hl.call(e))}function wb(e,s){if(!(s.state.loading&4)){var a=Fl.get(e);if(a)var l=a.get(null);else{a=new Map,Fl.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var _=h[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=s.instance,_=h.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,h),a.set(_,h),this.count++,l=Hl.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),s.state.loading|=4}}var ho={$$typeof:N,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Lb(e,s,a,l,h,m,_,C,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Js(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Js(0),this.hiddenUpdates=Js(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function h0(e,s,a,l,h,m,_,C,k,P,K,et){return e=new Lb(e,s,a,_,k,P,K,et,C),s=1,m===!0&&(s|=24),m=On(3,null,null,s),e.current=m,m.stateNode=e,s=Lu(),s.refCount++,e.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Vu(m),e}function f0(e){return e?(e=Na,e):Na}function d0(e,s,a,l,h,m){h=f0(h),l.context===null?l.context=h:l.pendingContext=h,l=li(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=ci(e,l,s),a!==null&&(Tn(a,e,s),Gr(a,e,s))}function p0(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function nf(e,s){p0(e,s),(e=e.alternate)&&p0(e,s)}function m0(e){if(e.tag===13||e.tag===31){var s=Hi(e,67108864);s!==null&&Tn(s,e,67108864),nf(e,67108864)}}function g0(e){if(e.tag===13||e.tag===31){var s=zn();s=Er(s);var a=Hi(e,s);a!==null&&Tn(a,e,s),nf(e,s)}}var Xl=!0;function zb(e,s,a,l){var h=M.T;M.T=null;var m=A.p;try{A.p=2,sf(e,s,a,l)}finally{A.p=m,M.T=h}}function Bb(e,s,a,l){var h=M.T;M.T=null;var m=A.p;try{A.p=8,sf(e,s,a,l)}finally{A.p=m,M.T=h}}function sf(e,s,a,l){if(Xl){var h=af(l);if(h===null)Gh(e,s,l,Ql,a),_0(e,l);else if(Vb(h,e,s,a,l))l.stopPropagation();else if(_0(e,l),s&4&&-1<jb.indexOf(e)){for(;h!==null;){var m=ba(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Ye(m.pendingLanes);if(_!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var k=1<<31-Qt(_);C.entanglements[1]|=k,_&=~k}ps(m),(Xt&6)===0&&(Ol=de()+500,ao(0))}}break;case 31:case 13:C=Hi(m,2),C!==null&&Tn(C,m,2),Dl(),nf(m,2)}if(m=af(l),m===null&&Gh(e,s,l,Ql,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Gh(e,s,l,null,a)}}function af(e){return e=ru(e),rf(e)}var Ql=null;function rf(e){if(Ql=null,e=va(e),e!==null){var s=c(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=u(s),e!==null)return e;e=null}else if(a===31){if(e=d(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Ql=e,null}function y0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yt()){case Ee:return 2;case Ss:return 8;case en:case us:return 32;case mn:return 268435456;default:return 32}default:return 32}}var of=!1,bi=null,Si=null,Ci=null,fo=new Map,po=new Map,Ti=[],jb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _0(e,s){switch(e){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":fo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(s.pointerId)}}function mo(e,s,a,l,h,m){return e===null||e.nativeEvent!==m?(e={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},s!==null&&(s=ba(s),s!==null&&m0(s)),e):(e.eventSystemFlags|=l,s=e.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),e)}function Vb(e,s,a,l,h){switch(s){case"focusin":return bi=mo(bi,e,s,a,l,h),!0;case"dragenter":return Si=mo(Si,e,s,a,l,h),!0;case"mouseover":return Ci=mo(Ci,e,s,a,l,h),!0;case"pointerover":var m=h.pointerId;return fo.set(m,mo(fo.get(m)||null,e,s,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,po.set(m,mo(po.get(m)||null,e,s,a,l,h)),!0}return!1}function v0(e){var s=va(e.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){e.blockedOn=s,wd(e.priority,function(){g0(a)});return}}else if(s===31){if(s=d(a),s!==null){e.blockedOn=s,wd(e.priority,function(){g0(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $l(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=af(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);au=l,a.target.dispatchEvent(l),au=null}else return s=ba(a),s!==null&&m0(s),e.blockedOn=a,!1;s.shift()}return!0}function b0(e,s,a){$l(e)&&a.delete(s)}function Ub(){of=!1,bi!==null&&$l(bi)&&(bi=null),Si!==null&&$l(Si)&&(Si=null),Ci!==null&&$l(Ci)&&(Ci=null),fo.forEach(b0),po.forEach(b0)}function Zl(e,s){e.blockedOn===s&&(e.blockedOn=null,of||(of=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ub)))}var Wl=null;function S0(e){Wl!==e&&(Wl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Wl===e&&(Wl=null);for(var s=0;s<e.length;s+=3){var a=e[s],l=e[s+1],h=e[s+2];if(typeof l!="function"){if(rf(l||a)===null)continue;break}var m=ba(a);m!==null&&(e.splice(s,3),s-=3,ih(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function er(e){function s(k){return Zl(k,e)}bi!==null&&Zl(bi,e),Si!==null&&Zl(Si,e),Ci!==null&&Zl(Ci,e),fo.forEach(s),po.forEach(s);for(var a=0;a<Ti.length;a++){var l=Ti[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ti.length&&(a=Ti[0],a.blockedOn===null);)v0(a),a.blockedOn===null&&Ti.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],_=h[yn]||null;if(typeof m=="function")_||S0(a);else if(_){var C=null;if(m&&m.hasAttribute("formAction")){if(h=m,_=m[yn]||null)C=_.formAction;else if(rf(h)!==null)continue}else C=_.action;typeof C=="function"?a[l+1]=C:(a.splice(l,3),l-=3),S0(a)}}}function C0(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function lf(e){this._internalRoot=e}Kl.prototype.render=lf.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=zn();d0(a,l,e,s,null,null)},Kl.prototype.unmount=lf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;d0(e.current,2,null,e,null,null),Dl(),s[_a]=null}};function Kl(e){this._internalRoot=e}Kl.prototype.unstable_scheduleHydration=function(e){if(e){var s=Dd();e={blockedOn:null,target:e,priority:s};for(var a=0;a<Ti.length&&s!==0&&s<Ti[a].priority;a++);Ti.splice(a,0,e),a===0&&v0(e)}};var T0=t.version;if(T0!=="19.2.1")throw Error(i(527,T0,"19.2.1"));A.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(s),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Ib={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jl.isDisabled&&Jl.supportsFiber)try{mt=Jl.inject(Ib),At=Jl}catch{}}return yo.createRoot=function(e,s){if(!o(e))throw Error(i(299));var a=!1,l="",h=Om,m=Nm,_=Dm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=h0(e,1,!1,null,null,a,l,null,h,m,_,C0),e[_a]=s.current,Ph(e),new lf(s)},yo.hydrateRoot=function(e,s,a){if(!o(e))throw Error(i(299));var l=!1,h="",m=Om,_=Nm,C=Dm,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),s=h0(e,1,!0,s,a??null,l,h,k,m,_,C,C0),s.context=f0(null),a=s.current,l=zn(),l=Er(l),h=li(l),h.callback=null,ci(a,h,l),a=l,s.current.lanes=a,xs(s,a),ps(s),e[_a]=s.current,Ph(e),new Kl(s)},yo.version="19.2.1",yo}var w0;function Wb(){if(w0)return hf.exports;w0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),hf.exports=Zb(),hf.exports}var Kb=Wb();const Ty="15.1.22",L0=(r,t,n)=>({endTime:t,insertTime:n,type:"exponentialRampToValue",value:r}),z0=(r,t,n)=>({endTime:t,insertTime:n,type:"linearRampToValue",value:r}),Cf=(r,t)=>({startTime:t,type:"setValue",value:r}),xy=(r,t,n)=>({duration:n,startTime:t,type:"setValueCurve",values:r}),Ey=(r,t,{startTime:n,target:i,timeConstant:o})=>i+(t-i)*Math.exp((n-r)/o),ar=r=>r.type==="exponentialRampToValue",yc=r=>r.type==="linearRampToValue",Ai=r=>ar(r)||yc(r),qf=r=>r.type==="setValue",Fs=r=>r.type==="setValueCurve",_c=(r,t,n,i)=>{const o=r[t];return o===void 0?i:Ai(o)||qf(o)?o.value:Fs(o)?o.values[o.values.length-1]:Ey(n,_c(r,t-1,o.startTime,i),o)},B0=(r,t,n,i,o)=>n===void 0?[i.insertTime,o]:Ai(n)?[n.endTime,n.value]:qf(n)?[n.startTime,n.value]:Fs(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,_c(r,t-1,n.startTime,o)],Tf=r=>r.type==="cancelAndHold",xf=r=>r.type==="cancelScheduledValues",Ei=r=>Tf(r)||xf(r)?r.cancelTime:ar(r)||yc(r)?r.endTime:r.startTime,j0=(r,t,n,{endTime:i,value:o})=>n===o?o:0<n&&0<o||n<0&&o<0?n*(o/n)**((r-t)/(i-t)):0,V0=(r,t,n,{endTime:i,value:o})=>n+(r-t)/(i-t)*(o-n),Jb=(r,t)=>{const n=Math.floor(t),i=Math.ceil(t);return n===i?r[n]:(1-(t-n))*r[n]+(1-(i-t))*r[i]},tS=(r,{duration:t,startTime:n,values:i})=>{const o=(r-n)/t*(i.length-1);return Jb(i,o)},tc=r=>r.type==="setTarget";class eS{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const n=Ei(t);if(Tf(t)||xf(t)){const i=this._automationEvents.findIndex(c=>xf(t)&&Fs(c)?c.startTime+c.duration>=n:Ei(c)>=n),o=this._automationEvents[i];if(i!==-1&&(this._automationEvents=this._automationEvents.slice(0,i)),Tf(t)){const c=this._automationEvents[this._automationEvents.length-1];if(o!==void 0&&Ai(o)){if(c!==void 0&&tc(c))throw new Error("The internal list is malformed.");const u=c===void 0?o.insertTime:Fs(c)?c.startTime+c.duration:Ei(c),d=c===void 0?this._defaultValue:Fs(c)?c.values[c.values.length-1]:c.value,f=ar(o)?j0(n,u,d,o):V0(n,u,d,o),p=ar(o)?L0(f,n,this._currenTime):z0(f,n,this._currenTime);this._automationEvents.push(p)}if(c!==void 0&&tc(c)&&this._automationEvents.push(Cf(this.getValue(n),n)),c!==void 0&&Fs(c)&&c.startTime+c.duration>n){const u=n-c.startTime,d=(c.values.length-1)/c.duration,f=Math.max(2,1+Math.ceil(u*d)),p=u/(f-1)*d,g=c.values.slice(0,f);if(p<1)for(let y=1;y<f;y+=1){const v=p*y%1;g[y]=c.values[y-1]*(1-v)+c.values[y]*v}this._automationEvents[this._automationEvents.length-1]=xy(g,c.startTime,u)}}}else{const i=this._automationEvents.findIndex(u=>Ei(u)>n),o=i===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[i-1];if(o!==void 0&&Fs(o)&&Ei(o)+o.duration>n)return!1;const c=ar(t)?L0(t.value,t.endTime,this._currenTime):yc(t)?z0(t.value,n,this._currenTime):t;if(i===-1)this._automationEvents.push(c);else{if(Fs(t)&&n+t.duration>Ei(this._automationEvents[i]))return!1;this._automationEvents.splice(i,0,c)}}return!0}flush(t){const n=this._automationEvents.findIndex(i=>Ei(i)>t);if(n>1){const i=this._automationEvents.slice(n-1),o=i[0];tc(o)&&i.unshift(Cf(_c(this._automationEvents,n-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=i}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(u=>Ei(u)>t),i=this._automationEvents[n],o=(n===-1?this._automationEvents.length:n)-1,c=this._automationEvents[o];if(c!==void 0&&tc(c)&&(i===void 0||!Ai(i)||i.insertTime>t))return Ey(t,_c(this._automationEvents,o-1,c.startTime,this._defaultValue),c);if(c!==void 0&&qf(c)&&(i===void 0||!Ai(i)))return c.value;if(c!==void 0&&Fs(c)&&(i===void 0||!Ai(i)||c.startTime+c.duration>t))return t<c.startTime+c.duration?tS(t,c):c.values[c.values.length-1];if(c!==void 0&&Ai(c)&&(i===void 0||!Ai(i)))return c.value;if(i!==void 0&&ar(i)){const[u,d]=B0(this._automationEvents,o,c,i,this._defaultValue);return j0(t,u,d,i)}if(i!==void 0&&yc(i)){const[u,d]=B0(this._automationEvents,o,c,i,this._defaultValue);return V0(t,u,d,i)}return this._defaultValue}}const nS=r=>({cancelTime:r,type:"cancelAndHold"}),sS=r=>({cancelTime:r,type:"cancelScheduledValues"}),iS=(r,t)=>({endTime:t,type:"exponentialRampToValue",value:r}),aS=(r,t)=>({endTime:t,type:"linearRampToValue",value:r}),rS=(r,t,n)=>({startTime:t,target:r,timeConstant:n,type:"setTarget"}),oS=()=>new DOMException("","AbortError"),lS=r=>(t,n,[i,o,c],u)=>{r(t[o],[n,i,c],d=>d[0]===n&&d[1]===i,u)},cS=r=>(t,n,i)=>{const o=[];for(let c=0;c<i.numberOfInputs;c+=1)o.push(new Set);r.set(t,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},uS=r=>(t,n)=>{r.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},fr=new WeakSet,Ay=new WeakMap,Pf=new WeakMap,My=new WeakMap,Gf=new WeakMap,Lc=new WeakMap,Ry=new WeakMap,Ef=new WeakMap,Af=new WeakMap,Mf=new WeakMap,ky={construct(){return ky}},hS=r=>{try{const t=new Proxy(r,ky);new t}catch{return!1}return!0},U0=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,I0=(r,t)=>{const n=[];let i=r.replace(/^[\s]+/,""),o=i.match(U0);for(;o!==null;){const c=o[1].slice(1,-1),u=o[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());n.push(u),i=i.slice(o[0].length).replace(/^[\s]+/,""),o=i.match(U0)}return[n.join(";"),i]},q0=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},P0=r=>{if(!hS(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},fS=(r,t,n,i,o,c,u,d,f,p,g,y,v)=>{let b=0;return(S,T,x={credentials:"omit"})=>{const E=g.get(S);if(E!==void 0&&E.has(T))return Promise.resolve();const w=p.get(S);if(w!==void 0){const O=w.get(T);if(O!==void 0)return O}const N=c(S),X=N.audioWorklet===void 0?o(T).then(([O,U])=>{const[j,z]=I0(O,U),nt=`${j};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${z}
})})(window,'_AWGS')`;return n(nt)}).then(()=>{const O=v._AWGS.pop();if(O===void 0)throw new SyntaxError;i(N.currentTime,N.sampleRate,()=>O(class{},void 0,(U,j)=>{if(U.trim()==="")throw t();const z=Af.get(N);if(z!==void 0){if(z.has(U))throw t();P0(j),q0(j.parameterDescriptors),z.set(U,j)}else P0(j),q0(j.parameterDescriptors),Af.set(N,new Map([[U,j]]))},N.sampleRate,void 0,void 0))}):Promise.all([o(T),Promise.resolve(r(y,y))]).then(([[O,U],j])=>{const z=b+1;b=z;const[nt,G]=I0(O,U),J=`${nt};((AudioWorkletProcessor,registerProcessor)=>{${G}
})(${j?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${j?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${j?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${z}',class extends AudioWorkletProcessor{process(){return !1}})`,ot=new Blob([J],{type:"application/javascript; charset=utf-8"}),M=URL.createObjectURL(ot);return N.audioWorklet.addModule(M,x).then(()=>{if(d(N))return N;const A=u(N);return A.audioWorklet.addModule(M,x).then(()=>A)}).then(A=>{if(f===null)throw new SyntaxError;try{new f(A,`__sac${z}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(M))});return w===void 0?p.set(S,new Map([[T,X]])):w.set(T,X),X.then(()=>{const O=g.get(S);O===void 0?g.set(S,new Set([T])):O.add(T)}).finally(()=>{const O=p.get(S);O!==void 0&&O.delete(T)}),X}},is=(r,t)=>{const n=r.get(t);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},zc=(r,t)=>{const n=Array.from(r).filter(t);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[i]=n;return r.delete(i),i},Oy=(r,t,n,i)=>{const o=is(r,t),c=zc(o,u=>u[0]===n&&u[1]===i);return o.size===0&&r.delete(t),c},Eo=r=>is(Ry,r),dr=r=>{if(fr.has(r))throw new Error("The AudioNode is already stored.");fr.add(r),Eo(r).forEach(t=>t(!0))},Ny=r=>"port"in r,Ao=r=>{if(!fr.has(r))throw new Error("The AudioNode is not stored.");fr.delete(r),Eo(r).forEach(t=>t(!1))},Rf=(r,t)=>{!Ny(r)&&t.every(n=>n.size===0)&&Ao(r)},dS=(r,t,n,i,o,c,u,d,f,p,g,y,v)=>{const b=new WeakMap;return(S,T,x,E,w)=>{const{activeInputs:N,passiveInputs:X}=c(T),{outputs:O}=c(S),U=d(S),j=z=>{const nt=f(T),G=f(S);if(z){const $=Oy(X,S,x,E);r(N,S,$,!1),!w&&!y(S)&&n(G,nt,x,E),v(T)&&dr(T)}else{const $=i(N,S,x,E);t(X,E,$,!1),!w&&!y(S)&&o(G,nt,x,E);const Q=u(T);if(Q===0)g(T)&&Rf(T,N);else{const st=b.get(T);st!==void 0&&clearTimeout(st),b.set(T,setTimeout(()=>{g(T)&&Rf(T,N)},Q*1e3))}}};return p(O,[T,x,E],z=>z[0]===T&&z[1]===x&&z[2]===E,!0)?(U.add(j),g(S)?r(N,S,[x,E,j],!0):t(X,E,[S,x,j],!0),!0):!1}},pS=r=>(t,n,[i,o,c],u)=>{const d=t.get(i);d===void 0?t.set(i,new Set([[o,n,c]])):r(d,[o,n,c],f=>f[0]===o&&f[1]===n,u)},mS=r=>(t,n)=>{const i=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(t.destination);const o=()=>{n.removeEventListener("ended",o),n.disconnect(i),i.disconnect()};n.addEventListener("ended",o)},gS=r=>(t,n)=>{r(t).add(n)},yS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},_S=(r,t,n,i,o,c)=>class extends r{constructor(d,f){const p=o(d),g={...yS,...f},y=i(p,g),v=c(p)?t():null;super(d,!1,y,v),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=f,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}},ln=(r,t)=>r.context===t,vS=(r,t,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=t(c);if(!ln(d,u)){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,fftSize:d.fftSize,maxDecibels:d.maxDecibels,minDecibels:d.minDecibels,smoothingTimeConstant:d.smoothingTimeConstant};d=r(u,p)}return i.set(u,d),await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},vc=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},_s=()=>new DOMException("","IndexSizeError"),Hf=r=>{r.getChannelData=(t=>n=>{try{return t.call(r,n)}catch(i){throw i.code===12?_s():i}})(r.getChannelData)},bS={numberOfChannels:1},SS=(r,t,n,i,o,c,u,d)=>{let f=null;return class Dy{constructor(g){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:v,sampleRate:b}={...bS,...g};f===null&&(f=new o(1,1,44100));const S=i!==null&&t(c,c)?new i({length:y,numberOfChannels:v,sampleRate:b}):f.createBuffer(v,y,b);if(S.numberOfChannels===0)throw n();return typeof S.copyFromChannel!="function"?(u(S),Hf(S)):t(vc,()=>vc(S))||d(S),r.add(S),S}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===Dy.prototype||r.has(g)}}},An=-34028234663852886e22,hn=-An,Xs=r=>fr.has(r),CS={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},TS=(r,t,n,i,o,c,u,d)=>class extends r{constructor(p,g){const y=c(p),v={...CS,...g},b=o(y,v),S=u(y),T=S?t():null;super(p,!1,b,T),this._audioBufferSourceNodeRenderer=T,this._isBufferNullified=!1,this._isBufferSet=v.buffer!==null,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=n(this,S,b.playbackRate,hn,An)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const g=typeof p=="function"?d(this,p):null;this._nativeAudioBufferSourceNode.onended=g;const y=this._nativeAudioBufferSourceNode.onended;this._onended=y!==null&&y===g?p:y}get playbackRate(){return this._playbackRate}start(p=0,g=0,y){if(this._nativeAudioBufferSourceNode.start(p,g,y),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=y===void 0?[p,g]:[p,g,y]),this.context.state!=="closed"){dr(this);const v=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",v),Xs(this)&&Ao(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",v)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}},xS=(r,t,n,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const f=async(p,g)=>{let y=n(p);const v=ln(y,g);if(!v){const b={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value};y=t(g,b),u!==null&&y.start(...u),d!==null&&y.stop(d)}return c.set(g,y),v?await r(g,p.playbackRate,y.playbackRate):await i(g,p.playbackRate,y.playbackRate),await o(p,g,y),y};return{set start(p){u=p},set stop(p){d=p},render(p,g){const y=c.get(g);return y!==void 0?Promise.resolve(y):f(p,g)}}},ES=r=>"playbackRate"in r,AS=r=>"frequency"in r&&"gain"in r,MS=r=>"offset"in r,RS=r=>!("frequency"in r)&&"gain"in r,kS=r=>"detune"in r&&"frequency"in r&&!("gain"in r),OS=r=>"pan"in r,fn=r=>is(Ay,r),Mo=r=>is(My,r),kf=(r,t)=>{const{activeInputs:n}=fn(r);n.forEach(o=>o.forEach(([c])=>{t.includes(r)||kf(c,[...t,r])}));const i=ES(r)?[r.playbackRate]:Ny(r)?Array.from(r.parameters.values()):AS(r)?[r.Q,r.detune,r.frequency,r.gain]:MS(r)?[r.offset]:RS(r)?[r.gain]:kS(r)?[r.detune,r.frequency]:OS(r)?[r.pan]:[];for(const o of i){const c=Mo(o);c!==void 0&&c.activeInputs.forEach(([u])=>kf(u,t))}Xs(r)&&Ao(r)},wy=r=>{kf(r.destination,[])},NS=r=>r===void 0||typeof r=="number"||typeof r=="string"&&(r==="balanced"||r==="interactive"||r==="playback"),DS=(r,t,n,i,o,c,u,d,f)=>class extends r{constructor(g={}){if(f===null)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new f(g)}catch(S){throw S.code===12&&S.message==="sampleRate is not in range"?n():S}if(y===null)throw i();if(!NS(g.latencyHint))throw new TypeError(`The provided value '${g.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(g.sampleRate!==void 0&&y.sampleRate!==g.sampleRate)throw n();super(y,2);const{latencyHint:v}=g,{sampleRate:b}=y;if(this._baseLatency=typeof y.baseLatency=="number"?y.baseLatency:v==="balanced"?512/b:v==="interactive"||v===void 0?256/b:v==="playback"?1024/b:Math.max(2,Math.min(128,Math.round(v*b/128)))*128/b,this._nativeAudioContext=y,f.name==="webkitAudioContext"?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,y.state==="running"){this._state="suspended";const S=()=>{this._state==="suspended"&&(this._state=null),y.removeEventListener("statechange",S)};y.addEventListener("statechange",S)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),wy(this)}))}createMediaElementSource(g){return new o(this,{mediaElement:g})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(g){return new u(this,{mediaStream:g})}createMediaStreamTrackSource(g){return new d(this,{mediaStreamTrack:g})}resume(){return this._state==="suspended"?new Promise((g,y)=>{const v=()=>{this._nativeAudioContext.removeEventListener("statechange",v),this._nativeAudioContext.state==="running"?g():this.resume().then(g,y)};this._nativeAudioContext.addEventListener("statechange",v)}):this._nativeAudioContext.resume().catch(g=>{throw g===void 0||g.code===15?t():g})}suspend(){return this._nativeAudioContext.suspend().catch(g=>{throw g===void 0?t():g})}},wS=(r,t,n,i,o,c,u,d)=>class extends r{constructor(p,g){const y=c(p),v=u(y),b=o(y,g,v),S=v?t(d):null;super(p,!1,b,S),this._isNodeOfNativeOfflineAudioContext=v,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},LS=r=>{const t=new WeakMap,n=async(i,o)=>{const c=o.destination;return t.set(o,c),await r(i,o,c),c};return{render(i,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):n(i,o)}}},zS=(r,t,n,i,o,c,u,d)=>(f,p)=>{const g=p.listener,y=()=>{const O=new Float32Array(1),U=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),j=u(p);let z=!1,nt=[0,0,-1,0,1,0],G=[0,0,0];const $=()=>{if(z)return;z=!0;const ot=i(p,256,9,0);ot.onaudioprocess=({inputBuffer:M})=>{const A=[c(M,O,0),c(M,O,1),c(M,O,2),c(M,O,3),c(M,O,4),c(M,O,5)];A.some((W,rt)=>W!==nt[rt])&&(g.setOrientation(...A),nt=A);const Y=[c(M,O,6),c(M,O,7),c(M,O,8)];Y.some((W,rt)=>W!==G[rt])&&(g.setPosition(...Y),G=Y)},U.connect(ot)},Q=ot=>M=>{M!==nt[ot]&&(nt[ot]=M,g.setOrientation(...nt))},st=ot=>M=>{M!==G[ot]&&(G[ot]=M,g.setPosition(...G))},J=(ot,M,A)=>{const Y=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:M});Y.connect(U,0,ot),Y.start(),Object.defineProperty(Y.offset,"defaultValue",{get(){return M}});const W=r({context:f},j,Y.offset,hn,An);return d(W,"value",rt=>()=>rt.call(W),rt=>R=>{try{rt.call(W,R)}catch(F){if(F.code!==9)throw F}$(),j&&A(R)}),W.cancelAndHoldAtTime=(rt=>j?()=>{throw o()}:(...R)=>{const F=rt.apply(W,R);return $(),F})(W.cancelAndHoldAtTime),W.cancelScheduledValues=(rt=>j?()=>{throw o()}:(...R)=>{const F=rt.apply(W,R);return $(),F})(W.cancelScheduledValues),W.exponentialRampToValueAtTime=(rt=>j?()=>{throw o()}:(...R)=>{const F=rt.apply(W,R);return $(),F})(W.exponentialRampToValueAtTime),W.linearRampToValueAtTime=(rt=>j?()=>{throw o()}:(...R)=>{const F=rt.apply(W,R);return $(),F})(W.linearRampToValueAtTime),W.setTargetAtTime=(rt=>j?()=>{throw o()}:(...R)=>{const F=rt.apply(W,R);return $(),F})(W.setTargetAtTime),W.setValueAtTime=(rt=>j?()=>{throw o()}:(...R)=>{const F=rt.apply(W,R);return $(),F})(W.setValueAtTime),W.setValueCurveAtTime=(rt=>j?()=>{throw o()}:(...R)=>{const F=rt.apply(W,R);return $(),F})(W.setValueCurveAtTime),W};return{forwardX:J(0,0,Q(0)),forwardY:J(1,0,Q(1)),forwardZ:J(2,-1,Q(2)),positionX:J(6,0,st(0)),positionY:J(7,0,st(1)),positionZ:J(8,0,st(2)),upX:J(3,0,Q(3)),upY:J(4,1,Q(4)),upZ:J(5,0,Q(5))}},{forwardX:v,forwardY:b,forwardZ:S,positionX:T,positionY:x,positionZ:E,upX:w,upY:N,upZ:X}=g.forwardX===void 0?y():g;return{get forwardX(){return v},get forwardY(){return b},get forwardZ(){return S},get positionX(){return T},get positionY(){return x},get positionZ(){return E},get upX(){return w},get upY(){return N},get upZ(){return X}}},bc=r=>"context"in r,Ro=r=>bc(r[0]),ca=(r,t,n,i)=>{for(const o of r)if(n(o)){if(i)return!1;throw Error("The set contains at least one similar element.")}return r.add(t),!0},G0=(r,t,[n,i],o)=>{ca(r,[t,n,i],c=>c[0]===t&&c[1]===n,o)},H0=(r,[t,n,i],o)=>{const c=r.get(t);c===void 0?r.set(t,new Set([[n,i]])):ca(c,[n,i],u=>u[0]===n,o)},yr=r=>"inputs"in r,Sc=(r,t,n,i)=>{if(yr(t)){const o=t.inputs[i];return r.connect(o,n,0),[o,n,0]}return r.connect(t,n,i),[t,n,i]},Ly=(r,t,n)=>{for(const i of r)if(i[0]===t&&i[1]===n)return r.delete(i),i;return null},BS=(r,t,n)=>zc(r,i=>i[0]===t&&i[1]===n),zy=(r,t)=>{if(!Eo(r).delete(t))throw new Error("Missing the expected event listener.")},By=(r,t,n)=>{const i=is(r,t),o=zc(i,c=>c[0]===n);return i.size===0&&r.delete(t),o},Cc=(r,t,n,i)=>{yr(t)?r.disconnect(t.inputs[i],n,0):r.disconnect(t,n,i)},ge=r=>is(Pf,r),bo=r=>is(Gf,r),ra=r=>Ef.has(r),lc=r=>!fr.has(r),F0=(r,t)=>new Promise(n=>{if(t!==null)n(!0);else{const i=r.createScriptProcessor(256,1,1),o=r.createGain(),c=r.createBuffer(1,2,44100),u=c.getChannelData(0);u[0]=1,u[1]=1;const d=r.createBufferSource();d.buffer=c,d.loop=!0,d.connect(i).connect(r.destination),d.connect(o),d.disconnect(o),i.onaudioprocess=f=>{const p=f.inputBuffer.getChannelData(0);Array.prototype.some.call(p,g=>g===1)?n(!0):n(!1),d.stop(),i.onaudioprocess=null,d.disconnect(i),i.disconnect(r.destination)},d.start()}}),mf=(r,t)=>{const n=new Map;for(const i of r)for(const o of i){const c=n.get(o);n.set(o,c===void 0?1:c+1)}n.forEach((i,o)=>t(o,i))},Tc=r=>"context"in r,jS=r=>{const t=new Map;r.connect=(n=>(i,o=0,c=0)=>{const u=Tc(i)?n(i,o,c):n(i,o),d=t.get(i);return d===void 0?t.set(i,[{input:c,output:o}]):d.every(f=>f.input!==c||f.output!==o)&&d.push({input:c,output:o}),u})(r.connect.bind(r)),r.disconnect=(n=>(i,o,c)=>{if(n.apply(r),i===void 0)t.clear();else if(typeof i=="number")for(const[u,d]of t){const f=d.filter(p=>p.output!==i);f.length===0?t.delete(u):t.set(u,f)}else if(t.has(i))if(o===void 0)t.delete(i);else{const u=t.get(i);if(u!==void 0){const d=u.filter(f=>f.output!==o&&(f.input!==c||c===void 0));d.length===0?t.delete(i):t.set(i,d)}}for(const[u,d]of t)d.forEach(f=>{Tc(u)?r.connect(u,f.output,f.input):r.connect(u,f.output)})})(r.disconnect)},VS=(r,t,n,i)=>{const{activeInputs:o,passiveInputs:c}=Mo(t),{outputs:u}=fn(r),d=Eo(r),f=p=>{const g=ge(r),y=bo(t);if(p){const v=By(c,r,n);G0(o,r,v,!1),!i&&!ra(r)&&g.connect(y,n)}else{const v=BS(o,r,n);H0(c,v,!1),!i&&!ra(r)&&g.disconnect(y,n)}};return ca(u,[t,n],p=>p[0]===t&&p[1]===n,!0)?(d.add(f),Xs(r)?G0(o,r,[n,f],!0):H0(c,[r,n,f],!0),!0):!1},US=(r,t,n,i)=>{const{activeInputs:o,passiveInputs:c}=fn(t),u=Ly(o[i],r,n);return u===null?[Oy(c,r,n,i)[2],!1]:[u[2],!0]},IS=(r,t,n)=>{const{activeInputs:i,passiveInputs:o}=Mo(t),c=Ly(i,r,n);return c===null?[By(o,r,n)[1],!1]:[c[2],!0]},Ff=(r,t,n,i,o)=>{const[c,u]=US(r,n,i,o);if(c!==null&&(zy(r,c),u&&!t&&!ra(r)&&Cc(ge(r),ge(n),i,o)),Xs(n)){const{activeInputs:d}=fn(n);Rf(n,d)}},Yf=(r,t,n,i)=>{const[o,c]=IS(r,n,i);o!==null&&(zy(r,o),c&&!t&&!ra(r)&&ge(r).disconnect(bo(n),i))},qS=(r,t)=>{const n=fn(r),i=[];for(const o of n.outputs)Ro(o)?Ff(r,t,...o):Yf(r,t,...o),i.push(o[0]);return n.outputs.clear(),i},PS=(r,t,n)=>{const i=fn(r),o=[];for(const c of i.outputs)c[1]===n&&(Ro(c)?Ff(r,t,...c):Yf(r,t,...c),o.push(c[0]),i.outputs.delete(c));return o},GS=(r,t,n,i,o)=>{const c=fn(r);return Array.from(c.outputs).filter(u=>u[0]===n&&(i===void 0||u[1]===i)&&(o===void 0||u[2]===o)).map(u=>(Ro(u)?Ff(r,t,...u):Yf(r,t,...u),c.outputs.delete(u),u[0]))},HS=(r,t,n,i,o,c,u,d,f,p,g,y,v,b,S,T)=>class extends p{constructor(E,w,N,X){super(N),this._context=E,this._nativeAudioNode=N;const O=g(E);y(O)&&n(F0,()=>F0(O,T))!==!0&&jS(N),Pf.set(this,N),Ry.set(this,new Set),E.state!=="closed"&&w&&dr(this),r(this,X,N)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(E){this._nativeAudioNode.channelCount=E}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(E){this._nativeAudioNode.channelCountMode=E}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(E){this._nativeAudioNode.channelInterpretation=E}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(E,w=0,N=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw o();const X=g(this._context),O=S(X);if(v(E)||b(E))throw c();if(bc(E)){const z=ge(E);try{const G=Sc(this._nativeAudioNode,z,w,N),$=lc(this);(O||$)&&this._nativeAudioNode.disconnect(...G),this.context.state!=="closed"&&!$&&lc(E)&&dr(E)}catch(G){throw G.code===12?c():G}if(t(this,E,w,N,O)){const G=f([this],E);mf(G,i(O))}return E}const U=bo(E);if(U.name==="playbackRate"&&U.maxValue===1024)throw u();try{this._nativeAudioNode.connect(U,w),(O||lc(this))&&this._nativeAudioNode.disconnect(U,w)}catch(z){throw z.code===12?c():z}if(VS(this,E,w,O)){const z=f([this],E);mf(z,i(O))}}disconnect(E,w,N){let X;const O=g(this._context),U=S(O);if(E===void 0)X=qS(this,U);else if(typeof E=="number"){if(E<0||E>=this.numberOfOutputs)throw o();X=PS(this,U,E)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||bc(E)&&N!==void 0&&(N<0||N>=E.numberOfInputs))throw o();if(X=GS(this,U,E,w,N),X.length===0)throw c()}for(const j of X){const z=f([this],j);mf(z,d)}}},FS=(r,t,n,i,o,c,u,d,f,p,g,y,v)=>(b,S,T,x=null,E=null)=>{const w=T.value,N=new eS(w),X=S?i(N):null,O={get defaultValue(){return w},get maxValue(){return x===null?T.maxValue:x},get minValue(){return E===null?T.minValue:E},get value(){return T.value},set value(U){T.value=U,O.setValueAtTime(U,b.context.currentTime)},cancelAndHoldAtTime(U){if(typeof T.cancelAndHoldAtTime=="function")X===null&&N.flush(b.context.currentTime),N.add(o(U)),T.cancelAndHoldAtTime(U);else{const j=Array.from(N).pop();X===null&&N.flush(b.context.currentTime),N.add(o(U));const z=Array.from(N).pop();T.cancelScheduledValues(U),j!==z&&z!==void 0&&(z.type==="exponentialRampToValue"?T.exponentialRampToValueAtTime(z.value,z.endTime):z.type==="linearRampToValue"?T.linearRampToValueAtTime(z.value,z.endTime):z.type==="setValue"?T.setValueAtTime(z.value,z.startTime):z.type==="setValueCurve"&&T.setValueCurveAtTime(z.values,z.startTime,z.duration))}return O},cancelScheduledValues(U){return X===null&&N.flush(b.context.currentTime),N.add(c(U)),T.cancelScheduledValues(U),O},exponentialRampToValueAtTime(U,j){if(U===0)throw new RangeError;if(!Number.isFinite(j)||j<0)throw new RangeError;const z=b.context.currentTime;return X===null&&N.flush(z),Array.from(N).length===0&&(N.add(p(w,z)),T.setValueAtTime(w,z)),N.add(u(U,j)),T.exponentialRampToValueAtTime(U,j),O},linearRampToValueAtTime(U,j){const z=b.context.currentTime;return X===null&&N.flush(z),Array.from(N).length===0&&(N.add(p(w,z)),T.setValueAtTime(w,z)),N.add(d(U,j)),T.linearRampToValueAtTime(U,j),O},setTargetAtTime(U,j,z){return X===null&&N.flush(b.context.currentTime),N.add(f(U,j,z)),T.setTargetAtTime(U,j,z),O},setValueAtTime(U,j){return X===null&&N.flush(b.context.currentTime),N.add(p(U,j)),T.setValueAtTime(U,j),O},setValueCurveAtTime(U,j,z){const nt=U instanceof Float32Array?U:new Float32Array(U);if(y!==null&&y.name==="webkitAudioContext"){const G=j+z,$=b.context.sampleRate,Q=Math.ceil(j*$),st=Math.floor(G*$),J=st-Q,ot=new Float32Array(J);for(let A=0;A<J;A+=1){const Y=(nt.length-1)/z*((Q+A)/$-j),W=Math.floor(Y),rt=Math.ceil(Y);ot[A]=W===rt?nt[W]:(1-(Y-W))*nt[W]+(1-(rt-Y))*nt[rt]}X===null&&N.flush(b.context.currentTime),N.add(g(ot,j,z)),T.setValueCurveAtTime(ot,j,z);const M=st/$;M<G&&v(O,ot[ot.length-1],M),v(O,nt[nt.length-1],G)}else X===null&&N.flush(b.context.currentTime),N.add(g(nt,j,z)),T.setValueCurveAtTime(nt,j,z);return O}};return n.set(O,T),t.set(O,b),r(O,X),O},YS=r=>({replay(t){for(const n of r)if(n.type==="exponentialRampToValue"){const{endTime:i,value:o}=n;t.exponentialRampToValueAtTime(o,i)}else if(n.type==="linearRampToValue"){const{endTime:i,value:o}=n;t.linearRampToValueAtTime(o,i)}else if(n.type==="setTarget"){const{startTime:i,target:o,timeConstant:c}=n;t.setTargetAtTime(o,i,c)}else if(n.type==="setValue"){const{startTime:i,value:o}=n;t.setValueAtTime(o,i)}else if(n.type==="setValueCurve"){const{duration:i,startTime:o,values:c}=n;t.setValueCurveAtTime(c,o,i)}else throw new Error("Can't apply an unknown automation.")}});class jy{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,n=null){return this._map.forEach((i,o)=>t.call(n,i,o,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const XS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},QS=(r,t,n,i,o,c,u,d,f,p,g,y,v,b)=>class extends t{constructor(T,x,E){var w;const N=d(T),X=f(N),O=g({...XS,...E});v(O);const U=Af.get(N),j=U?.get(x),z=X||N.state!=="closed"?N:(w=u(N))!==null&&w!==void 0?w:N,nt=o(z,X?null:T.baseLatency,p,x,j,O),G=X?i(x,O,j):null;super(T,!0,nt,G);const $=[];nt.parameters.forEach((st,J)=>{const ot=n(this,X,st);$.push([J,ot])}),this._nativeAudioWorkletNode=nt,this._onprocessorerror=null,this._parameters=new jy($),X&&r(N,this);const{activeInputs:Q}=c(this);y(nt,Q)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(T){const x=typeof T=="function"?b(this,T):null;this._nativeAudioWorkletNode.onprocessorerror=x;const E=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=E!==null&&E===x?T:E}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function xc(r,t,n,i,o){if(typeof r.copyFromChannel=="function")t[n].byteLength===0&&(t[n]=new Float32Array(128)),r.copyFromChannel(t[n],i,o);else{const c=r.getChannelData(i);if(t[n].byteLength===0)t[n]=c.slice(o,o+128);else{const u=new Float32Array(c.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(u)}}}const Vy=(r,t,n,i,o)=>{typeof r.copyToChannel=="function"?t[n].byteLength!==0&&r.copyToChannel(t[n],i,o):t[n].byteLength!==0&&r.getChannelData(i).set(t[n],o)},Ec=(r,t)=>{const n=[];for(let i=0;i<r;i+=1){const o=[],c=typeof t=="number"?t:t[i];for(let u=0;u<c;u+=1)o.push(new Float32Array(128));n.push(o)}return n},$S=(r,t)=>{const n=is(Mf,r),i=ge(t);return is(n,i)},ZS=async(r,t,n,i,o,c,u)=>{const d=t===null?Math.ceil(r.context.length/128)*128:t.length,f=i.channelCount*i.numberOfInputs,p=o.reduce((x,E)=>x+E,0),g=p===0?null:n.createBuffer(p,d,n.sampleRate);if(c===void 0)throw new Error("Missing the processor constructor.");const y=fn(r),v=await $S(n,r),b=Ec(i.numberOfInputs,i.channelCount),S=Ec(i.numberOfOutputs,o),T=Array.from(r.parameters.keys()).reduce((x,E)=>({...x,[E]:new Float32Array(128)}),{});for(let x=0;x<d;x+=128){if(i.numberOfInputs>0&&t!==null)for(let E=0;E<i.numberOfInputs;E+=1)for(let w=0;w<i.channelCount;w+=1)xc(t,b[E],w,w,x);c.parameterDescriptors!==void 0&&t!==null&&c.parameterDescriptors.forEach(({name:E},w)=>{xc(t,T,E,f+w,x)});for(let E=0;E<i.numberOfInputs;E+=1)for(let w=0;w<o[E];w+=1)S[E][w].byteLength===0&&(S[E][w]=new Float32Array(128));try{const E=b.map((N,X)=>y.activeInputs[X].size===0?[]:N),w=u(x/n.sampleRate,n.sampleRate,()=>v.process(E,S,T));if(g!==null)for(let N=0,X=0;N<i.numberOfOutputs;N+=1){for(let O=0;O<o[N];O+=1)Vy(g,S[N],O,X+O,x);X+=o[N]}if(!w)break}catch(E){r.dispatchEvent(new ErrorEvent("processorerror",{colno:E.colno,filename:E.filename,lineno:E.lineno,message:E.message}));break}}return g},WS=(r,t,n,i,o,c,u,d,f,p,g,y,v,b,S,T)=>(x,E,w)=>{const N=new WeakMap;let X=null;const O=async(U,j)=>{let z=g(U),nt=null;const G=ln(z,j),$=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(y===null){const Q=$.reduce((M,A)=>M+A,0),st=o(j,{channelCount:Math.max(1,Q),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Q)}),J=[];for(let M=0;M<U.numberOfOutputs;M+=1)J.push(i(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:$[M]}));const ot=u(j,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1});ot.connect=t.bind(null,J),ot.disconnect=f.bind(null,J),nt=[st,J,ot]}else G||(z=new y(j,x));if(N.set(j,nt===null?z:nt[2]),nt!==null){if(X===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(v===null)throw new Error("Missing the native OfflineAudioContext constructor.");const A=U.channelCount*U.numberOfInputs,Y=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,W=A+Y;X=ZS(U,W===0?null:await(async()=>{const R=new v(W,Math.ceil(U.context.length/128)*128,j.sampleRate),F=[],it=[];for(let D=0;D<E.numberOfInputs;D+=1)F.push(u(R,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),it.push(o(R,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));const ut=await Promise.all(Array.from(U.parameters.values()).map(async D=>{const ht=c(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D.value});return await b(R,D,ht.offset),ht})),I=i(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,A+Y)});for(let D=0;D<E.numberOfInputs;D+=1){F[D].connect(it[D]);for(let ht=0;ht<E.channelCount;ht+=1)it[D].connect(I,ht,D*E.channelCount+ht)}for(const[D,ht]of ut.entries())ht.connect(I,0,A+D),ht.start(0);return I.connect(R.destination),await Promise.all(F.map(D=>S(U,R,D))),T(R)})(),j,E,$,w,p)}const Q=await X,st=n(j,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[J,ot,M]=nt;Q!==null&&(st.buffer=Q,st.start(0)),st.connect(J);for(let A=0,Y=0;A<U.numberOfOutputs;A+=1){const W=ot[A];for(let rt=0;rt<$[A];rt+=1)J.connect(W,Y+rt,rt);Y+=$[A]}return M}if(G)for(const[Q,st]of U.parameters.entries())await r(j,st,z.parameters.get(Q));else for(const[Q,st]of U.parameters.entries())await b(j,st,z.parameters.get(Q));return await S(U,j,z),z};return{render(U,j){d(j,U);const z=N.get(j);return z!==void 0?Promise.resolve(z):O(U,j)}}},KS=(r,t,n,i,o,c,u,d,f,p,g,y,v,b,S,T,x,E,w,N)=>class extends S{constructor(O,U){super(O,U),this._nativeContext=O,this._audioWorklet=r===void 0?void 0:{addModule:(j,z)=>r(this,j,z)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new o(this)}createBuffer(O,U,j){return new n({length:U,numberOfChannels:O,sampleRate:j})}createBufferSource(){return new i(this)}createChannelMerger(O=6){return new c(this,{numberOfInputs:O})}createChannelSplitter(O=6){return new u(this,{numberOfOutputs:O})}createConstantSource(){return new d(this)}createConvolver(){return new f(this)}createDelay(O=1){return new g(this,{maxDelayTime:O})}createDynamicsCompressor(){return new y(this)}createGain(){return new v(this)}createIIRFilter(O,U){return new b(this,{feedback:U,feedforward:O})}createOscillator(){return new T(this)}createPanner(){return new x(this)}createPeriodicWave(O,U,j={disableNormalization:!1}){return new E(this,{...j,imag:U,real:O})}createStereoPanner(){return new w(this)}createWaveShaper(){return new N(this)}decodeAudioData(O,U,j){return p(this._nativeContext,O).then(z=>(typeof U=="function"&&U(z),z),z=>{throw typeof j=="function"&&j(z),z})}},JS={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},tC=(r,t,n,i,o,c,u,d)=>class extends r{constructor(p,g){const y=c(p),v={...JS,...g},b=o(y,v),S=u(y),T=S?n():null;super(p,!1,b,T),this._Q=t(this,S,b.Q,hn,An),this._detune=t(this,S,b.detune,1200*Math.log2(hn),-1200*Math.log2(hn)),this._frequency=t(this,S,b.frequency,p.sampleRate/2,0),this._gain=t(this,S,b.gain,40*Math.log10(hn),An),this._nativeBiquadFilterNode=b,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,g,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,g,y)}catch(v){throw v.code===11?i():v}if(p.length!==g.length||g.length!==y.length)throw i()}},eC=(r,t,n,i,o)=>()=>{const c=new WeakMap,u=async(d,f)=>{let p=n(d);const g=ln(p,f);if(!g){const y={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=t(f,y)}return c.set(f,p),g?(await r(f,d.Q,p.Q),await r(f,d.detune,p.detune),await r(f,d.frequency,p.frequency),await r(f,d.gain,p.gain)):(await i(f,d.Q,p.Q),await i(f,d.detune,p.detune),await i(f,d.frequency,p.frequency),await i(f,d.gain,p.gain)),await o(d,f,p),p};return{render(d,f){const p=c.get(f);return p!==void 0?Promise.resolve(p):u(d,f)}}},nC=(r,t)=>(n,i)=>{const o=t.get(n);if(o!==void 0)return o;const c=r.get(n);if(c!==void 0)return c;try{const u=i();return u instanceof Promise?(r.set(n,u),u.catch(()=>!1).then(d=>(r.delete(n),t.set(n,d),d))):(t.set(n,u),u)}catch{return t.set(n,!1),!1}},sC={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},iC=(r,t,n,i,o)=>class extends r{constructor(u,d){const f=i(u),p={...sC,...d},g=n(f,p),y=o(f)?t():null;super(u,!1,g,y)}},aC=(r,t,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=t(c);if(!ln(d,u)){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfInputs:d.numberOfInputs};d=r(u,p)}return i.set(u,d),await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},rC={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},oC=(r,t,n,i,o,c)=>class extends r{constructor(d,f){const p=i(d),g=c({...rC,...f}),y=n(p,g),v=o(p)?t():null;super(d,!1,y,v)}},lC=(r,t,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=t(c);if(!ln(d,u)){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfOutputs:d.numberOfOutputs};d=r(u,p)}return i.set(u,d),await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},cC=r=>(t,n,i)=>r(n,t,i),uC=r=>(t,n,i=0,o=0)=>{const c=t[i];if(c===void 0)throw r();return Tc(n)?c.connect(n,0,o):c.connect(n,0)},hC=r=>(t,n)=>{const i=r(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=t.createBuffer(1,2,44100);return i.buffer=o,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}},fC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},dC=(r,t,n,i,o,c,u)=>class extends r{constructor(f,p){const g=o(f),y={...fC,...p},v=i(g,y),b=c(g),S=b?n():null;super(f,!1,v,S),this._constantSourceNodeRenderer=S,this._nativeConstantSourceNode=v,this._offset=t(this,b,v.offset,hn,An),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const p=typeof f=="function"?u(this,f):null;this._nativeConstantSourceNode.onended=p;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===p?f:g}start(f=0){if(this._nativeConstantSourceNode.start(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=f),this.context.state!=="closed"){dr(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),Xs(this)&&Ao(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(f=0){this._nativeConstantSourceNode.stop(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=f)}},pC=(r,t,n,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const f=async(p,g)=>{let y=n(p);const v=ln(y,g);if(!v){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value};y=t(g,b),u!==null&&y.start(u),d!==null&&y.stop(d)}return c.set(g,y),v?await r(g,p.offset,y.offset):await i(g,p.offset,y.offset),await o(p,g,y),y};return{set start(p){u=p},set stop(p){d=p},render(p,g){const y=c.get(g);return y!==void 0?Promise.resolve(y):f(p,g)}}},mC=r=>t=>(r[0]=t,r[0]),gC={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},yC=(r,t,n,i,o,c)=>class extends r{constructor(d,f){const p=i(d),g={...gC,...f},y=n(p,g),b=o(p)?t():null;super(d,!1,y,b),this._isBufferNullified=!1,this._nativeConvolverNode=y,g.buffer!==null&&c(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,d===null&&this._nativeConvolverNode.buffer!==null){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}},_C=(r,t,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=t(c);if(!ln(d,u)){const p={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,disableNormalization:!d.normalize};d=r(u,p)}return i.set(u,d),yr(d)?await n(c,u,d.inputs[0]):await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},vC=(r,t)=>(n,i,o)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,i,o)}catch(c){throw c.name==="SyntaxError"?r():c}},bC=()=>new DOMException("","DataCloneError"),Y0=r=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(i=>{const o=()=>{n.onmessage=null,t.close(),n.close(),i()};n.onmessage=()=>o();try{t.postMessage(r,[r])}catch{}finally{o()}})},SC=(r,t,n,i,o,c,u,d,f,p,g)=>(y,v)=>{const b=u(y)?y:c(y);if(o.has(v)){const S=n();return Promise.reject(S)}try{o.add(v)}catch{}return t(f,()=>f(b))?b.decodeAudioData(v).then(S=>(Y0(v).catch(()=>{}),t(d,()=>d(S))||g(S),r.add(S),S)):new Promise((S,T)=>{const x=async()=>{try{await Y0(v)}catch{}},E=w=>{T(w),x()};try{b.decodeAudioData(v,w=>{typeof w.copyFromChannel!="function"&&(p(w),Hf(w)),r.add(w),x().then(()=>S(w))},w=>{E(w===null?i():w)})}catch(w){E(w)}})},CC=(r,t,n,i,o,c,u,d)=>(f,p)=>{const g=t.get(f);if(g===void 0)throw new Error("Missing the expected cycle count.");const y=c(f.context),v=d(y);if(g===p){if(t.delete(f),!v&&u(f)){const b=i(f),{outputs:S}=n(f);for(const T of S)if(Ro(T)){const x=i(T[0]);r(b,x,T[1],T[2])}else{const x=o(T[0]);b.connect(x,T[1])}}}else t.set(f,g-p)},TC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},xC=(r,t,n,i,o,c,u)=>class extends r{constructor(f,p){const g=o(f),y={...TC,...p},v=i(g,y),b=c(g),S=b?n(y.maxDelayTime):null;super(f,!1,v,S),this._delayTime=t(this,b,v.delayTime),u(this,y.maxDelayTime)}get delayTime(){return this._delayTime}},EC=(r,t,n,i,o)=>c=>{const u=new WeakMap,d=async(f,p)=>{let g=n(f);const y=ln(g,p);if(!y){const v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:c};g=t(p,v)}return u.set(p,g),y?await r(p,f.delayTime,g.delayTime):await i(p,f.delayTime,g.delayTime),await o(f,p,g),g};return{render(f,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):d(f,p)}}},AC=r=>(t,n,i,o)=>r(t[o],c=>c[0]===n&&c[1]===i),MC=r=>(t,n)=>{r(t).delete(n)},RC=r=>"delayTime"in r,kC=(r,t,n)=>function i(o,c){const u=bc(c)?c:n(r,c);if(RC(u))return[];if(o[0]===u)return[o];if(o.includes(u))return[];const{outputs:d}=t(u);return Array.from(d).map(f=>i([...o,u],f[0])).reduce((f,p)=>f.concat(p),[])},ec=(r,t,n)=>{const i=t[n];if(i===void 0)throw r();return i},OC=r=>(t,n=void 0,i=void 0,o=0)=>n===void 0?t.forEach(c=>c.disconnect()):typeof n=="number"?ec(r,t,n).disconnect():Tc(n)?i===void 0?t.forEach(c=>c.disconnect(n)):o===void 0?ec(r,t,i).disconnect(n,0):ec(r,t,i).disconnect(n,0,o):i===void 0?t.forEach(c=>c.disconnect(n)):ec(r,t,i).disconnect(n,0),NC={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},DC=(r,t,n,i,o,c,u,d)=>class extends r{constructor(p,g){const y=c(p),v={...NC,...g},b=i(y,v),S=u(y),T=S?n():null;super(p,!1,b,T),this._attack=t(this,S,b.attack),this._knee=t(this,S,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=t(this,S,b.ratio),this._release=t(this,S,b.release),this._threshold=t(this,S,b.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=g,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},wC=(r,t,n,i,o)=>()=>{const c=new WeakMap,u=async(d,f)=>{let p=n(d);const g=ln(p,f);if(!g){const y={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=t(f,y)}return c.set(f,p),g?(await r(f,d.attack,p.attack),await r(f,d.knee,p.knee),await r(f,d.ratio,p.ratio),await r(f,d.release,p.release),await r(f,d.threshold,p.threshold)):(await i(f,d.attack,p.attack),await i(f,d.knee,p.knee),await i(f,d.ratio,p.ratio),await i(f,d.release,p.release),await i(f,d.threshold,p.threshold)),await o(d,f,p),p};return{render(d,f){const p=c.get(f);return p!==void 0?Promise.resolve(p):u(d,f)}}},LC=()=>new DOMException("","EncodingError"),zC=r=>t=>new Promise((n,i)=>{if(r===null){i(new SyntaxError);return}const o=r.document.head;if(o===null)i(new SyntaxError);else{const c=r.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),d=URL.createObjectURL(u),f=r.onerror,p=()=>{r.onerror=f,URL.revokeObjectURL(d)};r.onerror=(g,y,v,b,S)=>{if(y===d||y===r.location.href&&v===1&&b===1)return p(),i(S),!1;if(f!==null)return f(g,y,v,b,S)},c.onerror=()=>{p(),i(new SyntaxError)},c.onload=()=>{p(),n()},c.src=d,c.type="module",o.appendChild(c)}}),BC=r=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,i,o){if(i!==null){let c=this._listeners.get(i);c===void 0&&(c=r(this,i),typeof i=="function"&&this._listeners.set(i,c)),this._nativeEventTarget.addEventListener(n,c,o)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,i,o){const c=i===null?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(n,c===void 0?null:c,o)}},jC=r=>(t,n,i)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(t*n)}},currentTime:{configurable:!0,get(){return t}}});try{return i()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},VC=r=>async t=>{try{const n=await fetch(t);if(n.ok)return[await n.text(),n.url]}catch{}throw r()},UC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},IC=(r,t,n,i,o,c)=>class extends r{constructor(d,f){const p=o(d),g={...UC,...f},y=i(p,g),v=c(p),b=v?n():null;super(d,!1,y,b),this._gain=t(this,v,y.gain,hn,An)}get gain(){return this._gain}},qC=(r,t,n,i,o)=>()=>{const c=new WeakMap,u=async(d,f)=>{let p=n(d);const g=ln(p,f);if(!g){const y={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=t(f,y)}return c.set(f,p),g?await r(f,d.gain,p.gain):await i(f,d.gain,p.gain),await o(d,f,p),p};return{render(d,f){const p=c.get(f);return p!==void 0?Promise.resolve(p):u(d,f)}}},PC=(r,t)=>n=>t(r,n),GC=r=>t=>{const n=r(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},HC=r=>t=>{var n;return(n=r.get(t))!==null&&n!==void 0?n:0},FC=r=>t=>{const n=r(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},YC=r=>t=>r.get(t),Fe=()=>new DOMException("","InvalidStateError"),XC=r=>t=>{const n=r.get(t);if(n===void 0)throw Fe();return n},QC=(r,t)=>n=>{let i=r.get(n);if(i!==void 0)return i;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new t(1,1,44100),r.set(n,i),i},$C=r=>t=>{const n=r.get(t);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Bc=()=>new DOMException("","InvalidAccessError"),ZC=r=>{r.getFrequencyResponse=(t=>(n,i,o)=>{if(n.length!==i.length||i.length!==o.length)throw Bc();return t.call(r,n,i,o)})(r.getFrequencyResponse)},WC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},KC=(r,t,n,i,o,c)=>class extends r{constructor(d,f){const p=i(d),g=o(p),y={...WC,...f},v=t(p,g?null:d.baseLatency,y),b=g?n(y.feedback,y.feedforward):null;super(d,!1,v,b),ZC(v),this._nativeIIRFilterNode=v,c(this,1)}getFrequencyResponse(d,f,p){return this._nativeIIRFilterNode.getFrequencyResponse(d,f,p)}},Uy=(r,t,n,i,o,c,u,d,f,p,g)=>{const y=p.length;let v=d;for(let b=0;b<y;b+=1){let S=n[0]*p[b];for(let T=1;T<o;T+=1){const x=v-T&f-1;S+=n[T]*c[x],S-=r[T]*u[x]}for(let T=o;T<i;T+=1)S+=n[T]*c[v-T&f-1];for(let T=o;T<t;T+=1)S-=r[T]*u[v-T&f-1];c[v]=p[b],u[v]=S,v=v+1&f-1,g[b]=S}return v},JC=(r,t,n,i)=>{const o=n instanceof Float64Array?n:new Float64Array(n),c=i instanceof Float64Array?i:new Float64Array(i),u=o.length,d=c.length,f=Math.min(u,d);if(o[0]!==1){for(let S=0;S<u;S+=1)c[S]/=o[0];for(let S=1;S<d;S+=1)o[S]/=o[0]}const p=32,g=new Float32Array(p),y=new Float32Array(p),v=t.createBuffer(r.numberOfChannels,r.length,r.sampleRate),b=r.numberOfChannels;for(let S=0;S<b;S+=1){const T=r.getChannelData(S),x=v.getChannelData(S);g.fill(0),y.fill(0),Uy(o,u,c,d,f,g,y,0,p,T,x)}return v},tT=(r,t,n,i,o)=>(c,u)=>{const d=new WeakMap;let f=null;const p=async(g,y)=>{let v=null,b=t(g);const S=ln(b,y);if(y.createIIRFilter===void 0?v=r(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(b=y.createIIRFilter(u,c)),d.set(y,v===null?b:v),v!==null){if(f===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const x=new n(g.context.destination.channelCount,g.context.length,y.sampleRate);f=(async()=>{await i(g,x,x.destination);const E=await o(x);return JC(E,y,c,u)})()}const T=await f;return v.buffer=T,v.start(0),v}return await i(g,y,b),b};return{render(g,y){const v=d.get(y);return v!==void 0?Promise.resolve(v):p(g,y)}}},eT=(r,t,n,i,o,c)=>u=>(d,f)=>{const p=r.get(d);if(p===void 0){if(!u&&c(d)){const g=i(d),{outputs:y}=n(d);for(const v of y)if(Ro(v)){const b=i(v[0]);t(g,b,v[1],v[2])}else{const b=o(v[0]);g.disconnect(b,v[1])}}r.set(d,f)}else r.set(d,p+f)},nT=(r,t)=>n=>{const i=r.get(n);return t(i)||t(n)},sT=(r,t)=>n=>r.has(n)||t(n),iT=(r,t)=>n=>r.has(n)||t(n),aT=(r,t)=>n=>{const i=r.get(n);return t(i)||t(n)},rT=r=>t=>r!==null&&t instanceof r,oT=r=>t=>r!==null&&typeof r.AudioNode=="function"&&t instanceof r.AudioNode,lT=r=>t=>r!==null&&typeof r.AudioParam=="function"&&t instanceof r.AudioParam,cT=(r,t)=>n=>r(n)||t(n),uT=r=>t=>r!==null&&t instanceof r,hT=r=>r!==null&&r.isSecureContext,fT=(r,t,n,i)=>class extends r{constructor(c,u){const d=n(c),f=t(d,u);if(i(d))throw TypeError();super(c,!0,f,null),this._nativeMediaElementAudioSourceNode=f}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},dT={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},pT=(r,t,n,i)=>class extends r{constructor(c,u){const d=n(c);if(i(d))throw new TypeError;const f={...dT,...u},p=t(d,f);super(c,!1,p,null),this._nativeMediaStreamAudioDestinationNode=p}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},mT=(r,t,n,i)=>class extends r{constructor(c,u){const d=n(c),f=t(d,u);if(i(d))throw new TypeError;super(c,!0,f,null),this._nativeMediaStreamAudioSourceNode=f}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},gT=(r,t,n)=>class extends r{constructor(o,c){const u=n(o),d=t(u,c);super(o,!0,d,null)}},yT=(r,t,n,i,o,c)=>class extends n{constructor(d,f){super(d),this._nativeContext=d,Lc.set(this,d),i(d)&&o.set(d,new Set),this._destination=new r(this,f),this._listener=t(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const f=typeof d=="function"?c(this,d):null;this._nativeContext.onstatechange=f;const p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===f?d:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},So=r=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=r.decodeAudioData(t.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},_T=(r,t)=>(n,i,o)=>{const c=new Set;return n.connect=(u=>(d,f=0,p=0)=>{const g=c.size===0;if(t(d))return u.call(n,d,f,p),r(c,[d,f,p],y=>y[0]===d&&y[1]===f&&y[2]===p,!0),g&&i(),d;u.call(n,d,f),r(c,[d,f],y=>y[0]===d&&y[1]===f,!0),g&&i()})(n.connect),n.disconnect=(u=>(d,f,p)=>{const g=c.size>0;if(d===void 0)u.apply(n),c.clear();else if(typeof d=="number"){u.call(n,d);for(const v of c)v[1]===d&&c.delete(v)}else{t(d)?u.call(n,d,f,p):u.call(n,d,f);for(const v of c)v[0]===d&&(f===void 0||v[1]===f)&&(p===void 0||v[2]===p)&&c.delete(v)}const y=c.size===0;g&&y&&o()})(n.disconnect),n},_e=(r,t,n)=>{const i=t[n];i!==void 0&&i!==r[n]&&(r[n]=i)},Pe=(r,t)=>{_e(r,t,"channelCount"),_e(r,t,"channelCountMode"),_e(r,t,"channelInterpretation")},X0=r=>typeof r.getFloatTimeDomainData=="function",vT=r=>{r.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);r.getByteTimeDomainData(n);const i=Math.max(n.length,r.fftSize);for(let o=0;o<i;o+=1)t[o]=(n[o]-128)*.0078125;return t}},bT=(r,t)=>(n,i)=>{const o=n.createAnalyser();if(Pe(o,i),!(i.maxDecibels>i.minDecibels))throw t();return _e(o,i,"fftSize"),_e(o,i,"maxDecibels"),_e(o,i,"minDecibels"),_e(o,i,"smoothingTimeConstant"),r(X0,()=>X0(o))||vT(o),o},ST=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,xe=(r,t,n)=>{const i=t[n];i!==void 0&&i!==r[n].value&&(r[n].value=i)},CT=r=>{r.start=(t=>{let n=!1;return(i=0,o=0,c)=>{if(n)throw Fe();t.call(r,i,o,c),n=!0}})(r.start)},Xf=r=>{r.start=(t=>(n=0,i=0,o)=>{if(typeof o=="number"&&o<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(r,n,i,o)})(r.start)},Qf=r=>{r.stop=(t=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(r,n)})(r.stop)},TT=(r,t,n,i,o,c,u,d,f,p,g)=>(y,v)=>{const b=y.createBufferSource();return Pe(b,v),xe(b,v,"playbackRate"),_e(b,v,"buffer"),_e(b,v,"loop"),_e(b,v,"loopEnd"),_e(b,v,"loopStart"),t(n,()=>n(y))||CT(b),t(i,()=>i(y))||f(b),t(o,()=>o(y))||p(b,y),t(c,()=>c(y))||Xf(b),t(u,()=>u(y))||g(b,y),t(d,()=>d(y))||Qf(b),r(y,b),b},xT=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,ET=(r,t)=>(n,i,o)=>{const c=n.destination;if(c.channelCount!==i)try{c.channelCount=i}catch{}o&&c.channelCountMode!=="explicit"&&(c.channelCountMode="explicit"),c.maxChannelCount===0&&Object.defineProperty(c,"maxChannelCount",{value:i});const u=r(n,{channelCount:i,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(u,"channelCount",d=>()=>d.call(u),d=>f=>{d.call(u,f);try{c.channelCount=f}catch(p){if(f>c.maxChannelCount)throw p}}),t(u,"channelCountMode",d=>()=>d.call(u),d=>f=>{d.call(u,f),c.channelCountMode=f}),t(u,"channelInterpretation",d=>()=>d.call(u),d=>f=>{d.call(u,f),c.channelInterpretation=f}),Object.defineProperty(u,"maxChannelCount",{get:()=>c.maxChannelCount}),u.connect(c),u},AT=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,MT=r=>{const{port1:t}=new MessageChannel;try{t.postMessage(r)}finally{t.close()}},RT=(r,t,n,i,o)=>(c,u,d,f,p,g)=>{if(d!==null)try{const y=new d(c,f,g),v=new Map;let b=null;if(Object.defineProperties(y,{channelCount:{get:()=>g.channelCount,set:()=>{throw r()}},channelCountMode:{get:()=>"explicit",set:()=>{throw r()}},onprocessorerror:{get:()=>b,set:S=>{typeof b=="function"&&y.removeEventListener("processorerror",b),b=typeof S=="function"?S:null,typeof b=="function"&&y.addEventListener("processorerror",b)}}}),y.addEventListener=(S=>(...T)=>{if(T[0]==="processorerror"){const x=typeof T[1]=="function"?T[1]:typeof T[1]=="object"&&T[1]!==null&&typeof T[1].handleEvent=="function"?T[1].handleEvent:null;if(x!==null){const E=v.get(T[1]);E!==void 0?T[1]=E:(T[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),x(w)):x(new ErrorEvent(T[0],{...w}))},v.set(x,T[1]))}}return S.call(y,"error",T[1],T[2]),S.call(y,...T)})(y.addEventListener),y.removeEventListener=(S=>(...T)=>{if(T[0]==="processorerror"){const x=v.get(T[1]);x!==void 0&&(v.delete(T[1]),T[1]=x)}return S.call(y,"error",T[1],T[2]),S.call(y,T[0],T[1],T[2])})(y.removeEventListener),g.numberOfOutputs!==0){const S=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(S).connect(c.destination),o(y,()=>S.disconnect(),()=>S.connect(c.destination))}return y}catch(y){throw y.code===11?i():y}if(p===void 0)throw i();return MT(g),t(c,u,p,g)},Iy=(r,t)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*t))))),kT=r=>new Promise((t,n)=>{const{port1:i,port2:o}=new MessageChannel;i.onmessage=({data:c})=>{i.close(),o.close(),t(c)},i.onmessageerror=({data:c})=>{i.close(),o.close(),n(c)},o.postMessage(r)}),OT=async(r,t)=>{const n=await kT(t);return new r(n)},NT=(r,t,n,i)=>{let o=Mf.get(r);o===void 0&&(o=new WeakMap,Mf.set(r,o));const c=OT(n,i);return o.set(t,c),c},DT=(r,t,n,i,o,c,u,d,f,p,g,y,v)=>(b,S,T,x)=>{if(x.numberOfInputs===0&&x.numberOfOutputs===0)throw f();const E=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(E.some(ct=>ct<1))throw f();if(E.length!==x.numberOfOutputs)throw t();if(x.channelCountMode!=="explicit")throw f();const w=x.channelCount*x.numberOfInputs,N=E.reduce((ct,pt)=>ct+pt,0),X=T.parameterDescriptors===void 0?0:T.parameterDescriptors.length;if(w+X>6||N>6)throw f();const O=new MessageChannel,U=[],j=[];for(let ct=0;ct<x.numberOfInputs;ct+=1)U.push(u(b,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),j.push(o(b,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));const z=[];if(T.parameterDescriptors!==void 0)for(const{defaultValue:ct,maxValue:pt,minValue:zt,name:Lt}of T.parameterDescriptors){const vt=c(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:x.parameterData[Lt]!==void 0?x.parameterData[Lt]:ct===void 0?0:ct});Object.defineProperties(vt.offset,{defaultValue:{get:()=>ct===void 0?0:ct},maxValue:{get:()=>pt===void 0?hn:pt},minValue:{get:()=>zt===void 0?An:zt}}),z.push(vt)}const nt=i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+X)}),G=Iy(S,b.sampleRate),$=d(b,G,w+X,Math.max(1,N)),Q=o(b,{channelCount:Math.max(1,N),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,N)}),st=[];for(let ct=0;ct<x.numberOfOutputs;ct+=1)st.push(i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:E[ct]}));for(let ct=0;ct<x.numberOfInputs;ct+=1){U[ct].connect(j[ct]);for(let pt=0;pt<x.channelCount;pt+=1)j[ct].connect(nt,pt,ct*x.channelCount+pt)}const J=new jy(T.parameterDescriptors===void 0?[]:T.parameterDescriptors.map(({name:ct},pt)=>{const zt=z[pt];return zt.connect(nt,0,w+pt),zt.start(0),[ct,zt.offset]}));nt.connect($);let ot=x.channelInterpretation,M=null;const A=x.numberOfOutputs===0?[$]:st,Y={get bufferSize(){return G},get channelCount(){return x.channelCount},set channelCount(ct){throw n()},get channelCountMode(){return x.channelCountMode},set channelCountMode(ct){throw n()},get channelInterpretation(){return ot},set channelInterpretation(ct){for(const pt of U)pt.channelInterpretation=ct;ot=ct},get context(){return $.context},get inputs(){return U},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get onprocessorerror(){return M},set onprocessorerror(ct){typeof M=="function"&&Y.removeEventListener("processorerror",M),M=typeof ct=="function"?ct:null,typeof M=="function"&&Y.addEventListener("processorerror",M)},get parameters(){return J},get port(){return O.port2},addEventListener(...ct){return $.addEventListener(ct[0],ct[1],ct[2])},connect:r.bind(null,A),disconnect:p.bind(null,A),dispatchEvent(...ct){return $.dispatchEvent(ct[0])},removeEventListener(...ct){return $.removeEventListener(ct[0],ct[1],ct[2])}},W=new Map;O.port1.addEventListener=(ct=>(...pt)=>{if(pt[0]==="message"){const zt=typeof pt[1]=="function"?pt[1]:typeof pt[1]=="object"&&pt[1]!==null&&typeof pt[1].handleEvent=="function"?pt[1].handleEvent:null;if(zt!==null){const Lt=W.get(pt[1]);Lt!==void 0?pt[1]=Lt:(pt[1]=vt=>{g(b.currentTime,b.sampleRate,()=>zt(vt))},W.set(zt,pt[1]))}}return ct.call(O.port1,pt[0],pt[1],pt[2])})(O.port1.addEventListener),O.port1.removeEventListener=(ct=>(...pt)=>{if(pt[0]==="message"){const zt=W.get(pt[1]);zt!==void 0&&(W.delete(pt[1]),pt[1]=zt)}return ct.call(O.port1,pt[0],pt[1],pt[2])})(O.port1.removeEventListener);let rt=null;Object.defineProperty(O.port1,"onmessage",{get:()=>rt,set:ct=>{typeof rt=="function"&&O.port1.removeEventListener("message",rt),rt=typeof ct=="function"?ct:null,typeof rt=="function"&&(O.port1.addEventListener("message",rt),O.port1.start())}}),T.prototype.port=O.port1;let R=null;NT(b,Y,T,x).then(ct=>R=ct);const it=Ec(x.numberOfInputs,x.channelCount),ut=Ec(x.numberOfOutputs,E),I=T.parameterDescriptors===void 0?[]:T.parameterDescriptors.reduce((ct,{name:pt})=>({...ct,[pt]:new Float32Array(128)}),{});let D=!0;const ht=()=>{x.numberOfOutputs>0&&$.disconnect(Q);for(let ct=0,pt=0;ct<x.numberOfOutputs;ct+=1){const zt=st[ct];for(let Lt=0;Lt<E[ct];Lt+=1)Q.disconnect(zt,pt+Lt,Lt);pt+=E[ct]}},lt=new Map;$.onaudioprocess=({inputBuffer:ct,outputBuffer:pt})=>{if(R!==null){const zt=y(Y);for(let Lt=0;Lt<G;Lt+=128){for(let vt=0;vt<x.numberOfInputs;vt+=1)for(let kt=0;kt<x.channelCount;kt+=1)xc(ct,it[vt],kt,kt,Lt);T.parameterDescriptors!==void 0&&T.parameterDescriptors.forEach(({name:vt},kt)=>{xc(ct,I,vt,w+kt,Lt)});for(let vt=0;vt<x.numberOfInputs;vt+=1)for(let kt=0;kt<E[vt];kt+=1)ut[vt][kt].byteLength===0&&(ut[vt][kt]=new Float32Array(128));try{const vt=it.map((ie,Nt)=>{if(zt[Nt].size>0)return lt.set(Nt,G/128),ie;const de=lt.get(Nt);return de===void 0?[]:(ie.every(Yt=>Yt.every(Ee=>Ee===0))&&(de===1?lt.delete(Nt):lt.set(Nt,de-1)),ie)});D=g(b.currentTime+Lt/b.sampleRate,b.sampleRate,()=>R.process(vt,ut,I));for(let ie=0,Nt=0;ie<x.numberOfOutputs;ie+=1){for(let Dt=0;Dt<E[ie];Dt+=1)Vy(pt,ut[ie],Dt,Nt+Dt,Lt);Nt+=E[ie]}}catch(vt){D=!1,Y.dispatchEvent(new ErrorEvent("processorerror",{colno:vt.colno,filename:vt.filename,lineno:vt.lineno,message:vt.message}))}if(!D){for(let vt=0;vt<x.numberOfInputs;vt+=1){U[vt].disconnect(j[vt]);for(let kt=0;kt<x.channelCount;kt+=1)j[Lt].disconnect(nt,kt,vt*x.channelCount+kt)}if(T.parameterDescriptors!==void 0){const vt=T.parameterDescriptors.length;for(let kt=0;kt<vt;kt+=1){const ie=z[kt];ie.disconnect(nt,0,w+kt),ie.stop()}}nt.disconnect($),$.onaudioprocess=null,yt?ht():fe();break}}}};let yt=!1;const Ot=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Gt=()=>$.connect(Ot).connect(b.destination),fe=()=>{$.disconnect(Ot),Ot.disconnect()},cn=()=>{if(D){fe(),x.numberOfOutputs>0&&$.connect(Q);for(let ct=0,pt=0;ct<x.numberOfOutputs;ct+=1){const zt=st[ct];for(let Lt=0;Lt<E[ct];Lt+=1)Q.connect(zt,pt+Lt,Lt);pt+=E[ct]}}yt=!0},Ve=()=>{D&&(Gt(),ht()),yt=!1};return Gt(),v(Y,cn,Ve)},qy=(r,t)=>{const n=r.createBiquadFilter();return Pe(n,t),xe(n,t,"Q"),xe(n,t,"detune"),xe(n,t,"frequency"),xe(n,t,"gain"),_e(n,t,"type"),n},wT=(r,t)=>(n,i)=>{const o=n.createChannelMerger(i.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&t(n,o),Pe(o,i),o},LT=r=>{const t=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>t,set:n=>{if(n!==t)throw Fe()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Fe()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Fe()}})},ko=(r,t)=>{const n=r.createChannelSplitter(t.numberOfOutputs);return Pe(n,t),LT(n),n},zT=(r,t,n,i,o)=>(c,u)=>{if(c.createConstantSource===void 0)return n(c,u);const d=c.createConstantSource();return Pe(d,u),xe(d,u,"offset"),t(i,()=>i(c))||Xf(d),t(o,()=>o(c))||Qf(d),r(c,d),d},_r=(r,t)=>(r.connect=t.connect.bind(t),r.disconnect=t.disconnect.bind(t),r),BT=(r,t,n,i)=>(o,{offset:c,...u})=>{const d=o.createBuffer(1,2,44100),f=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=n(o,{...u,gain:c}),g=d.getChannelData(0);g[0]=1,g[1]=1,f.buffer=d,f.loop=!0;const y={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(S){p.channelCount=S},get channelCountMode(){return p.channelCountMode},set channelCountMode(S){p.channelCountMode=S},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(S){p.channelInterpretation=S},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return f.onended},set onended(S){f.onended=S},addEventListener(...S){return f.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return f.dispatchEvent(S[0])},removeEventListener(...S){return f.removeEventListener(S[0],S[1],S[2])},start(S=0){f.start.call(f,S)},stop(S=0){f.stop.call(f,S)}},v=()=>f.connect(p),b=()=>f.disconnect(p);return r(o,f),i(_r(y,p),v,b)},jT=(r,t)=>(n,i)=>{const o=n.createConvolver();if(Pe(o,i),i.disableNormalization===o.normalize&&(o.normalize=!i.disableNormalization),_e(o,i,"buffer"),i.channelCount>2||(t(o,"channelCount",c=>()=>c.call(o),c=>u=>{if(u>2)throw r();return c.call(o,u)}),i.channelCountMode==="max"))throw r();return t(o,"channelCountMode",c=>()=>c.call(o),c=>u=>{if(u==="max")throw r();return c.call(o,u)}),o},Py=(r,t)=>{const n=r.createDelay(t.maxDelayTime);return Pe(n,t),xe(n,t,"delayTime"),n},VT=r=>(t,n)=>{const i=t.createDynamicsCompressor();if(Pe(i,n),n.channelCount>2||n.channelCountMode==="max")throw r();return xe(i,n,"attack"),xe(i,n,"knee"),xe(i,n,"ratio"),xe(i,n,"release"),xe(i,n,"threshold"),i},Rn=(r,t)=>{const n=r.createGain();return Pe(n,t),xe(n,t,"gain"),n},UT=r=>(t,n,i)=>{if(t.createIIRFilter===void 0)return r(t,n,i);const o=t.createIIRFilter(i.feedforward,i.feedback);return Pe(o,i),o};function IT(r,t){const n=t[0]*t[0]+t[1]*t[1];return[(r[0]*t[0]+r[1]*t[1])/n,(r[1]*t[0]-r[0]*t[1])/n]}function qT(r,t){return[r[0]*t[0]-r[1]*t[1],r[0]*t[1]+r[1]*t[0]]}function Q0(r,t){let n=[0,0];for(let i=r.length-1;i>=0;i-=1)n=qT(n,t),n[0]+=r[i];return n}const PT=(r,t,n,i)=>(o,c,{channelCount:u,channelCountMode:d,channelInterpretation:f,feedback:p,feedforward:g})=>{const y=Iy(c,o.sampleRate),v=p instanceof Float64Array?p:new Float64Array(p),b=g instanceof Float64Array?g:new Float64Array(g),S=v.length,T=b.length,x=Math.min(S,T);if(S===0||S>20)throw i();if(v[0]===0)throw t();if(T===0||T>20)throw i();if(b[0]===0)throw t();if(v[0]!==1){for(let z=0;z<T;z+=1)b[z]/=v[0];for(let z=1;z<S;z+=1)v[z]/=v[0]}const E=n(o,y,u,u);E.channelCount=u,E.channelCountMode=d,E.channelInterpretation=f;const w=32,N=[],X=[],O=[];for(let z=0;z<u;z+=1){N.push(0);const nt=new Float32Array(w),G=new Float32Array(w);nt.fill(0),G.fill(0),X.push(nt),O.push(G)}E.onaudioprocess=z=>{const nt=z.inputBuffer,G=z.outputBuffer,$=nt.numberOfChannels;for(let Q=0;Q<$;Q+=1){const st=nt.getChannelData(Q),J=G.getChannelData(Q);N[Q]=Uy(v,S,b,T,x,X[Q],O[Q],N[Q],w,st,J)}};const U=o.sampleRate/2;return _r({get bufferSize(){return y},get channelCount(){return E.channelCount},set channelCount(z){E.channelCount=z},get channelCountMode(){return E.channelCountMode},set channelCountMode(z){E.channelCountMode=z},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(z){E.channelInterpretation=z},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},addEventListener(...z){return E.addEventListener(z[0],z[1],z[2])},dispatchEvent(...z){return E.dispatchEvent(z[0])},getFrequencyResponse(z,nt,G){if(z.length!==nt.length||nt.length!==G.length)throw r();const $=z.length;for(let Q=0;Q<$;Q+=1){const st=-Math.PI*(z[Q]/U),J=[Math.cos(st),Math.sin(st)],ot=Q0(b,J),M=Q0(v,J),A=IT(ot,M);nt[Q]=Math.sqrt(A[0]*A[0]+A[1]*A[1]),G[Q]=Math.atan2(A[1],A[0])}},removeEventListener(...z){return E.removeEventListener(z[0],z[1],z[2])}},E)},GT=(r,t)=>r.createMediaElementSource(t.mediaElement),HT=(r,t)=>{const n=r.createMediaStreamDestination();return Pe(n,t),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},FT=(r,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort((c,u)=>c.id<u.id?-1:c.id>u.id?1:0);const i=n.slice(0,1),o=r.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(o,"mediaStream",{value:t}),o},YT=(r,t)=>(n,{mediaStreamTrack:i})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(i);const o=new MediaStream([i]),c=n.createMediaStreamSource(o);if(i.kind!=="audio")throw r();if(t(n))throw new TypeError;return c},XT=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,QT=(r,t,n,i,o,c)=>(u,d)=>{const f=u.createOscillator();return Pe(f,d),xe(f,d,"detune"),xe(f,d,"frequency"),d.periodicWave!==void 0?f.setPeriodicWave(d.periodicWave):_e(f,d,"type"),t(n,()=>n(u))||Xf(f),t(i,()=>i(u))||c(f,u),t(o,()=>o(u))||Qf(f),r(u,f),f},$T=r=>(t,n)=>{const i=t.createPanner();return i.orientationX===void 0?r(t,n):(Pe(i,n),xe(i,n,"orientationX"),xe(i,n,"orientationY"),xe(i,n,"orientationZ"),xe(i,n,"positionX"),xe(i,n,"positionY"),xe(i,n,"positionZ"),_e(i,n,"coneInnerAngle"),_e(i,n,"coneOuterAngle"),_e(i,n,"coneOuterGain"),_e(i,n,"distanceModel"),_e(i,n,"maxDistance"),_e(i,n,"panningModel"),_e(i,n,"refDistance"),_e(i,n,"rolloffFactor"),i)},ZT=(r,t,n,i,o,c,u,d,f,p)=>(g,{coneInnerAngle:y,coneOuterAngle:v,coneOuterGain:b,distanceModel:S,maxDistance:T,orientationX:x,orientationY:E,orientationZ:w,panningModel:N,positionX:X,positionY:O,positionZ:U,refDistance:j,rolloffFactor:z,...nt})=>{const G=g.createPanner();if(nt.channelCount>2||nt.channelCountMode==="max")throw u();Pe(G,nt);const $={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},Q=n(g,{...$,channelInterpretation:"speakers",numberOfInputs:6}),st=i(g,{...nt,gain:1}),J=i(g,{...$,gain:1}),ot=i(g,{...$,gain:0}),M=i(g,{...$,gain:0}),A=i(g,{...$,gain:0}),Y=i(g,{...$,gain:0}),W=i(g,{...$,gain:0}),rt=o(g,256,6,1),R=c(g,{...$,curve:new Float32Array([1,1]),oversample:"none"});let F=[x,E,w],it=[X,O,U];const ut=new Float32Array(1);rt.onaudioprocess=({inputBuffer:lt})=>{const yt=[f(lt,ut,0),f(lt,ut,1),f(lt,ut,2)];yt.some((Gt,fe)=>Gt!==F[fe])&&(G.setOrientation(...yt),F=yt);const Ot=[f(lt,ut,3),f(lt,ut,4),f(lt,ut,5)];Ot.some((Gt,fe)=>Gt!==it[fe])&&(G.setPosition(...Ot),it=Ot)},Object.defineProperty(ot.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(A.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0});const I={get bufferSize(){},get channelCount(){return G.channelCount},set channelCount(lt){if(lt>2)throw u();st.channelCount=lt,G.channelCount=lt},get channelCountMode(){return G.channelCountMode},set channelCountMode(lt){if(lt==="max")throw u();st.channelCountMode=lt,G.channelCountMode=lt},get channelInterpretation(){return G.channelInterpretation},set channelInterpretation(lt){st.channelInterpretation=lt,G.channelInterpretation=lt},get coneInnerAngle(){return G.coneInnerAngle},set coneInnerAngle(lt){G.coneInnerAngle=lt},get coneOuterAngle(){return G.coneOuterAngle},set coneOuterAngle(lt){G.coneOuterAngle=lt},get coneOuterGain(){return G.coneOuterGain},set coneOuterGain(lt){if(lt<0||lt>1)throw t();G.coneOuterGain=lt},get context(){return G.context},get distanceModel(){return G.distanceModel},set distanceModel(lt){G.distanceModel=lt},get inputs(){return[st]},get maxDistance(){return G.maxDistance},set maxDistance(lt){if(lt<0)throw new RangeError;G.maxDistance=lt},get numberOfInputs(){return G.numberOfInputs},get numberOfOutputs(){return G.numberOfOutputs},get orientationX(){return J.gain},get orientationY(){return ot.gain},get orientationZ(){return M.gain},get panningModel(){return G.panningModel},set panningModel(lt){G.panningModel=lt},get positionX(){return A.gain},get positionY(){return Y.gain},get positionZ(){return W.gain},get refDistance(){return G.refDistance},set refDistance(lt){if(lt<0)throw new RangeError;G.refDistance=lt},get rolloffFactor(){return G.rolloffFactor},set rolloffFactor(lt){if(lt<0)throw new RangeError;G.rolloffFactor=lt},addEventListener(...lt){return st.addEventListener(lt[0],lt[1],lt[2])},dispatchEvent(...lt){return st.dispatchEvent(lt[0])},removeEventListener(...lt){return st.removeEventListener(lt[0],lt[1],lt[2])}};y!==I.coneInnerAngle&&(I.coneInnerAngle=y),v!==I.coneOuterAngle&&(I.coneOuterAngle=v),b!==I.coneOuterGain&&(I.coneOuterGain=b),S!==I.distanceModel&&(I.distanceModel=S),T!==I.maxDistance&&(I.maxDistance=T),x!==I.orientationX.value&&(I.orientationX.value=x),E!==I.orientationY.value&&(I.orientationY.value=E),w!==I.orientationZ.value&&(I.orientationZ.value=w),N!==I.panningModel&&(I.panningModel=N),X!==I.positionX.value&&(I.positionX.value=X),O!==I.positionY.value&&(I.positionY.value=O),U!==I.positionZ.value&&(I.positionZ.value=U),j!==I.refDistance&&(I.refDistance=j),z!==I.rolloffFactor&&(I.rolloffFactor=z),(F[0]!==1||F[1]!==0||F[2]!==0)&&G.setOrientation(...F),(it[0]!==0||it[1]!==0||it[2]!==0)&&G.setPosition(...it);const D=()=>{st.connect(G),r(st,R,0,0),R.connect(J).connect(Q,0,0),R.connect(ot).connect(Q,0,1),R.connect(M).connect(Q,0,2),R.connect(A).connect(Q,0,3),R.connect(Y).connect(Q,0,4),R.connect(W).connect(Q,0,5),Q.connect(rt).connect(g.destination)},ht=()=>{st.disconnect(G),d(st,R,0,0),R.disconnect(J),J.disconnect(Q),R.disconnect(ot),ot.disconnect(Q),R.disconnect(M),M.disconnect(Q),R.disconnect(A),A.disconnect(Q),R.disconnect(Y),Y.disconnect(Q),R.disconnect(W),W.disconnect(Q),Q.disconnect(rt),rt.disconnect(g.destination)};return p(_r(I,G),D,ht)},WT=r=>(t,{disableNormalization:n,imag:i,real:o})=>{const c=i instanceof Float32Array?i:new Float32Array(i),u=o instanceof Float32Array?o:new Float32Array(o),d=t.createPeriodicWave(u,c,{disableNormalization:n});if(Array.from(i).length<2)throw r();return d},Oo=(r,t,n,i)=>r.createScriptProcessor(t,n,i),KT=(r,t)=>(n,i)=>{const o=i.channelCountMode;if(o==="clamped-max")throw t();if(n.createStereoPanner===void 0)return r(n,i);const c=n.createStereoPanner();return Pe(c,i),xe(c,i,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>o,set:u=>{if(u!==o)throw t()}}),c},JT=(r,t,n,i,o,c)=>{const d=new Float32Array([1,1]),f=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...p,oversample:"none"},y=(S,T,x,E)=>{const w=new Float32Array(16385),N=new Float32Array(16385);for(let nt=0;nt<16385;nt+=1){const G=nt/16384*f;w[nt]=Math.cos(G),N[nt]=Math.sin(G)}const X=n(S,{...p,gain:0}),O=i(S,{...g,curve:w}),U=i(S,{...g,curve:d}),j=n(S,{...p,gain:0}),z=i(S,{...g,curve:N});return{connectGraph(){T.connect(X),T.connect(U.inputs===void 0?U:U.inputs[0]),T.connect(j),U.connect(x),x.connect(O.inputs===void 0?O:O.inputs[0]),x.connect(z.inputs===void 0?z:z.inputs[0]),O.connect(X.gain),z.connect(j.gain),X.connect(E,0,0),j.connect(E,0,1)},disconnectGraph(){T.disconnect(X),T.disconnect(U.inputs===void 0?U:U.inputs[0]),T.disconnect(j),U.disconnect(x),x.disconnect(O.inputs===void 0?O:O.inputs[0]),x.disconnect(z.inputs===void 0?z:z.inputs[0]),O.disconnect(X.gain),z.disconnect(j.gain),X.disconnect(E,0,0),j.disconnect(E,0,1)}}},v=(S,T,x,E)=>{const w=new Float32Array(16385),N=new Float32Array(16385),X=new Float32Array(16385),O=new Float32Array(16385),U=Math.floor(16385/2);for(let A=0;A<16385;A+=1)if(A>U){const Y=(A-U)/(16384-U)*f;w[A]=Math.cos(Y),N[A]=Math.sin(Y),X[A]=0,O[A]=1}else{const Y=A/(16384-U)*f;w[A]=1,N[A]=0,X[A]=Math.cos(Y),O[A]=Math.sin(Y)}const j=t(S,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),z=n(S,{...p,gain:0}),nt=i(S,{...g,curve:w}),G=n(S,{...p,gain:0}),$=i(S,{...g,curve:N}),Q=i(S,{...g,curve:d}),st=n(S,{...p,gain:0}),J=i(S,{...g,curve:X}),ot=n(S,{...p,gain:0}),M=i(S,{...g,curve:O});return{connectGraph(){T.connect(j),T.connect(Q.inputs===void 0?Q:Q.inputs[0]),j.connect(z,0),j.connect(G,0),j.connect(st,1),j.connect(ot,1),Q.connect(x),x.connect(nt.inputs===void 0?nt:nt.inputs[0]),x.connect($.inputs===void 0?$:$.inputs[0]),x.connect(J.inputs===void 0?J:J.inputs[0]),x.connect(M.inputs===void 0?M:M.inputs[0]),nt.connect(z.gain),$.connect(G.gain),J.connect(st.gain),M.connect(ot.gain),z.connect(E,0,0),st.connect(E,0,0),G.connect(E,0,1),ot.connect(E,0,1)},disconnectGraph(){T.disconnect(j),T.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),j.disconnect(z,0),j.disconnect(G,0),j.disconnect(st,1),j.disconnect(ot,1),Q.disconnect(x),x.disconnect(nt.inputs===void 0?nt:nt.inputs[0]),x.disconnect($.inputs===void 0?$:$.inputs[0]),x.disconnect(J.inputs===void 0?J:J.inputs[0]),x.disconnect(M.inputs===void 0?M:M.inputs[0]),nt.disconnect(z.gain),$.disconnect(G.gain),J.disconnect(st.gain),M.disconnect(ot.gain),z.disconnect(E,0,0),st.disconnect(E,0,0),G.disconnect(E,0,1),ot.disconnect(E,0,1)}}},b=(S,T,x,E,w)=>{if(T===1)return y(S,x,E,w);if(T===2)return v(S,x,E,w);throw o()};return(S,{channelCount:T,channelCountMode:x,pan:E,...w})=>{if(x==="max")throw o();const N=r(S,{...w,channelCount:1,channelCountMode:x,numberOfInputs:2}),X=n(S,{...w,channelCount:T,channelCountMode:x,gain:1}),O=n(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:E});let{connectGraph:U,disconnectGraph:j}=b(S,T,X,O,N);Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"maxValue",{get:()=>1}),Object.defineProperty(O.gain,"minValue",{get:()=>-1});const z={get bufferSize(){},get channelCount(){return X.channelCount},set channelCount(Q){X.channelCount!==Q&&(nt&&j(),{connectGraph:U,disconnectGraph:j}=b(S,Q,X,O,N),nt&&U()),X.channelCount=Q},get channelCountMode(){return X.channelCountMode},set channelCountMode(Q){if(Q==="clamped-max"||Q==="max")throw o();X.channelCountMode=Q},get channelInterpretation(){return X.channelInterpretation},set channelInterpretation(Q){X.channelInterpretation=Q},get context(){return X.context},get inputs(){return[X]},get numberOfInputs(){return X.numberOfInputs},get numberOfOutputs(){return X.numberOfOutputs},get pan(){return O.gain},addEventListener(...Q){return X.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return X.dispatchEvent(Q[0])},removeEventListener(...Q){return X.removeEventListener(Q[0],Q[1],Q[2])}};let nt=!1;const G=()=>{U(),nt=!0},$=()=>{j(),nt=!1};return c(_r(z,N),G,$)}},t2=(r,t,n,i,o,c,u)=>(d,f)=>{const p=d.createWaveShaper();if(c!==null&&c.name==="webkitAudioContext"&&d.createGain().gain.automationRate===void 0)return n(d,f);Pe(p,f);const g=f.curve===null||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(g!==null&&g.length<2)throw t();_e(p,{curve:g},"curve"),_e(p,f,"oversample");let y=null,v=!1;return u(p,"curve",T=>()=>T.call(p),T=>x=>(T.call(p,x),v&&(i(x)&&y===null?y=r(d,p):!i(x)&&y!==null&&(y(),y=null)),x)),o(p,()=>{v=!0,i(p.curve)&&(y=r(d,p))},()=>{v=!1,y!==null&&(y(),y=null)})},e2=(r,t,n,i,o)=>(c,{curve:u,oversample:d,...f})=>{const p=c.createWaveShaper(),g=c.createWaveShaper();Pe(p,f),Pe(g,f);const y=n(c,{...f,gain:1}),v=n(c,{...f,gain:-1}),b=n(c,{...f,gain:1}),S=n(c,{...f,gain:-1});let T=null,x=!1,E=null;const w={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(O){y.channelCount=O,v.channelCount=O,p.channelCount=O,b.channelCount=O,g.channelCount=O,S.channelCount=O},get channelCountMode(){return p.channelCountMode},set channelCountMode(O){y.channelCountMode=O,v.channelCountMode=O,p.channelCountMode=O,b.channelCountMode=O,g.channelCountMode=O,S.channelCountMode=O},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(O){y.channelInterpretation=O,v.channelInterpretation=O,p.channelInterpretation=O,b.channelInterpretation=O,g.channelInterpretation=O,S.channelInterpretation=O},get context(){return p.context},get curve(){return E},set curve(O){if(O!==null&&O.length<2)throw t();if(O===null)p.curve=O,g.curve=O;else{const U=O.length,j=new Float32Array(U+2-U%2),z=new Float32Array(U+2-U%2);j[0]=O[0],z[0]=-O[U-1];const nt=Math.ceil((U+1)/2),G=(U+1)/2-1;for(let $=1;$<nt;$+=1){const Q=$/nt*G,st=Math.floor(Q),J=Math.ceil(Q);j[$]=st===J?O[st]:(1-(Q-st))*O[st]+(1-(J-Q))*O[J],z[$]=st===J?-O[U-1-st]:-((1-(Q-st))*O[U-1-st])-(1-(J-Q))*O[U-1-J]}j[nt]=U%2===1?O[nt-1]:(O[nt-2]+O[nt-1])/2,p.curve=j,g.curve=z}E=O,x&&(i(E)&&T===null?T=r(c,y):T!==null&&(T(),T=null))},get inputs(){return[y]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(O){p.oversample=O,g.oversample=O},addEventListener(...O){return y.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return y.dispatchEvent(O[0])},removeEventListener(...O){return y.removeEventListener(O[0],O[1],O[2])}};u!==null&&(w.curve=u instanceof Float32Array?u:new Float32Array(u)),d!==w.oversample&&(w.oversample=d);const N=()=>{y.connect(p).connect(b),y.connect(v).connect(g).connect(S).connect(b),x=!0,i(E)&&(T=r(c,y))},X=()=>{y.disconnect(p),p.disconnect(b),y.disconnect(v),v.disconnect(g),g.disconnect(S),S.disconnect(b),x=!1,T!==null&&(T(),T=null)};return o(_r(w,b),N,X)},pn=()=>new DOMException("","NotSupportedError"),n2={numberOfChannels:1},s2=(r,t,n,i,o)=>class extends r{constructor(u,d,f){let p;if(typeof u=="number"&&d!==void 0&&f!==void 0)p={length:d,numberOfChannels:u,sampleRate:f};else if(typeof u=="object")p=u;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:y,sampleRate:v}={...n2,...p},b=i(y,g,v);t(So,()=>So(b))||b.addEventListener("statechange",(()=>{let S=0;const T=x=>{this._state==="running"&&(S>0?(b.removeEventListener("statechange",T),x.stopImmediatePropagation(),this._waitForThePromiseToSettle(x)):S+=1)};return T})()),super(b,y),this._length=g,this._nativeOfflineAudioContext=b,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,wy(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},i2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},a2=(r,t,n,i,o,c,u)=>class extends r{constructor(f,p){const g=o(f),y={...i2,...p},v=n(g,y),b=c(g),S=b?i():null,T=f.sampleRate/2;super(f,!1,v,S),this._detune=t(this,b,v.detune,153600,-153600),this._frequency=t(this,b,v.frequency,T,-T),this._nativeOscillatorNode=v,this._onended=null,this._oscillatorNodeRenderer=S,this._oscillatorNodeRenderer!==null&&y.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const p=typeof f=="function"?u(this,f):null;this._nativeOscillatorNode.onended=p;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===p?f:g}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=f),this.context.state!=="closed"){dr(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),Xs(this)&&Ao(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(f=0){this._nativeOscillatorNode.stop(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=f)}},r2=(r,t,n,i,o)=>()=>{const c=new WeakMap;let u=null,d=null,f=null;const p=async(g,y)=>{let v=n(g);const b=ln(v,y);if(!b){const S={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,detune:v.detune.value,frequency:v.frequency.value,periodicWave:u===null?void 0:u,type:v.type};v=t(y,S),d!==null&&v.start(d),f!==null&&v.stop(f)}return c.set(y,v),b?(await r(y,g.detune,v.detune),await r(y,g.frequency,v.frequency)):(await i(y,g.detune,v.detune),await i(y,g.frequency,v.frequency)),await o(g,y,v),v};return{set periodicWave(g){u=g},set start(g){d=g},set stop(g){f=g},render(g,y){const v=c.get(y);return v!==void 0?Promise.resolve(v):p(g,y)}}},o2={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},l2=(r,t,n,i,o,c,u)=>class extends r{constructor(f,p){const g=o(f),y={...o2,...p},v=n(g,y),b=c(g),S=b?i():null;super(f,!1,v,S),this._nativePannerNode=v,this._orientationX=t(this,b,v.orientationX,hn,An),this._orientationY=t(this,b,v.orientationY,hn,An),this._orientationZ=t(this,b,v.orientationZ,hn,An),this._positionX=t(this,b,v.positionX,hn,An),this._positionY=t(this,b,v.positionY,hn,An),this._positionZ=t(this,b,v.positionZ,hn,An),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}},c2=(r,t,n,i,o,c,u,d,f,p)=>()=>{const g=new WeakMap;let y=null;const v=async(b,S)=>{let T=null,x=c(b);const E={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation},w={...E,coneInnerAngle:x.coneInnerAngle,coneOuterAngle:x.coneOuterAngle,coneOuterGain:x.coneOuterGain,distanceModel:x.distanceModel,maxDistance:x.maxDistance,panningModel:x.panningModel,refDistance:x.refDistance,rolloffFactor:x.rolloffFactor},N=ln(x,S);if("bufferSize"in x)T=i(S,{...E,gain:1});else if(!N){const X={...w,orientationX:x.orientationX.value,orientationY:x.orientationY.value,orientationZ:x.orientationZ.value,positionX:x.positionX.value,positionY:x.positionY.value,positionZ:x.positionZ.value};x=o(S,X)}if(g.set(S,T===null?x:T),T!==null){if(y===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const $=new u(6,b.context.length,S.sampleRate),Q=t($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});Q.connect($.destination),y=(async()=>{const st=await Promise.all([b.orientationX,b.orientationY,b.orientationZ,b.positionX,b.positionY,b.positionZ].map(async(J,ot)=>{const M=n($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ot===0?1:0});return await d($,J,M.offset),M}));for(let J=0;J<6;J+=1)st[J].connect(Q,0,J),st[J].start(0);return p($)})()}const X=await y,O=i(S,{...E,gain:1});await f(b,S,O);const U=[];for(let $=0;$<X.numberOfChannels;$+=1)U.push(X.getChannelData($));let j=[U[0][0],U[1][0],U[2][0]],z=[U[3][0],U[4][0],U[5][0]],nt=i(S,{...E,gain:1}),G=o(S,{...w,orientationX:j[0],orientationY:j[1],orientationZ:j[2],positionX:z[0],positionY:z[1],positionZ:z[2]});O.connect(nt).connect(G.inputs[0]),G.connect(T);for(let $=128;$<X.length;$+=128){const Q=[U[0][$],U[1][$],U[2][$]],st=[U[3][$],U[4][$],U[5][$]];if(Q.some((J,ot)=>J!==j[ot])||st.some((J,ot)=>J!==z[ot])){j=Q,z=st;const J=$/S.sampleRate;nt.gain.setValueAtTime(0,J),nt=i(S,{...E,gain:0}),G=o(S,{...w,orientationX:j[0],orientationY:j[1],orientationZ:j[2],positionX:z[0],positionY:z[1],positionZ:z[2]}),nt.gain.setValueAtTime(1,J),O.connect(nt).connect(G.inputs[0]),G.connect(T)}}return T}return N?(await r(S,b.orientationX,x.orientationX),await r(S,b.orientationY,x.orientationY),await r(S,b.orientationZ,x.orientationZ),await r(S,b.positionX,x.positionX),await r(S,b.positionY,x.positionY),await r(S,b.positionZ,x.positionZ)):(await d(S,b.orientationX,x.orientationX),await d(S,b.orientationY,x.orientationY),await d(S,b.orientationZ,x.orientationZ),await d(S,b.positionX,x.positionX),await d(S,b.positionY,x.positionY),await d(S,b.positionZ,x.positionZ)),yr(x)?await f(b,S,x.inputs[0]):await f(b,S,x),x};return{render(b,S){const T=g.get(S);return T!==void 0?Promise.resolve(T):v(b,S)}}},u2={disableNormalization:!1},h2=(r,t,n,i)=>class Gy{constructor(c,u){const d=t(c),f=i({...u2,...u}),p=r(d,f);return n.add(p),p}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===Gy.prototype||n.has(c)}},f2=(r,t)=>(n,i,o)=>(r(i).replay(o),t(i,n,o)),d2=(r,t,n)=>async(i,o,c)=>{const u=r(i);await Promise.all(u.activeInputs.map((d,f)=>Array.from(d).map(async([p,g])=>{const v=await t(p).render(p,o),b=i.context.destination;!n(p)&&(i!==b||!n(i))&&v.connect(c,g,f)})).reduce((d,f)=>[...d,...f],[]))},p2=(r,t,n)=>async(i,o,c)=>{const u=t(i);await Promise.all(Array.from(u.activeInputs).map(async([d,f])=>{const g=await r(d).render(d,o);n(d)||g.connect(c,f)}))},m2=(r,t,n,i)=>o=>r(So,()=>So(o))?Promise.resolve(r(i,i)).then(c=>{if(!c){const u=n(o,512,0,1);o.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>o.currentTime,u.connect(o.destination)}return o.startRendering()}):new Promise(c=>{const u=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=d=>{u.disconnect(),c(d.renderedBuffer)},u.connect(o.destination),o.startRendering()}),g2=r=>(t,n)=>{r.set(t,n)},y2=r=>(t,n)=>r.set(t,n),_2=(r,t,n,i,o,c,u,d)=>(f,p)=>n(f).render(f,p).then(()=>Promise.all(Array.from(i(p)).map(g=>n(g).render(g,p)))).then(()=>o(p)).then(g=>(typeof g.copyFromChannel!="function"?(u(g),Hf(g)):t(c,()=>c(g))||d(g),r.add(g),g)),v2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},b2=(r,t,n,i,o,c)=>class extends r{constructor(d,f){const p=o(d),g={...v2,...f},y=n(p,g),v=c(p),b=v?i():null;super(d,!1,y,b),this._pan=t(this,v,y.pan)}get pan(){return this._pan}},S2=(r,t,n,i,o)=>()=>{const c=new WeakMap,u=async(d,f)=>{let p=n(d);const g=ln(p,f);if(!g){const y={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=t(f,y)}return c.set(f,p),g?await r(f,d.pan,p.pan):await i(f,d.pan,p.pan),yr(p)?await o(d,f,p.inputs[0]):await o(d,f,p),p};return{render(d,f){const p=c.get(f);return p!==void 0?Promise.resolve(p):u(d,f)}}},C2=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},T2=(r,t)=>async()=>{if(r===null)return!0;if(t===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new t(1,128,44100),o=URL.createObjectURL(n);let c=!1,u=!1;try{await i.audioWorklet.addModule(o);const d=new r(i,"a",{numberOfOutputs:0}),f=i.createOscillator();d.port.onmessage=()=>c=!0,d.onprocessorerror=()=>u=!0,f.connect(d),f.start(0),await i.startRendering(),await new Promise(p=>setTimeout(p))}catch{}finally{URL.revokeObjectURL(o)}return c&&!u},x2=(r,t)=>()=>{if(t===null)return Promise.resolve(!1);const n=new t(1,1,44100),i=r(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{n.oncomplete=()=>{i.disconnect(),o(n.currentTime!==0)},n.startRendering()})},E2=()=>new DOMException("","UnknownError"),A2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},M2=(r,t,n,i,o,c,u)=>class extends r{constructor(f,p){const g=o(f),y={...A2,...p},v=n(g,y),S=c(g)?i():null;super(f,!0,v,S),this._isCurveNullified=!1,this._nativeWaveShaperNode=v,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(f===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}},R2=(r,t,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=t(c);if(!ln(d,u)){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=r(u,p)}return i.set(u,d),yr(d)?await n(c,u,d.inputs[0]):await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},k2=()=>typeof window>"u"?null:window,O2=(r,t)=>n=>{n.copyFromChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=n.numberOfChannels)throw t();const f=n.length,p=n.getChannelData(d),g=i.length;for(let y=u<0?-u:0;y+u<f&&y<g;y+=1)i[y]=p[y+u]},n.copyToChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=n.numberOfChannels)throw t();const f=n.length,p=n.getChannelData(d),g=i.length;for(let y=u<0?-u:0;y+u<f&&y<g;y+=1)p[y+u]=i[y]}},N2=r=>t=>{t.copyFromChannel=(n=>(i,o,c=0)=>{const u=r(c),d=r(o);if(u<t.length)return n.call(t,i,d,u)})(t.copyFromChannel),t.copyToChannel=(n=>(i,o,c=0)=>{const u=r(c),d=r(o);if(u<t.length)return n.call(t,i,d,u)})(t.copyToChannel)},D2=r=>(t,n)=>{const i=n.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=i),r(t,"buffer",o=>()=>{const c=o.call(t);return c===i?null:c},o=>c=>o.call(t,c===null?i:c))},w2=(r,t)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const o=n.createBufferSource();t(i,()=>{const d=i.numberOfInputs;for(let f=0;f<d;f+=1)o.connect(i,0,f)},()=>o.disconnect(i))},Hy=(r,t,n)=>r.copyFromChannel===void 0?r.getChannelData(n)[0]:(r.copyFromChannel(t,n),t[0]),Fy=r=>{if(r===null)return!1;const t=r.length;return t%2!==0?r[Math.floor(t/2)]!==0:r[t/2-1]+r[t/2]!==0},No=(r,t,n,i)=>{let o=r;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:c,set:u}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(r,t,{get:n(c),set:i(u)})},L2=r=>({...r,outputChannelCount:r.outputChannelCount!==void 0?r.outputChannelCount:r.numberOfInputs===1&&r.numberOfOutputs===1?[r.channelCount]:Array.from({length:r.numberOfOutputs},()=>1)}),z2=r=>({...r,channelCount:r.numberOfOutputs}),B2=r=>{const{imag:t,real:n}=r;return t===void 0?n===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(n,()=>0),real:n}:n===void 0?{...r,imag:t,real:Array.from(t,()=>0)}:{...r,imag:t,real:n}},Yy=(r,t,n)=>{try{r.setValueAtTime(t,n)}catch(i){if(i.code!==9)throw i;Yy(r,t,n+1e-7)}},j2=r=>{const t=r.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},V2=r=>{const t=r.createBufferSource(),n=r.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},U2=r=>{const t=r.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},$f=r=>{const t=r.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},Xy=r=>{const t=r.createBuffer(1,1,44100),n=r.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Zf=r=>{const t=r.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},I2=r=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(r)}finally{t.close(),n.close()}},q2=r=>{r.start=(t=>(n=0,i=0,o)=>{const c=r.buffer,u=c===null?i:Math.min(c.duration,i);c!==null&&u>c.duration-.5/r.context.sampleRate?t.call(r,n,0,0):t.call(r,n,u,o)})(r.start)},Qy=(r,t)=>{const n=t.createGain();r.connect(n);const i=(o=>()=>{o.call(r,n),r.removeEventListener("ended",i)})(r.disconnect);r.addEventListener("ended",i),_r(r,n),r.stop=(o=>{let c=!1;return(u=0)=>{if(c)try{o.call(r,u)}catch{n.gain.setValueAtTime(0,u)}else o.call(r,u),c=!0}})(r.stop)},vr=(r,t)=>n=>{const i={value:r};return Object.defineProperties(n,{currentTarget:i,target:i}),typeof t=="function"?t.call(r,n):t.handleEvent.call(r,n)},P2=lS(ca),G2=pS(ca),H2=AC(zc),$y=new WeakMap,F2=HC($y),os=nC(new Map,new WeakMap),gs=k2(),Zy=bT(os,_s),Wf=GC(fn),tn=d2(fn,Wf,ra),Y2=vS(Zy,ge,tn),he=XC(Lc),Zs=XT(gs),se=uT(Zs),Wy=new WeakMap,Ky=BC(vr),Do=xT(gs),Kf=rT(Do),Jf=oT(gs),Jy=lT(gs),Co=AT(gs),ke=HS(cS(Ay),dS(P2,G2,Sc,H2,Cc,fn,F2,Eo,ge,ca,Xs,ra,lc),os,eT(Ef,Cc,fn,ge,bo,Xs),_s,Bc,pn,CC(Sc,Ef,fn,ge,bo,he,Xs,se),kC(Wy,fn,is),Ky,he,Kf,Jf,Jy,se,Co),X2=_S(ke,Y2,_s,Zy,he,se),td=new WeakSet,$0=ST(gs),t_=mC(new Uint32Array(1)),ed=O2(t_,_s),nd=N2(t_),e_=SS(td,os,pn,$0,Zs,C2($0),ed,nd),jc=mS(Rn),n_=p2(Wf,Mo,ra),vs=cC(n_),br=TT(jc,os,j2,V2,U2,$f,Xy,Zf,q2,D2(No),Qy),bs=f2(FC(Mo),n_),Q2=xS(vs,br,ge,bs,tn),ls=FS(uS(My),Wy,Gf,YS,nS,sS,iS,aS,rS,Cf,xy,Do,Yy),$2=TS(ke,Q2,ls,Fe,br,he,se,vr),Z2=wS(ke,LS,_s,Fe,ET(Rn,No),he,se,tn),W2=eC(vs,qy,ge,bs,tn),ua=y2($y),K2=tC(ke,ls,W2,Bc,qy,he,se,ua),Bi=_T(ca,Jf),J2=w2(Fe,Bi),ji=wT(Do,J2),tx=aC(ji,ge,tn),ex=iC(ke,tx,ji,he,se),nx=lC(ko,ge,tn),sx=oC(ke,nx,ko,he,se,z2),ix=BT(jc,br,Rn,Bi),Sr=zT(jc,os,ix,$f,Zf),ax=pC(vs,Sr,ge,bs,tn),rx=dC(ke,ls,ax,Sr,he,se,vr),s_=jT(pn,No),ox=_C(s_,ge,tn),lx=yC(ke,ox,s_,he,se,ua),cx=EC(vs,Py,ge,bs,tn),ux=xC(ke,ls,cx,Py,he,se,ua),i_=VT(pn),hx=wC(vs,i_,ge,bs,tn),fx=DC(ke,ls,hx,i_,pn,he,se,ua),dx=qC(vs,Rn,ge,bs,tn),px=IC(ke,ls,dx,Rn,he,se),mx=PT(Bc,Fe,Oo,pn),Vc=m2(os,Rn,Oo,x2(Rn,Zs)),gx=tT(br,ge,Zs,tn,Vc),yx=UT(mx),_x=KC(ke,yx,gx,he,se,ua),vx=zS(ls,ji,Sr,Oo,pn,Hy,se,No),a_=new WeakMap,bx=yT(Z2,vx,Ky,se,a_,vr),r_=QT(jc,os,$f,Xy,Zf,Qy),Sx=r2(vs,r_,ge,bs,tn),Cx=a2(ke,ls,r_,Sx,he,se,vr),o_=hC(br),Tx=e2(o_,Fe,Rn,Fy,Bi),Uc=t2(o_,Fe,Tx,Fy,Bi,Do,No),xx=ZT(Sc,Fe,ji,Rn,Oo,Uc,pn,Cc,Hy,Bi),l_=$T(xx),Ex=c2(vs,ji,Sr,Rn,l_,ge,Zs,bs,tn,Vc),Ax=l2(ke,ls,l_,Ex,he,se,ua),Mx=WT(_s),Rx=h2(Mx,he,new WeakSet,B2),kx=JT(ji,ko,Rn,Uc,pn,Bi),c_=KT(kx,pn),Ox=S2(vs,c_,ge,bs,tn),Nx=b2(ke,ls,c_,Ox,he,se),Dx=R2(Uc,ge,tn),wx=M2(ke,Fe,Uc,Dx,he,se,ua),u_=hT(gs),sd=jC(gs),h_=new WeakMap,Lx=QC(h_,Zs),zx=u_?fS(os,pn,zC(gs),sd,VC(oS),he,Lx,se,Co,new WeakMap,new WeakMap,T2(Co,Zs),gs):void 0,Bx=cT(Kf,se),jx=SC(td,os,bC,LC,new WeakSet,he,Bx,vc,So,ed,nd),f_=KS(zx,X2,e_,$2,K2,ex,sx,rx,lx,jx,ux,fx,px,_x,bx,Cx,Ax,Rx,Nx,wx),Vx=fT(ke,GT,he,se),Ux=pT(ke,HT,he,se),Ix=mT(ke,FT,he,se),qx=YT(Fe,se),Px=gT(ke,qx,he),Gx=DS(f_,Fe,pn,E2,Vx,Ux,Ix,Px,Do),id=$C(a_),Hx=gS(id),d_=uC(_s),Fx=MC(id),p_=OC(_s),m_=new WeakMap,Yx=PC(m_,is),Xx=DT(d_,_s,Fe,ji,ko,Sr,Rn,Oo,pn,p_,sd,Yx,Bi),Qx=RT(Fe,Xx,Rn,pn,Bi),$x=WS(vs,d_,br,ji,ko,Sr,Rn,Fx,p_,sd,ge,Co,Zs,bs,tn,Vc),Zx=YC(h_),Wx=g2(m_),Z0=u_?QS(Hx,ke,ls,$x,Qx,fn,Zx,he,se,Co,L2,Wx,I2,vr):void 0,Kx=vC(pn,Zs),Jx=_2(td,os,Wf,id,Vc,vc,ed,nd),tE=s2(f_,os,Fe,Kx,Jx),eE=nT(Lc,Kf),nE=sT(Pf,Jf),sE=iT(Gf,Jy),iE=aT(Lc,se);function Vn(r){return r===void 0}function wt(r){return r!==void 0}function aE(r){return typeof r=="function"}function as(r){return typeof r=="number"}function Ri(r){return Object.prototype.toString.call(r)==="[object Object]"&&r.constructor===Object}function g_(r){return typeof r=="boolean"}function Mn(r){return Array.isArray(r)}function Qs(r){return typeof r=="string"}function nc(r){return Qs(r)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(r)}function Ct(r,t){if(!r)throw new Error(t)}function Di(r,t,n=1/0){if(!(t<=r&&r<=n))throw new RangeError(`Value must be within [${t}, ${n}], got: ${r}`)}function y_(r){!r.isOffline&&r.state!=="running"&&Ic('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let __=!1,W0=!1;function K0(r){__=r}function rE(r){Vn(r)&&__&&!W0&&(W0=!0,Ic("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let v_=console;function oE(...r){v_.log(...r)}function Ic(...r){v_.warn(...r)}function lE(r){return new Gx(r)}function cE(r,t,n){return new tE(r,t,n)}const Bn=typeof self=="object"?self:null,uE=Bn&&(Bn.hasOwnProperty("AudioContext")||Bn.hasOwnProperty("webkitAudioContext"));function hE(r,t,n){return Ct(wt(Z0),"AudioWorkletNode only works in a secure context (https or localhost)"),new(r instanceof Bn?.BaseAudioContext?Bn?.AudioWorkletNode:Z0)(r,t,n)}function cs(r,t,n,i){var o=arguments.length,c=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,t,n,i);else for(var d=r.length-1;d>=0;d--)(u=r[d])&&(c=(o<3?u(c):o>3?u(t,n,c):u(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c}function je(r,t,n,i){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function d(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):o(g.value).then(d,f)}p((i=i.apply(r,t||[])).next())})}class fE{constructor(t,n,i,o){this._callback=t,this._type=n,this._minimumUpdateInterval=Math.max(128/(o||44100),.001),this.updateInterval=i,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(t),i=new Worker(n);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var n;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function oa(r){return sE(r)}function ki(r){return nE(r)}function cc(r){return iE(r)}function ir(r){return eE(r)}function dE(r){return r instanceof e_}function pE(r,t){return r==="value"||oa(t)||ki(t)||dE(t)}function Oi(r,...t){if(!t.length)return r;const n=t.shift();if(Ri(r)&&Ri(n))for(const i in n)pE(i,n[i])?r[i]=n[i]:Ri(n[i])?(r[i]||Object.assign(r,{[i]:{}}),Oi(r[i],n[i])):Object.assign(r,{[i]:n[i]});return Oi(r,...t)}function mE(r,t){return r.length===t.length&&r.every((n,i)=>t[i]===n)}function St(r,t,n=[],i){const o={},c=Array.from(t);if(Ri(c[0])&&i&&!Reflect.has(c[0],i)&&(Object.keys(c[0]).some(d=>Reflect.has(r,d))||(Oi(o,{[i]:c[0]}),n.splice(n.indexOf(i),1),c.shift())),c.length===1&&Ri(c[0]))Oi(o,c[0]);else for(let u=0;u<n.length;u++)wt(c[u])&&(o[n[u]]=c[u]);return Oi(r,o)}function gE(r){return r.constructor.getDefaults()}function ms(r,t){return Vn(r)?t:r}function pr(r,t){return t.forEach(n=>{Reflect.has(r,n)&&delete r[n]}),r}class Ws{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Bn&&this.toString()===Bn.TONE_DEBUG_CLASS)&&oE(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ws.version=Ty;const ad=1e-6;function mr(r,t){return r>t+ad}function Of(r,t){return mr(r,t)||ns(r,t)}function Ac(r,t){return r+ad<t}function ns(r,t){return Math.abs(r-t)<ad}function yE(r,t,n){return Math.max(Math.min(r,n),t)}class Wn extends Ws{constructor(){super(),this.name="Timeline",this._timeline=[];const t=St(Wn.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Ct(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];Ct(Of(t.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(t){const n=this._timeline.indexOf(t);return n!==-1&&this._timeline.splice(n,1),this}get(t,n="time"){const i=this._search(t,n);return i!==-1?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,n="time"){const i=this._search(t,n);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(t){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<t)return this._timeline[n-1];const i=this._search(t);return i-1>=0?this._timeline[i-1]:null}cancel(t){if(this._timeline.length>1){let n=this._search(t);if(n>=0)if(ns(this._timeline[n].time,t)){for(let i=n;i>=0&&ns(this._timeline[i].time,t);i--)n=i;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Of(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const n=this._search(t);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(t){const n=this._timeline.indexOf(t);return n>0?this._timeline[n-1]:null}_search(t,n="time"){if(this._timeline.length===0)return-1;let i=0;const o=this._timeline.length;let c=o;if(o>0&&this._timeline[o-1][n]<=t)return o-1;for(;i<c;){let u=Math.floor(i+(c-i)/2);const d=this._timeline[u],f=this._timeline[u+1];if(ns(d[n],t)){for(let p=u;p<this._timeline.length;p++){const g=this._timeline[p];if(ns(g[n],t))u=p;else break}return u}else{if(Ac(d[n],t)&&mr(f[n],t))return u;mr(d[n],t)?c=u:i=u+1}}return-1}_iterate(t,n=0,i=this._timeline.length-1){this._timeline.slice(n,i+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,n){const i=this._search(t);return i!==-1&&this._iterate(n,0,i),this}forEachAfter(t,n){const i=this._search(t);return this._iterate(n,i+1),this}forEachBetween(t,n,i){let o=this._search(t),c=this._search(n);return o!==-1&&c!==-1?(this._timeline[o].time!==t&&(o+=1),this._timeline[c].time===n&&(c-=1),this._iterate(i,o,c)):o===-1&&this._iterate(i,0,c),this}forEachFrom(t,n){let i=this._search(t);for(;i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(n,i+1),this}forEachAtTime(t,n){const i=this._search(t);if(i!==-1&&ns(this._timeline[i].time,t)){let o=i;for(let c=i;c>=0&&ns(this._timeline[c].time,t);c--)o=c;this._iterate(c=>{n(c)},o,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const b_=[];function qc(r){b_.push(r)}function _E(r){b_.forEach(t=>t(r))}const S_=[];function Pc(r){S_.push(r)}function vE(r){S_.forEach(t=>t(r))}class wo extends Ws{constructor(){super(...arguments),this.name="Emitter"}on(t,n){return t.split(/\W+/).forEach(o=>{Vn(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(n)}),this}once(t,n){const i=(...o)=>{n(...o),this.off(t,i)};return this.on(t,i),this}off(t,n){return t.split(/\W+/).forEach(o=>{if(Vn(this._events)&&(this._events={}),this._events.hasOwnProperty(o))if(Vn(n))this._events[o]=[];else{const c=this._events[o];for(let u=c.length-1;u>=0;u--)c[u]===n&&c.splice(u,1)}}),this}emit(t,...n){if(this._events&&this._events.hasOwnProperty(t)){const i=this._events[t].slice(0);for(let o=0,c=i.length;o<c;o++)i[o].apply(this,n)}return this}static mixin(t){["on","once","off","emit"].forEach(n=>{const i=Object.getOwnPropertyDescriptor(wo.prototype,n);Object.defineProperty(t.prototype,n,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class C_ extends wo{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Lo extends C_{constructor(){var t,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Wn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const i=St(Lo.getDefaults(),arguments,["context"]);i.context?(this._context=i.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=lE({latencyHint:i.latencyHint}),this._latencyHint=i.latencyHint),this._ticker=new fE(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=i.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(_E(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,n,i){return this._context.createBuffer(t,n,i)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,n){return this._context.createIIRFilter(t,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,n,i){return this._context.createPeriodicWave(t,n,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Ct(ir(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Ct(ir(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Ct(ir(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Ct(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Ct(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Ct(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Ct(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,n){return hE(this.rawContext,t,n)}addAudioWorkletModule(t){return je(this,void 0,void 0,function*(){Ct(wt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return je(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ir(this._context)?this._context.resume():Promise.resolve()}close(){return je(this,void 0,void 0,function*(){ir(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&vE(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const n=this._context.createBuffer(1,128,this._context.sampleRate),i=n.getChannelData(0);for(let c=0;c<i.length;c++)i[c]=t;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=n,o.loop=!0,o.start(0),this._constants.set(t,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();this._timeouts.forEachBefore(t,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(t,n){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:i+n}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(n=>{n.id===t&&this._timeouts.remove(n)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,n){const i=++this._timeoutIds,o=()=>{const c=this.now();this._timeouts.add({callback:()=>{t(),o()},id:i,time:c+n})};return o(),i}}class bE extends C_{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,n,i){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,n){return{}}createPanner(){return{}}createPeriodicWave(t,n,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,n){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return je(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,n){return 0}clearTimeout(t){return this}setInterval(t,n){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function be(r,t){Mn(t)?t.forEach(n=>be(r,n)):Object.defineProperty(r,t,{enumerable:!0,writable:!1})}function rd(r,t){Mn(t)?t.forEach(n=>rd(r,n)):Object.defineProperty(r,t,{writable:!0})}const $t=()=>{};class re extends Ws{constructor(){super(),this.name="ToneAudioBuffer",this.onload=$t;const t=St(re.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,Qs(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:$t,onload:$t,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Je().sampleRate}set(t){return t instanceof re?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return je(this,void 0,void 0,function*(){const n=re.load(t).then(i=>{this.set(i),this.onload(this)});re.downloads.push(n);try{yield n}finally{const i=re.downloads.indexOf(n);re.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const n=Mn(t)&&t[0].length>0,i=n?t.length:1,o=n?t[0].length:t.length,c=Je(),u=c.createBuffer(i,o,c.sampleRate),d=!n&&i===1?[t]:t;for(let f=0;f<i;f++)u.copyToChannel(d[f],f);return this._buffer=u,this}toMono(t){if(as(t))this.fromArray(this.toArray(t));else{let n=new Float32Array(this.length);const i=this.numberOfChannels;for(let o=0;o<i;o++){const c=this.toArray(o);for(let u=0;u<c.length;u++)n[u]+=c[u]}n=n.map(o=>o/i),this.fromArray(n)}return this}toArray(t){if(as(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let i=0;i<this.numberOfChannels;i++)n[i]=this.getChannelData(i);return n}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,n=this.duration){Ct(this.loaded,"Buffer is not loaded");const i=Math.floor(t*this.sampleRate),o=Math.floor(n*this.sampleRate);Ct(i<o,"The start time must be less than the end time");const c=o-i,u=Je().createBuffer(this.numberOfChannels,c,this.sampleRate);for(let d=0;d<this.numberOfChannels;d++)u.copyToChannel(this.getChannelData(d).subarray(i,o),d);return new re(u)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new re().fromArray(t)}static fromUrl(t){return je(this,void 0,void 0,function*(){return yield new re().load(t)})}static load(t){return je(this,void 0,void 0,function*(){const n=re.baseUrl===""||re.baseUrl.endsWith("/")?re.baseUrl:re.baseUrl+"/",i=yield fetch(n+t);if(!i.ok)throw new Error(`could not load url: ${t}`);const o=yield i.arrayBuffer();return yield Je().decodeAudioData(o)})}static supportsType(t){const n=t.split("."),i=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return je(this,void 0,void 0,function*(){for(yield Promise.resolve();re.downloads.length;)yield re.downloads[0]})}}re.baseUrl="";re.downloads=[];class od extends Lo{constructor(){super({clockSource:"offline",context:cc(arguments[0])?arguments[0]:cE(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:cc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=cc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return je(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const i=Math.floor(this.sampleRate/128);t&&n%i===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(){return je(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const n=yield this._context.startRendering();return new re(n)})}close(){return Promise.resolve()}}const T_=new bE;let ia=T_;function Je(){return ia===T_&&uE&&SE(new Lo),ia}function SE(r,t=!1){t&&ia.dispose(),ir(r)?ia=new Lo(r):cc(r)?ia=new od(r):ia=r}function x_(){return ia.resume()}if(Bn&&!Bn.TONE_SILENCE_LOGGING){const t=` * Tone.js v${Ty} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function CE(r){return Math.pow(10,r/20)}function Hs(r){return 20*(Math.log(r)/Math.LN10)}function E_(r){return Math.pow(2,r/12)}let Gc=440;function TE(){return Gc}function xE(r){Gc=r}function aa(r){return Math.round(A_(r))}function A_(r){return 69+12*Math.log2(r/Gc)}function M_(r){return Gc*Math.pow(2,(r-69)/12)}class ld extends Ws{constructor(t,n,i){super(),this.defaultUnits="s",this._val=n,this._units=i,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,n)=>{const i=parseInt(t,10),o=n==="."?1.5:1;return i===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/i)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const n=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,n,i)=>{let o=0;return t&&t!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),n&&n!=="0"&&(o+=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(o+=this._beatsToUnits(parseFloat(i)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof ld&&this.fromType(this._val),Vn(this._val))return this._noArg();if(Qs(this._val)&&Vn(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Ri(this._val)){let t=0;for(const n in this._val)if(wt(this._val[n])){const i=this._val[n],o=new this.constructor(this.context,n).valueOf()*i;t+=o}return t}if(wt(this._units)){const t=this._expressions[this._units],n=this._val.toString().trim().match(t.regexp);return n?t.method.apply(this,n.slice(1)):t.method.call(this,this._val)}else return Qs(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class ss extends ld{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const n=new ss(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(t,n=1){const i=new this.constructor(this.context,t).valueOf(),o=this.valueOf(),d=Math.round(o/i)*i-o;return o+d*n}toNotation(){const t=this.toSeconds(),n=["1m"];for(let c=1;c<9;c++){const u=Math.pow(2,c);n.push(u+"n."),n.push(u+"n"),n.push(u+"t")}n.push("0");let i=n[0],o=new ss(this.context,n[0]).toSeconds();return n.forEach(c=>{const u=new ss(this.context,c).toSeconds();Math.abs(u-t)<Math.abs(o-t)&&(i=c,o=u)}),i}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let n=this.valueOf()/t;n=parseFloat(n.toFixed(4));const i=Math.floor(n/this._getTimeSignature());let o=n%1*4;n=Math.floor(n)%this._getTimeSignature();const c=o.toString();return c.length>3&&(o=parseFloat(parseFloat(c).toFixed(3))),[i,n,o].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return aa(this.toFrequency())}_now(){return this.context.now()}}class jn extends ss{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return TE()}static set A4(t){xE(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:jn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,n){const o=EE[t.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?o:jn.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,n,i){let o=1;return t&&t!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),n&&n!=="0"&&(o*=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(o*=this._beatsToUnits(parseFloat(i)/4)),o}}})}transpose(t){return new jn(this.context,this.valueOf()*E_(t))}harmonize(t){return t.map(n=>this.transpose(n))}toMidi(){return aa(this.valueOf())}toNote(){const t=this.toFrequency(),n=Math.log2(t/jn.A4);let i=Math.round(12*n)+57;const o=Math.floor(i/12);return o<0&&(i+=-12*o),AE[i%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return M_(t)}static ftom(t){return aa(t)}}const EE={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},AE=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class cr extends ss{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class an extends Ws{constructor(){super();const t=St(an.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Je()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return rE(t),new ss(this.context,t).toSeconds()}toFrequency(t){return new jn(this.context,t).toFrequency()}toTicks(t){return new cr(this.context,t).toTicks()}_getPartialProperties(t){const n=this.get();return Object.keys(n).forEach(i=>{Vn(t[i])&&delete n[i]}),n}get(){const t=gE(this);return Object.keys(t).forEach(n=>{if(Reflect.has(this,n)){const i=this[n];wt(i)&&wt(i.value)&&wt(i.setValueAtTime)?t[n]=i.value:i instanceof an?t[n]=i._getPartialProperties(t[n]):Mn(i)||as(i)||Qs(i)||g_(i)?t[n]=i:delete t[n]}}),t}set(t){return Object.keys(t).forEach(n=>{Reflect.has(this,n)&&wt(this[n])&&(this[n]&&wt(this[n].value)&&wt(this[n].setValueAtTime)?this[n].value!==t[n]&&(this[n].value=t[n]):this[n]instanceof an?this[n].set(t[n]):this[n]=t[n])}),this}}class zo extends Wn{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const n=this.get(t);return n!==null?n.state:this._initial}setStateAtTime(t,n,i){return Di(n,0),this.add(Object.assign({},i,{state:t,time:n})),this}getLastState(t,n){const i=this._search(n);for(let o=i;o>=0;o--){const c=this._timeline[o];if(c.state===t)return c}}getNextState(t,n){const i=this._search(n);if(i!==-1)for(let o=i;o<this._timeline.length;o++){const c=this._timeline[o];if(c.state===t)return c}}}class oe extends an{constructor(){const t=St(oe.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ct(wt(t.param)&&(oa(t.param)||t.param instanceof oe),"param must be an AudioParam");!oa(t.param);)t.param=t.param._param;this._swappable=wt(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Wn(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,wt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(an.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return wt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return wt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,n){return this.units===n}_assertRange(t){return wt(this.maxValue)&&wt(this.minValue)&&Di(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?CE(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?Hs(t):t}setValueAtTime(t,n){const i=this.toSeconds(n),o=this._fromType(t);return Ct(isFinite(o)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",t,i),this._events.add({time:i,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,i),this}getValueAtTime(t){const n=Math.max(this.toSeconds(t),0),i=this._events.getAfter(n),o=this._events.get(n);let c=this._initialValue;if(o===null)c=this._initialValue;else if(o.type==="setTargetAtTime"&&(i===null||i.type==="setValueAtTime")){const u=this._events.getBefore(o.time);let d;u===null?d=this._initialValue:d=u.value,o.type==="setTargetAtTime"&&(c=this._exponentialApproach(o.time,d,o.value,o.constant,n))}else if(i===null)c=o.value;else if(i.type==="linearRampToValueAtTime"||i.type==="exponentialRampToValueAtTime"){let u=o.value;if(o.type==="setTargetAtTime"){const d=this._events.getBefore(o.time);d===null?u=this._initialValue:u=d.value}i.type==="linearRampToValueAtTime"?c=this._linearInterpolate(o.time,u,i.time,i.value,n):c=this._exponentialInterpolate(o.time,u,i.time,i.value,n)}else c=o.value;return this._toType(c)}setRampPoint(t){t=this.toSeconds(t);let n=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,t),this}linearRampToValueAtTime(t,n){const i=this._fromType(t),o=this.toSeconds(n);return Ct(isFinite(i)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._assertRange(i),this._events.add({time:o,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",t,o),this._param.linearRampToValueAtTime(i,o),this}exponentialRampToValueAtTime(t,n){let i=this._fromType(t);i=ns(i,0)?this._minOutput:i,this._assertRange(i);const o=this.toSeconds(n);return Ct(isFinite(i)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",t,o),this._param.exponentialRampToValueAtTime(i,o),this}exponentialRampTo(t,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(n)),this}linearRampTo(t,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(n)),this}targetRampTo(t,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,n),this}exponentialApproachValueAtTime(t,n,i){n=this.toSeconds(n),i=this.toSeconds(i);const o=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(t,n,o),this.cancelAndHoldAtTime(n+i*.9),this.linearRampToValueAtTime(t,n+i),this}setTargetAtTime(t,n,i){const o=this._fromType(t);Ct(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const c=this.toSeconds(n);return this._assertRange(o),Ct(isFinite(o)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._events.add({constant:i,time:c,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",t,c,i),this._param.setTargetAtTime(o,c,i),this}setValueCurveAtTime(t,n,i,o=1){i=this.toSeconds(i),n=this.toSeconds(n);const c=this._fromType(t[0])*o;this.setValueAtTime(this._toType(c),n);const u=i/(t.length-1);for(let d=1;d<t.length;d++){const f=this._fromType(t[d])*o;this.linearRampToValueAtTime(this._toType(f),n+d*u)}return this}cancelScheduledValues(t){const n=this.toSeconds(t);return Ct(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(t){const n=this.toSeconds(t),i=this._fromType(this.getValueAtTime(n));Ct(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+i);const o=this._events.get(n),c=this._events.getAfter(n);return o&&ns(o.time,n)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),c.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(i),n):c.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(i),n)),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}rampTo(t,n=.1,i){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,n,i):this.linearRampTo(t,n,i),this}apply(t){const n=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(n),n);const i=this._events.get(n);if(i&&i.type==="setTargetAtTime"){const o=this._events.getAfter(i.time),c=o?o.time:n+2,u=(c-n)/10;for(let d=n;d<c;d+=u)t.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?t.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?t.setTargetAtTime(o.value,o.time,o.constant):t[o.type](o.value,o.time)}),this}setParam(t){Ct(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(t),this._param=t,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,n,i,o,c){return i+(n-i)*Math.exp(-(c-t)/o)}_linearInterpolate(t,n,i,o,c){return n+(o-n)*((c-t)/(i-t))}_exponentialInterpolate(t,n,i,o,c){return n*Math.pow(o/n,(c-t)/(i-t))}}class Et extends an{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return wt(this.input)?oa(this.input)||this.input instanceof oe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return wt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return wt(t)&&(t instanceof Et||ki(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(i=>{i.channelCount=t.channelCount,i.channelCountMode=t.channelCountMode,i.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();Ct(t.length>0,"ToneAudioNode does not have any internal nodes");const n=t[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:t}))}connect(t,n=0,i=0){return Cr(this,t,n,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Ic("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,n=0,i=0){return ME(this,t,n,i),this}chain(...t){return To(this,...t),this}fan(...t){return t.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),wt(this.input)&&(this.input instanceof Et?this.input.dispose():ki(this.input)&&this.input.disconnect()),wt(this.output)&&(this.output instanceof Et?this.output.dispose():ki(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function To(...r){const t=r.shift();r.reduce((n,i)=>(n instanceof Et?n.connect(i):ki(n)&&Cr(n,i),i),t)}function Cr(r,t,n=0,i=0){for(Ct(wt(r),"Cannot connect from undefined node"),Ct(wt(t),"Cannot connect to undefined node"),(t instanceof Et||ki(t))&&Ct(t.numberOfInputs>0,"Cannot connect to node with no inputs"),Ct(r.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Et||t instanceof oe;)wt(t.input)&&(t=t.input);for(;r instanceof Et;)wt(r.output)&&(r=r.output);oa(t)?r.connect(t,n):r.connect(t,n,i)}function ME(r,t,n=0,i=0){if(wt(t))for(;t instanceof Et;)t=t.input;for(;!ki(r);)wt(r.output)&&(r=r.output);oa(t)?r.disconnect(t,n):ki(t)?r.disconnect(t,n,i):r.disconnect()}class ve extends Et{constructor(){const t=St(ve.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new oe({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),be(this,"gain")}static getDefaults(){return Object.assign(Et.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class gr extends Et{constructor(t){super(t),this.onended=$t,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ve({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const i=this.toSeconds(n);return this._startTime!==-1&&i>=this._startTime&&(this._stopTime===-1||i<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Et.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:$t})}_startGain(t,n=1){Ct(this._startTime===-1,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=t+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,t+i):this._gainNode.gain.exponentialApproachValueAtTime(n,t,i)):this._gainNode.gain.setValueAtTime(n,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Ct(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==$t&&(this.onended(this),this.onended=$t,!this.context.isOffline)){const t=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ct(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=$t,this}}class cd extends gr{constructor(){const t=St(cd.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Cr(this._source,this._gainNode),this.offset=new oe({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(gr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const n=this.toSeconds(t);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ue extends Et{constructor(){const t=St(ue.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new cd({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Et.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,n=0,i=0){return ud(this,t,n,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,n){return this._param.setValueAtTime(t,n),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,n){return this._param.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,n){return this._param.exponentialRampToValueAtTime(t,n),this}exponentialRampTo(t,n,i){return this._param.exponentialRampTo(t,n,i),this}linearRampTo(t,n,i){return this._param.linearRampTo(t,n,i),this}targetRampTo(t,n,i){return this._param.targetRampTo(t,n,i),this}exponentialApproachValueAtTime(t,n,i){return this._param.exponentialApproachValueAtTime(t,n,i),this}setTargetAtTime(t,n,i){return this._param.setTargetAtTime(t,n,i),this}setValueCurveAtTime(t,n,i,o){return this._param.setValueCurveAtTime(t,n,i,o),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,n,i){return this._param.rampTo(t,n,i),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function ud(r,t,n,i){(t instanceof oe||oa(t)||t instanceof ue&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof ue&&(t.overridden=!0)),Cr(r,t,n,i)}class hd extends oe{constructor(){const t=St(hd.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new Wn(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(oe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,n,i){n=this.toSeconds(n),this.setRampPoint(n);const o=this._fromType(t),c=this._events.get(n),u=Math.round(Math.max(1/i,1));for(let d=0;d<=u;d++){const f=i*d+n,p=this._exponentialApproach(c.time,c.value,o,i,f);this.linearRampToValueAtTime(this._toType(p),f)}return this}setValueAtTime(t,n){const i=this.toSeconds(n);super.setValueAtTime(t,n);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,n){const i=this.toSeconds(n);super.linearRampToValueAtTime(t,n);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,n){n=this.toSeconds(n);const i=this._fromType(t),o=this._events.get(n),c=Math.round(Math.max((n-o.time)*10,1)),u=(n-o.time)/c;for(let d=0;d<=c;d++){const f=u*d+o.time,p=this._exponentialInterpolate(o.time,o.value,n,i,f);this.linearRampToValueAtTime(this._toType(p),f)}return this}_getTicksUntilEvent(t,n){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Vn(t.ticks)){const u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}const i=this._fromType(this.getValueAtTime(t.time));let o=this._fromType(this.getValueAtTime(n));const c=this._events.get(n);return c&&c.time===n&&c.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-t.time)*(i+o)+t.ticks}getTicksAtTime(t){const n=this.toSeconds(t),i=this._events.get(n);return Math.max(this._getTicksUntilEvent(i,n),0)}getDurationOfTicks(t,n){const i=this.toSeconds(n),o=this.getTicksAtTime(n);return this.getTimeOfTick(o+t)-i}getTimeOfTick(t){const n=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(n&&n.ticks===t)return n.time;if(n&&i&&i.type==="linearRampToValueAtTime"&&n.value!==i.value){const o=this._fromType(this.getValueAtTime(n.time)),u=(this._fromType(this.getValueAtTime(i.time))-o)/(i.time-n.time),d=Math.sqrt(Math.pow(o,2)-2*u*(n.ticks-t)),f=(-o+d)/u,p=(-o-d)/u;return(f>0?f:p)+n.time}else return n?n.value===0?1/0:n.time+(t-n.ticks)/n.value:t/this._initialValue}ticksToTime(t,n){return this.getDurationOfTicks(t,n)}timeToTicks(t,n){const i=this.toSeconds(n),o=this.toSeconds(t),c=this.getTicksAtTime(i);return this.getTicksAtTime(i+o)-c}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const n=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class fd extends ue{constructor(){const t=St(fd.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new hd({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(ue.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,n){return this._param.ticksToTime(t,n)}timeToTicks(t,n){return this._param.timeToTicks(t,n)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,n){return this._param.getDurationOfTicks(t,n)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class dd extends an{constructor(){const t=St(dd.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new zo,this._tickOffset=new Wn,this._ticksAtTime=new Wn,this._secondsAtTime=new Wn,this.frequency=new fd({context:this.context,units:t.units,value:t.frequency}),be(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},an.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,n){const i=this.toSeconds(t);return this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),wt(n)&&this.setTicksAtTime(n,i),this._ticksAtTime.cancel(i),this._secondsAtTime.cancel(i)),this}stop(t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="stopped"){const i=this._state.get(n);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const n=this.toSeconds(t),i=this._state.getLastState("stopped",n),o=this._ticksAtTime.get(n),c={state:"paused",time:n};this._state.add(c);let u=o||i,d=o?o.ticks:0,f=null;return this._state.forEachBetween(u.time,n+this.sampleTime,p=>{let g=u.time;const y=this._tickOffset.get(p.time);y&&y.time>=u.time&&(d=y.ticks,g=y.time),u.state==="started"&&p.state!=="started"&&(d+=this.frequency.getTicksAtTime(p.time)-this.frequency.getTicksAtTime(g),p.time!==c.time&&(f={state:p.state,time:p.time,ticks:d})),u=p}),this._state.remove(c),f&&this._ticksAtTime.add(f),d}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const n=this.now(),i=this.frequency.timeToTicks(t,n);this.setTicksAtTime(i,n)}getSecondsAtTime(t){t=this.toSeconds(t);const n=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);const o=this._secondsAtTime.get(t);let c=o||n,u=o?o.seconds:0,d=null;return this._state.forEachBetween(c.time,t+this.sampleTime,f=>{let p=c.time;const g=this._tickOffset.get(f.time);g&&g.time>=c.time&&(u=g.seconds,p=g.time),c.state==="started"&&f.state!=="started"&&(u+=f.time-p,f.time!==i.time&&(d={state:f.state,time:f.time,seconds:u})),c=f}),this._state.remove(i),d&&this._secondsAtTime.add(d),u}setTicksAtTime(t,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,n),ticks:t,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,n=this.now()){const i=this._tickOffset.get(n),o=this._state.get(n),c=Math.max(i.time,o.time),u=this.frequency.getTicksAtTime(c)+t-i.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,n,i){let o=this._state.get(t);this._state.forEachBetween(t,n,u=>{o&&o.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(o.time,t),u.time-this.sampleTime,i),o=u});let c=null;if(o&&o.state==="started"){const u=Math.max(o.time,t),d=this.frequency.getTicksAtTime(u),f=this.frequency.getTicksAtTime(o.time),p=d-f;let g=Math.ceil(p)-p;g=ns(g,1)?0:g;let y=this.frequency.getTimeOfTick(d+g);for(;y<n;){try{i(y,Math.round(this.getTicksAtTime(y)))}catch(v){c=v;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Hc extends an{constructor(){const t=St(Hc.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=$t,this._lastUpdate=0,this._state=new zo("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new dd({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,be(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(an.getDefaults(),{callback:$t,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,n){y_(this.context);const i=this.toSeconds(t);return this.log("start",i),this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,n),i<this._lastUpdate&&this.emit("start",i,n)),this}stop(t){const n=this.toSeconds(t);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,n){return this._tickSource.setTicksAtTime(t,n),this}getTimeOfTick(t,n=this.now()){return this._tickSource.getTimeOfTick(t,n)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,n){const i=this.toSeconds(n),o=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(o+t,i)}_loop(){const t=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",t,n),t!==n&&(this._state.forEachBetween(t,n,i=>{switch(i.state){case"started":const o=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,o);break;case"stopped":i.time!==0&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time);break}}),this._tickSource.forEachTickBetween(t,n,(i,o)=>{this.callback(i,o)}))}getStateAtTime(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}wo.mixin(Hc);class Tr extends Et{constructor(){const t=St(Tr.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new ve({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,be(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class pd extends Et{constructor(){const t=St(pd.getDefaults(),arguments);super(t),this.name="Destination",this.input=new Tr({context:this.context}),this.output=new ve({context:this.context}),this.volume=this.input.volume,To(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),To(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}qc(r=>{r.destination=new pd({context:r})});Pc(r=>{r.destination.dispose()});class RE extends Et{constructor(){super(...arguments),this.name="Listener",this.positionX=new oe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new oe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new oe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new oe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new oe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new oe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new oe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new oe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new oe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Et.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}qc(r=>{r.listener=new RE({context:r})});Pc(r=>{r.listener.dispose()});class md extends Ws{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=St(md.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(n=>{this._loadingCount++;const i=t.urls[n];this.add(n,i,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:$t,onload:$t,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Ct(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,n])=>n.loaded)}add(t,n,i=$t,o=$t){return Qs(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new re(this.baseUrl+n,i,o))):this._buffers.set(t.toString(),new re(n,i,o)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Mc extends jn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return aa(super._frequencyToUnits(t))}_ticksToUnits(t){return aa(super._ticksToUnits(t))}_beatsToUnits(t){return aa(super._beatsToUnits(t))}_secondsToUnits(t){return aa(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return M_(this.toMidi())}transpose(t){return new Mc(this.context,this.toMidi()+t)}}class qe extends cr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class kE extends an{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Wn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,n){return this._events.add({callback:t,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,n=>{t-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}qc(r=>{r.draw=new kE({context:r})});Pc(r=>{r.draw.dispose()});class OE extends Ws{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Ct(wt(t.time),"Events must have a time property"),Ct(wt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let n=new NE(t.time,t.time+t.duration,t);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(t){if(this._root!==null){const n=[];this._root.search(t.time,n);for(const i of n)if(i.event===t){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,n=>this.remove(n)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,n){t.parent!==null?(t.isLeftChild()?t.parent.left=n:t.parent.right=n,this._rebalance(t.parent)):this._setRoot(n)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const n=t.getBalance();let i,o=null;if(n>0)if(t.left.right===null)i=t.left,i.right=t.right,o=i;else{for(i=t.left.right;i.right!==null;)i=i.right;i.parent&&(i.parent.right=i.left,o=i.parent,i.left=t.left,i.right=t.right)}else if(t.right.left===null)i=t.right,i.left=t.left,o=i;else{for(i=t.right.left;i.left!==null;)i=i.left;i.parent&&(i.parent.left=i.right,o=i.parent,i.left=t.left,i.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=i:t.parent.right=i:this._setRoot(i),o&&this._rebalance(o)}t.dispose()}_rotateLeft(t){const n=t.parent,i=t.isLeftChild(),o=t.right;o&&(t.right=o.left,o.left=t),n!==null?i?n.left=o:n.right=o:this._setRoot(o)}_rotateRight(t){const n=t.parent,i=t.isLeftChild(),o=t.left;o&&(t.left=o.right,o.right=t),n!==null?i?n.left=o:n.right=o:this._setRoot(o)}_rebalance(t){const n=t.getBalance();n>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):n<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const n=[];if(this._root.search(t,n),n.length>0){let i=n[0];for(let o=1;o<n.length;o++)n[o].low>i.low&&(i=n[o]);return i.event}}return null}forEach(t){if(this._root!==null){const n=[];this._root.traverse(i=>n.push(i)),n.forEach(i=>{i.event&&t(i.event)})}return this}forEachAtTime(t,n){if(this._root!==null){const i=[];this._root.search(t,i),i.forEach(o=>{o.event&&n(o.event)})}return this}forEachFrom(t,n){if(this._root!==null){const i=[];this._root.searchAfter(t,i),i.forEach(o=>{o.event&&n(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class NE{constructor(t,n,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=t,this.high=n,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,n){t>this.max||(this.left!==null&&this.left.search(t,n),this.low<=t&&this.high>t&&n.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,n))}searchAfter(t,n){this.low>=t&&(n.push(this),this.left!==null&&this.left.searchAfter(t,n)),this.right!==null&&this.right.searchAfter(t,n)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class DE extends Ws{constructor(t){super(),this.name="TimelineValue",this._timeline=new Wn({memory:10}),this._initialValue=t}set(t,n){return this._timeline.add({value:t,time:n}),this}get(t){const n=this._timeline.get(t);return n?n.value:this._initialValue}}class wi extends Et{constructor(){super(St(wi.getDefaults(),arguments,["context"]))}connect(t,n=0,i=0){return ud(this,t,n,i),this}}class Bo extends wi{constructor(){const t=St(Bo.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Mn(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):aE(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(ue.getDefaults(),{length:1024})}setMap(t,n=1024){const i=new Float32Array(n);for(let o=0,c=n;o<c;o++){const u=o/(c-1)*2-1;i[o]=t(u,o)}return this.curve=i,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const n=["none","2x","4x"].some(i=>i.includes(t));Ct(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class gd extends wi{constructor(){const t=St(gd.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new Bo({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(wi.getDefaults(),{value:1})}_expFunc(t){return n=>Math.pow(Math.abs(n),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Li{constructor(t,n){this.id=Li._eventId++,this._remainderTime=0;const i=Object.assign(Li.getDefaults(),n);this.transport=t,this.callback=i.callback,this._once=i.once,this.time=Math.floor(i.time),this._remainderTime=i.time-this.time}static getDefaults(){return{callback:$t,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Li._eventId=0;class yd extends Li{constructor(t,n){super(t,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(yd.getDefaults(),n);this.duration=i.duration,this._interval=i.interval,this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Li.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return Ac(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new qe(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){Ac(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new qe(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(t);mr(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Fc extends an{constructor(){const t=St(Fc.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new DE(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Wn,this._repeatedEvents=new OE,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new Hc({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),be(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(an.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,n){if(this._loop.get(t)&&n>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),n=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const i=n%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(i*Math.PI)*this._swingAmount;t+=new qe(this.context,this._swingTicks*2/3).toSeconds()*o}K0(!0),this._timeline.forEachAtTime(n,i=>i.invoke(t)),K0(!1)}schedule(t,n){const i=new Li(this,{callback:t,time:new cr(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(t,n,i,o=1/0){const c=new yd(this,{callback:t,duration:new ss(this.context,o).toTicks(),interval:new ss(this.context,n).toTicks(),time:new cr(this.context,i).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,n){const i=new Li(this,{callback:t,once:!0,time:new cr(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const n=this._scheduledEvents[t.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,n){return this._scheduledEvents[t.id.toString()]={event:t,timeline:n},n.add(t),t.id}cancel(t=0){const n=this.toTicks(t);return this._timeline.forEachFrom(n,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(n,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(t,n)=>{n=new qe(this.context,n).toSeconds(),this.emit("start",t,n)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,n){this.context.resume();let i;return wt(n)&&(i=this.toTicks(n)),this._clock.start(t,i),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Mn(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new ss(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new ss(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,n){return this.loopStart=t,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new qe(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),n=this._clock.getTicksAtTime(t);return new qe(this.context,n).toBarsBeatsSixteenths()}set position(t){const n=this.toTicks(t);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(t){const n=this.now(),i=this._clock.frequency.timeToTicks(t,n);this.ticks=i}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const n=this.now();if(this.state==="started"){const i=this._clock.getTicksAtTime(n),o=this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,n),c=n+o;this.emit("stop",c),this._clock.setTicksAtTime(t,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this.emit("ticks",n),this._clock.setTicksAtTime(t,n)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const n=this.now(),i=this.getTicksAtTime(n),o=t-i%t;return this._clock.nextTickTime(o,n)}}syncSignal(t,n){const i=this.now();let o=this.bpm,c=1/(60/o.getValueAtTime(i)/this.PPQ),u=[];if(t.units==="time"){const f=.015625/c,p=new ve(f),g=new gd(-1),y=new ve(f);o.chain(p,g,y),o=y,c=1/c,u=[p,g,y]}n||(t.getValueAtTime(i)!==0?n=t.getValueAtTime(i)/c:n=0);const d=new ve(n);return o.connect(d),d.connect(t._param),u.push(d),this._syncedSignals.push({initial:t.value,nodes:u,signal:t}),t.value=0,this}unsyncSignal(t){for(let n=this._syncedSignals.length-1;n>=0;n--){const i=this._syncedSignals[n];i.signal===t&&(i.nodes.forEach(o=>o.dispose()),i.signal.value=i.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),rd(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}wo.mixin(Fc);qc(r=>{r.transport=new Fc({context:r})});Pc(r=>{r.transport.dispose()});class rn extends Et{constructor(t){super(t),this.input=void 0,this._state=new zo("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=$t,this._syncedStop=$t,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Tr({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,be(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,onstop:$t,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,n,i){let o=Vn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")Ct(mr(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,n,i);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const c=this._state.get(o);c&&(c.offset=this.toSeconds(ms(n,0)),c.duration=i?this.toSeconds(i):void 0);const u=this.context.transport.schedule(d=>{this._start(d,n,i)},o);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else y_(this.context),this._start(o,n,i);return this}stop(t){let n=Vn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||wt(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const i=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(i)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(t,n,i){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,n,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,n)=>{if(mr(n,0)){const i=this._state.get(n);if(i&&i.state==="started"&&i.time!==n){const o=n-this.toSeconds(i.time);let c;i.duration&&(c=this.toSeconds(i.duration)-o),this._start(t,this.toSeconds(i.offset)+o,c)}}},this._syncedStop=t=>{const n=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=$t,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class jo extends gr{constructor(){const t=St(jo.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Cr(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new oe({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new re(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(gr.getDefaults(),{url:new re,loop:!1,loopEnd:0,loopStart:0,onload:$t,onerror:$t,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,n,i,o=1){Ct(this.buffer.loaded,"buffer is either not set or not loaded");const c=this.toSeconds(t);this._startGain(c,o),this.loop?n=ms(n,this.loopStart):n=ms(n,0);let u=Math.max(this.toSeconds(n),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,f=this.toSeconds(this.loopStart),p=d-f;Of(u,d)&&(u=(u-f)%p+f),ns(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Ac(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,u)),wt(i)){let d=this.toSeconds(i);d=Math.max(d,0),this.stop(c+d)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Rc extends rn{constructor(){const t=St(Rc.getDefaults(),arguments,["type"]);super(t),this.name="Noise",this._source=null,this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(rn.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(Ct(t in J0,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const n=J0[this._type];this._source=new jo({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(n.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const nr=44100*5,gf=2,Gs={brown:null,pink:null,white:null},J0={get brown(){if(!Gs.brown){const r=[];for(let t=0;t<gf;t++){const n=new Float32Array(nr);r[t]=n;let i=0;for(let o=0;o<nr;o++){const c=Math.random()*2-1;n[o]=(i+.02*c)/1.02,i=n[o],n[o]*=3.5}}Gs.brown=new re().fromArray(r)}return Gs.brown},get pink(){if(!Gs.pink){const r=[];for(let t=0;t<gf;t++){const n=new Float32Array(nr);r[t]=n;let i,o,c,u,d,f,p;i=o=c=u=d=f=p=0;for(let g=0;g<nr;g++){const y=Math.random()*2-1;i=.99886*i+y*.0555179,o=.99332*o+y*.0750759,c=.969*c+y*.153852,u=.8665*u+y*.3104856,d=.55*d+y*.5329522,f=-.7616*f-y*.016898,n[g]=i+o+c+u+d+f+p+y*.5362,n[g]*=.11,p=y*.115926}}Gs.pink=new re().fromArray(r)}return Gs.pink},get white(){if(!Gs.white){const r=[];for(let t=0;t<gf;t++){const n=new Float32Array(nr);r[t]=n;for(let i=0;i<nr;i++)n[i]=Math.random()*2-1}Gs.white=new re().fromArray(r)}return Gs.white}};function ha(r,t){return je(this,void 0,void 0,function*(){const n=t/r.context.sampleRate,i=new od(1,n,r.context.sampleRate);return new r.constructor(Object.assign(r.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class _d extends gr{constructor(){const t=St(_d.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Cr(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new oe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new oe({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),be(this,["frequency","detune"])}static getDefaults(){return Object.assign(gr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const n=this.toSeconds(t);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Be extends rn{constructor(){const t=St(Be.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new ue({context:this.context,units:"frequency",value:t.frequency}),be(this,"frequency"),this.detune=new ue({context:this.context,units:"cents",value:t.detune}),be(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(rn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const n=this.toSeconds(t),i=new _d({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(t){const n=this.toSeconds(t);this._oscillator&&this._oscillator.stop(n)}_restart(t){const n=this.toSeconds(t);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Be._periodicWaveCache.find(n=>n.phase===this._phase&&mE(n.partials,this._partials));{const t=Be._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const n=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const i=this._getCachedPeriodicWave();if(wt(i)){const{partials:o,wave:c}=i;this._wave=c,this._partials=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[o,c]=this._getRealImaginary(t,this._phase),u=this.context.createPeriodicWave(o,c);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Be._periodicWaveCache.push({imag:c,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:o,type:this._type,wave:this._wave}),Be._periodicWaveCache.length>100&&Be._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Di(t,0);let n=this._type;const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(n=i[1]),this._type!=="custom")t===0?this.type=n:this.type=n+t.toString();else{const o=new Float32Array(t);this._partials.forEach((c,u)=>o[u]=c),this._partials=Array.from(o),this.type=this._type}}_getRealImaginary(t,n){let o=2048;const c=new Float32Array(o),u=new Float32Array(o);let d=1;if(t==="custom"){if(d=this._partials.length+1,this._partialCount=this._partials.length,o=d,this._partials.length===0)return[c,u]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);f?(d=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),t=f[1],d=Math.max(d,2),o=d):this._partialCount=0,this._partials=[]}for(let f=1;f<o;++f){const p=2/(f*Math.PI);let g;switch(t){case"sine":g=f<=d?1:0,this._partials[f-1]=g;break;case"square":g=f&1?2*p:0,this._partials[f-1]=g;break;case"sawtooth":g=p*(f&1?1:-1),this._partials[f-1]=g;break;case"triangle":f&1?g=2*(p*p)*(f-1>>1&1?-1:1):g=0,this._partials[f-1]=g;break;case"custom":g=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}g!==0?(c[f]=-g*Math.sin(n*f),u[f]=g*Math.cos(n*f)):(c[f]=0,u[f]=0)}return[c,u]}_inverseFFT(t,n,i){let o=0;const c=t.length;for(let u=0;u<c;u++)o+=t[u]*Math.cos(u*i)+n[u]*Math.sin(u*i);return o}getInitialValue(){const[t,n]=this._getRealImaginary(this._type,0);let i=0;const o=Math.PI*2,c=32;for(let u=0;u<c;u++)i=Math.max(this._inverseFFT(t,n,u/c*o),i);return yE(-this._inverseFFT(t,n,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return je(this,arguments,void 0,function*(t=1024){return ha(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Be._periodicWaveCache=[];class wE extends wi{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Bo({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class zi extends ue{constructor(){const t=St(zi.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ve({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ue.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Yc extends rn{constructor(){const t=St(Yc.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new wE({context:this.context}),this._modulationNode=new ve({context:this.context}),this._carrier=new Be({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Be({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new zi({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),be(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Be.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return je(this,arguments,void 0,function*(t=1024){return ha(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Vo extends rn{constructor(){const t=St(Vo.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new ve({context:this.context,gain:0}),this._carrier=new Be({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new ue({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Be({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new zi({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new zi({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),be(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Be.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return je(this,arguments,void 0,function*(t=1024){return ha(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Uo extends rn{constructor(){const t=St(Uo.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new ve({context:this.context,gain:0}),this._thresh=new Bo({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new ue({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Be({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),be(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(rn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return je(this,arguments,void 0,function*(t=1024){return ha(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Xc extends rn{constructor(){const t=St(Xc.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new ue({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ue({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,be(this,["frequency","detune"])}static getDefaults(){return Object.assign(Be.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(n=>n.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(n=>n.stop(t))}_restart(t){this._forEach(n=>n.restart(t))}_forEach(t){for(let n=0;n<this._oscillators.length;n++)t(this._oscillators[n],n)}get type(){return this._type}set type(t){this._type=t,this._forEach(n=>n.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const n=-t/2,i=t/(this._oscillators.length-1);this._forEach((o,c)=>o.detune.value=n+i*c)}}get count(){return this._oscillators.length}set count(t){if(Di(t,1),this._oscillators.length!==t){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<t;n++){const i=new Be({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+n/t*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):$t});this.type==="custom"&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[n]=i}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((n,i)=>n.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(n=>n.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(n=>n.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(n=>n.partialCount=t),this._type=this._oscillators[0].type}asArray(){return je(this,arguments,void 0,function*(t=1024){return ha(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class Qc extends rn{constructor(){const t=St(Qc.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new zi({context:this.context,value:2}),this._pulse=new Uo({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Be({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),be(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(rn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return je(this,arguments,void 0,function*(t=1024){return ha(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const ty={am:Yc,fat:Xc,fm:Vo,oscillator:Be,pulse:Uo,pwm:Qc};class kc extends rn{constructor(){const t=St(kc.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new ue({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ue({context:this.context,units:"cents",value:t.detune}),be(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Be.getDefaults(),Vo.getDefaults(),Yc.getDefaults(),Xc.getDefaults(),Uo.getDefaults(),Qc.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const n=ty[t],i=this.now();if(this._oscillator){const o=this._oscillator;o.stop(i),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),t==="fm"?this.type="fm"+n:t==="am"?this.type="am"+n:t==="fat"?this.type="fat"+n:t==="oscillator"?this.type=n:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,n){return t instanceof ty[n]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&as(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&as(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Qs(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return je(this,arguments,void 0,function*(t=1024){return ha(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class vd extends ue{constructor(){super(St(vd.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new ve({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,To(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ue.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class bd extends wi{constructor(){const t=St(bd.getDefaults(),arguments,["min","max"]);super(t),this.name="Scale",this._mult=this.input=new zi({context:this.context,value:t.max-t.min}),this._add=this.output=new vd({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(wi.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function R_(r,t=1/0){const n=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(c){Di(c,r,t),n.set(this,c)}})}}function Ks(r,t=1/0){const n=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(c){Di(this.toSeconds(c),r,t),n.set(this,c)}})}}class $c extends rn{constructor(){const t=St($c.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new re({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(rn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:$t,onerror:$t,playbackRate:1,reverse:!1})}load(t){return je(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=$t){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,n,i){return super.start(t,n,i),this}_start(t,n,i){this._loop?n=ms(n,this._loopStart):n=ms(n,0);const o=this.toSeconds(n),c=i;i=ms(i,Math.max(this._buffer.duration-o,0));let u=this.toSeconds(i);u=u/this._playbackRate,t=this.toSeconds(t);const d=new jo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&Vn(c)?d.start(t,o):d.start(t,o,u-this.toSeconds(this.fadeOut))}_stop(t){const n=this.toSeconds(t);this._activeSources.forEach(i=>i.stop(n))}restart(t,n,i){return super.restart(t,n,i),this}_restart(t,n,i){var o;(o=[...this._activeSources].pop())===null||o===void 0||o.stop(t),this._start(t,n,i)}seek(t,n){const i=this.toSeconds(n);if(this._state.getValueAtTime(i)==="started"){const o=this.toSeconds(t);this._stop(i),this._start(i,o)}return this}setLoopPoints(t,n){return this.loopStart=t,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Di(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Di(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(n=>{n.loop=t}),t)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const n=this.now(),i=this._state.getNextState("stopped",n);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(t,n)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}cs([Ks(0)],$c.prototype,"fadeIn",void 0);cs([Ks(0)],$c.prototype,"fadeOut",void 0);class rs extends Et{constructor(){const t=St(rs.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new ue({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Et.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,n){if(Qs(t))return t;{let i;for(i in sc)if(sc[i][n]===t)return i;return t}}_setCurve(t,n,i){if(Qs(i)&&Reflect.has(sc,i)){const o=sc[i];Ri(o)?t!=="_decayCurve"&&(this[t]=o[n]):this[t]=o}else if(Mn(i)&&t!=="_decayCurve")this[t]=i;else throw new Error("Envelope: invalid curve: "+i)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,n=1){this.log("triggerAttack",t,n),t=this.toSeconds(t);let o=this.toSeconds(this.attack);const c=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0){const d=1/o;o=(1-u)/d}if(o<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(n,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,o,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,o,t);else{this._sig.cancelAndHoldAtTime(t);let d=this._attackCurve;for(let f=1;f<d.length;f++)if(d[f-1]<=u&&u<=d[f]){d=this._attackCurve.slice(f),d[0]=u;break}this._sig.setValueCurveAtTime(d,t,o,n)}if(c&&this.sustain<1){const d=n*this.sustain,f=t+o;this.log("decay",f),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(d,c+f):this._sig.exponentialApproachValueAtTime(d,f,c)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const n=this.getValueAtTime(t);if(n>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,i,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,i,t):(Ct(Mn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,i,n))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,n,i=1){return n=this.toSeconds(n),this.triggerAttack(n,i),this.triggerRelease(n+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,n=0,i=0){return ud(this,t,n,i),this}asArray(){return je(this,arguments,void 0,function*(t=1024){const n=t/this.context.sampleRate,i=new od(1,n,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=o+this.toSeconds(this.release),u=c*.1,d=c+u,f=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/d,decay:n*this.toSeconds(this.decay)/d,release:n*this.toSeconds(this.release)/d,context:i}));return f._sig.toDestination(),f.triggerAttackRelease(n*(o+u)/d,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}cs([Ks(0)],rs.prototype,"attack",void 0);cs([Ks(0)],rs.prototype,"decay",void 0);cs([R_(0,1)],rs.prototype,"sustain",void 0);cs([Ks(0)],rs.prototype,"release",void 0);const sc=(()=>{let t,n;const i=[];for(t=0;t<128;t++)i[t]=Math.sin(t/127*(Math.PI/2));const o=[],c=6.4;for(t=0;t<127;t++){n=t/127;const v=Math.sin(n*(Math.PI*2)*c-Math.PI/2)+1;o[t]=v/10+n*.83}o[127]=1;const u=[],d=5;for(t=0;t<128;t++)u[t]=Math.ceil(t/127*d)/d;const f=[];for(t=0;t<128;t++)n=t/127,f[t]=.5*(1-Math.cos(Math.PI*n));const p=[];for(t=0;t<128;t++){n=t/127;const v=Math.pow(n,3)*4+.2,b=Math.cos(v*Math.PI*2*n);p[t]=Math.abs(b*(1-n))}function g(v){const b=new Array(v.length);for(let S=0;S<v.length;S++)b[S]=1-v[S];return b}function y(v){return v.slice(0).reverse()}return{bounce:{In:g(p),Out:p},cosine:{In:i,Out:y(i)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:g(o)},sine:{In:f,Out:g(f)},step:{In:u,Out:g(u)}}})();class ys extends Et{constructor(){const t=St(ys.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new Tr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,be(this,"volume")}static getDefaults(){return Object.assign(Et.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,n){const i=this["_original_"+t]=this[t];this[t]=(...o)=>{const c=o[n],u=this.context.transport.schedule(d=>{o[n]=d,i.apply(this,o)},c);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,n,i,o){const c=this.toSeconds(i),u=this.toSeconds(n);return this.triggerAttack(t,c,o),this.triggerRelease(c+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class $s extends ys{constructor(){const t=St($s.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(ys.getDefaults(),{detune:0,onsilence:$t,portamento:0})}triggerAttack(t,n,i=1){this.log("triggerAttack",t,n,i);const o=this.toSeconds(n);return this._triggerEnvelopeAttack(o,i),this.setNote(t,o),this}triggerRelease(t){this.log("triggerRelease",t);const n=this.toSeconds(t);return this._triggerEnvelopeRelease(n),this}setNote(t,n){const i=this.toSeconds(n),o=t instanceof jn?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,c,i)}else this.frequency.setValueAtTime(o,i);return this}}cs([Ks(0)],$s.prototype,"portamento",void 0);class Zc extends rs{constructor(){super(St(Zc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ve({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class En extends $s{constructor(){const t=St(En.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new kc(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Zc(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),be(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign($s.getDefaults(),{envelope:Object.assign(pr(rs.getDefaults(),Object.keys(Et.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(pr(kc.getDefaults(),[...Object.keys(rn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,n){if(this.envelope.triggerAttack(t,n),this.oscillator.start(t),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+i+o)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Oc extends Et{constructor(){const t=St(Oc.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new oe({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new oe({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new oe({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new oe({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(Et.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){Ct(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const n=new Float32Array(t);for(let u=0;u<t;u++){const f=Math.pow(u/t,2)*19980+20;n[u]=f}const i=new Float32Array(t),o=new Float32Array(t),c=this.context.createBiquadFilter();return c.type=this.type,c.Q.value=this.Q.value,c.frequency.value=this.frequency.value,c.gain.value=this.gain.value,c.getFrequencyResponse(n,i,o),i}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Sd extends Et{constructor(){const t=St(Sd.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new ve({context:this.context}),this.output=new ve({context:this.context}),this._filters=[],this._filters=[],this.Q=new ue({context:this.context,units:"positive",value:t.Q}),this.frequency=new ue({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ue({context:this.context,units:"cents",value:t.detune}),this.gain=new ue({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,be(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Et.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){Ct(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(i=>i.type=t)}get rolloff(){return this._rolloff}set rolloff(t){const n=as(t)?t:parseInt(t,10),i=[-12,-24,-48,-96];let o=i.indexOf(n);Ct(o!==-1,`rolloff can only be ${i.join(", ")}`),o+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(c=>c.disconnect()),this._filters=new Array(o);for(let c=0;c<o;c++){const u=new Oc({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[c]=u}this._internalChannels=this._filters,To(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const n=new Oc({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),i=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(t).forEach((c,u)=>i[u]*=c)}),n.dispose(),i}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),rd(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}const ey=[1,1.483,1.932,2.546,2.63,3.897];class Cd extends $s{constructor(){const t=St(Cd.getDefaults(),arguments);super(t),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new ue({context:this.context,units:"cents",value:t.detune}),this.frequency=new ue({context:this.context,units:"frequency"}),this._amplitude=new ve({context:this.context,gain:0}).connect(this.output),this._highpass=new Sd({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let n=0;n<ey.length;n++){const i=new Vo({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:n===0?()=>this.onsilence(this):$t,type:"square"});i.connect(this._highpass),this._oscillators[n]=i;const o=new zi({context:this.context,value:ey[n]});this._freqMultipliers[n]=o,this.frequency.chain(o,i.frequency),this.detune.connect(i.detune)}this._filterFreqScaler=new bd({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new rs({attack:t.envelope.attack,attackCurve:"linear",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return Oi($s.getDefaults(),{envelope:Object.assign(pr(rs.getDefaults(),Object.keys(Et.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t,n=1){return this.envelope.triggerAttack(t,n),this._oscillators.forEach(i=>i.start(t)),this.envelope.sustain===0&&this._oscillators.forEach(i=>{i.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach(n=>n.stop(t+this.toSeconds(this.envelope.release))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach(n=>n.modulationIndex.value=t)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach(n=>n.harmonicity.value=t)}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach(t=>t.dispose()),this._freqMultipliers.forEach(t=>t.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Io extends En{constructor(){const t=St(Io.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,be(this,["oscillator","envelope"])}static getDefaults(){return Oi($s.getDefaults(),En.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,n){const i=this.toSeconds(n),o=this.toFrequency(t instanceof jn?t.toFrequency():t),c=o*this.octaves;return this.oscillator.frequency.setValueAtTime(c,i),this.oscillator.frequency.exponentialRampToValueAtTime(o,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}cs([R_(0)],Io.prototype,"octaves",void 0);cs([Ks(0)],Io.prototype,"pitchDecay",void 0);class Td extends ys{constructor(){const t=St(Td.getDefaults(),arguments);super(t),this.name="NoiseSynth",this.noise=new Rc(Object.assign({context:this.context},t.noise)),this.envelope=new Zc(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(ys.getDefaults(),{envelope:Object.assign(pr(rs.getDefaults(),Object.keys(Et.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(pr(Rc.getDefaults(),Object.keys(rn.getDefaults())),{type:"white"})})}triggerAttack(t,n=1){return t=this.toSeconds(t),this.envelope.triggerAttack(t,n),this.noise.start(t),this.envelope.sustain===0&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(t,n,i=1){return n=this.toSeconds(n),t=this.toSeconds(t),this.triggerAttack(n,i),this.triggerRelease(n+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const k_=new Set;function xd(r){k_.add(r)}function O_(r,t){const n=`registerProcessor("${r}", ${t})`;k_.add(n)}const LE=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;xd(LE);const zE=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;xd(zE);const BE=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;xd(BE);const jE="feedback-comb-filter",VE=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;O_(jE,VE);class es extends ys{constructor(){const t=St(es.getDefaults(),arguments,["voice","options"]);super(t),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=o=>this.releaseAll(o),Ct(!as(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const n=t.voice.getDefaults();this.options=Object.assign(n,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const i=this._voices.indexOf(this._dummyVoice);this._voices.splice(i,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ys.getDefaults(),{maxPolyphony:32,options:{},voice:En})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const n=this._activeVoices.findIndex(i=>i.voice===t);this._activeVoices.splice(n,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Ct(t instanceof $s,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}else Ic("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),n=this._voices.indexOf(t);this._voices.splice(n,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,n,i){t.forEach(o=>{const c=new Mc(this.context,o).toMidi(),u=this._getNextAvailableVoice();u&&(u.triggerAttack(o,n,i),this._activeVoices.push({midi:c,voice:u,released:!1}),this.log("triggerAttack",o,n))})}_triggerRelease(t,n){t.forEach(i=>{const o=new Mc(this.context,i).toMidi(),c=this._activeVoices.find(({midi:u,released:d})=>u===o&&!d);c&&(c.voice.triggerRelease(n),c.released=!0,this.log("triggerRelease",i,n))})}_scheduleEvent(t,n,i,o){Ct(!this.disposed,"Synth was already disposed"),i<=this.now()?t==="attack"?this._triggerAttack(n,i,o):this._triggerRelease(n,i):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(t,n,i,o)},i-this.now())}triggerAttack(t,n,i){Array.isArray(t)||(t=[t]);const o=this.toSeconds(n);return this._scheduleEvent("attack",t,o,i),this}triggerRelease(t,n){Array.isArray(t)||(t=[t]);const i=this.toSeconds(n);return this._scheduleEvent("release",t,i),this}triggerAttackRelease(t,n,i,o){const c=this.toSeconds(i);if(this.triggerAttack(t,c,o),Mn(n)){Ct(Mn(t),"If the duration is an array, the notes must also be an array"),t=t;for(let u=0;u<t.length;u++){const d=n[Math.min(u,n.length-1)],f=this.toSeconds(d);Ct(f>0,"The duration must be greater than 0"),this.triggerRelease(t[u],c+f)}}else{const u=this.toSeconds(n);Ct(u>0,"The duration must be greater than 0"),this.triggerRelease(t,c+u)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){const n=pr(t,["onsilence","context"]);return this.options=Oi(this.options,n),this._voices.forEach(i=>i.set(n)),this._dummyVoice.set(n),this}get(){return this._dummyVoice.get()}releaseAll(t){const n=this.toSeconds(t);return this._activeVoices.forEach(({voice:i})=>{i.triggerRelease(n)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(t=>t.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Wc extends ys{constructor(){const t=St(Wc.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(t.urls).forEach(i=>{const o=parseInt(i,10);if(Ct(nc(i)||as(o)&&isFinite(o),`url key is neither a note or midi pitch: ${i}`),nc(i)){const c=new jn(this.context,i).toMidi();n[c]=t.urls[i]}else as(o)&&isFinite(o)&&(n[o]=t.urls[o])}),this._buffers=new md({urls:n,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(ys.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:$t,onerror:$t,release:.1,urls:{}})}_findClosest(t){let i=0;for(;i<96;){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,n,i=1){return this.log("triggerAttack",t,n,i),Array.isArray(t)||(t=[t]),t.forEach(o=>{const c=A_(new jn(this.context,o).toFrequency()),u=Math.round(c),d=c-u,f=this._findClosest(u),p=u-f,g=this._buffers.get(p),y=E_(f+d),v=new jo({url:g,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);v.start(n,0,g.duration/y,i),Mn(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(v),v.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),S=b.indexOf(v);S!==-1&&b.splice(S,1)}}}),this}triggerRelease(t,n){return this.log("triggerRelease",t,n),Array.isArray(t)||(t=[t]),t.forEach(i=>{const o=new jn(this.context,i).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const c=this._activeSources.get(o);n=this.toSeconds(n),c.forEach(u=>{u.stop(n)}),this._activeSources.set(o,[])}}),this}releaseAll(t){const n=this.toSeconds(t);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,n,i,o=1){const c=this.toSeconds(i);return this.triggerAttack(t,c,o),Mn(n)?(Ct(Mn(t),"notes must be an array when duration is array"),t.forEach((u,d)=>{const f=n[Math.min(d,n.length-1)];this.triggerRelease(u,c+this.toSeconds(f))})):this.triggerRelease(t,c+this.toSeconds(n)),this}add(t,n,i){if(Ct(nc(t)||isFinite(t),`note must be a pitch or midi: ${t}`),nc(t)){const o=new jn(this.context,t).toMidi();this._buffers.add(o,n,i)}else this._buffers.add(t,n,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}cs([Ks(0)],Wc.prototype,"attack",void 0);cs([Ks(0)],Wc.prototype,"release",void 0);class rr extends an{constructor(){const t=St(rr.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new zo("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(an.getDefaults(),{callback:$t,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,n=>{let i;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const o=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||as(this._loop)&&this._loop>1){i=1/0,as(this._loop)&&(i=this._loop*this._getLoopDuration());const c=this._state.getAfter(o);c!==null&&(i=Math.min(i,c.time-o)),i!==1/0&&(i=new qe(this.context,i));const u=new qe(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),u,new qe(this.context,o),i)}else n.id=this.context.transport.schedule(this._tick.bind(this),new qe(this.context,o))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const n=this.toTicks(t);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(t){this.cancel(t);const n=this.toTicks(t);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const i=this._state.getBefore(n);let o=n;i!==null&&(o=i.time),this._rescheduleEvents(o)}return this}cancel(t){t=ms(t,-1/0);const n=this.toTicks(t);return this._state.forEachFrom(n,i=>{this.context.transport.clear(i.id)}),this._state.cancel(n),this}_tick(t){const n=this.context.transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let i=.02;g_(this.humanize)||(i=this.toSeconds(this.humanize)),t+=(Math.random()*2-1)*i}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new qe(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new qe(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,n=this._state.get(t);if(n!==null&&n.state==="started"){const i=this._getLoopDuration();return(t-n.time)%i/i}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class ur extends rr{constructor(){const t=St(ur.getDefaults(),arguments,["callback","events"]);super(t),this.name="Part",this._state=new zo("stopped"),this._events=new Set,this._state.increasing=!0,t.events.forEach(n=>{Mn(n)?this.add(n[0],n[1]):this.add(n)})}static getDefaults(){return Object.assign(rr.getDefaults(),{events:[]})}start(t,n){const i=this.toTicks(t);if(this._state.getValueAtTime(i)!=="started"){n=ms(n,this._loop?this._loopStart:0),this._loop?n=ms(n,this._loopStart):n=ms(n,0);const o=this.toTicks(n);this._state.add({id:-1,offset:o,state:"started",time:i}),this._forEach(c=>{this._startNote(c,i,o)})}return this}_startNote(t,n,i){n-=i,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<i&&(n+=this._getLoopDuration()),t.start(new qe(this.context,n))):t.startOffset<this._loopStart&&t.startOffset>=i&&(t.loop=!1,t.start(new qe(this.context,n))):t.startOffset>=i&&t.start(new qe(this.context,n))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(n=>{n.startOffset+=this._startOffset})}stop(t){const n=this.toTicks(t);return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._forEach(i=>{i.stop(t)}),this}at(t,n){const i=new cr(this.context,t).toTicks(),o=new qe(this.context,1).toSeconds(),c=this._events.values();let u=c.next();for(;!u.done;){const d=u.value;if(Math.abs(i-d.startOffset)<o)return wt(n)&&(d.value=n),d;u=c.next()}return wt(n)?(this.add(t,n),this.at(t)):null}add(t,n){t instanceof Object&&Reflect.has(t,"time")&&(n=t,t=n.time);const i=this.toTicks(t);let o;return n instanceof rr?(o=n,o.callback=this._tick.bind(this)):o=new rr({callback:this._tick.bind(this),context:this.context,value:n}),o.startOffset=i,o.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(o),this._restartEvent(o),this}_restartEvent(t){this._state.forEach(n=>{n.state==="started"?this._startNote(t,n.time,n.offset):t.stop(new qe(this.context,n.time))})}remove(t,n){return Ri(t)&&t.hasOwnProperty("time")&&(n=t,t=n.time),t=this.toTicks(t),this._events.forEach(i=>{i.startOffset===t&&(Vn(n)||wt(n)&&i.value===n)&&(this._events.delete(i),i.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(n=>n.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(n=>{n instanceof ur?n._forEach(t):t(n)}),this}_setAll(t,n){this._forEach(i=>{i[t]=n})}_tick(t,n){this.mute||this.callback(t,n)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):t.state==="stopped"&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(n=>{n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.loop=t,this._testLoopBoundries(n)})}get loopEnd(){return new qe(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(n=>{n.loopEnd=t,this._testLoopBoundries(n)})}get loopStart(){return new qe(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(n=>{n.loopStart=this.loopStart,this._testLoopBoundries(n)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class Ed extends Et{constructor(){const t=St(Ed.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new oe({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",be(this,"pan")}static getDefaults(){return Object.assign(Et.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const UE="bit-crusher",IE=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;O_(UE,IE);class Le extends Et{constructor(){const t=St(Le.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new ve({context:this.context}),Le._allSolos.has(this.context)||Le._allSolos.set(this.context,new Set),Le._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Et.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Le._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Le._soloed.has(this.context)||Le._soloed.set(this.context,new Set),Le._soloed.get(this.context).add(this)}_removeSolo(){Le._soloed.has(this.context)&&Le._soloed.get(this.context).delete(this)}_isSoloed(){return Le._soloed.has(this.context)&&Le._soloed.get(this.context).has(this)}_noSolos(){return!Le._soloed.has(this.context)||Le._soloed.has(this.context)&&Le._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Le._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Le._allSolos=new Map;Le._soloed=new Map;class Ad extends Et{constructor(){const t=St(Ad.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new Ed({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Tr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,be(this,["pan","volume"])}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class or extends Et{constructor(){const t=St(or.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new Le({solo:t.solo,context:this.context}),this._panVol=this.output=new Ad({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),be(this,["pan","volume"])}static getDefaults(){return Object.assign(Et.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return or.buses.has(t)||or.buses.set(t,new ve({context:this.context})),or.buses.get(t)}send(t,n=0){const i=this._getBus(t),o=new ve({context:this.context,units:"decibels",gain:n});return this.connect(o),o.connect(i),o}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}or.buses=new Map;function ic(){return Je().now()}Je().transport;function xt(){return Je().transport}Je().destination;Je().destination;Je().listener;Je().draw;function yf(){return Je().draw}Je();const Ys={drums:{label:"Drums",icon:"DR",color:"#ef4444"},bass:{label:"Bass",icon:"BS",color:"#f97316"},chord:{label:"Chord",icon:"CH",color:"#eab308"},arpeggio:{label:"Arp",icon:"AR",color:"#22c55e"},lead:{label:"Lead",icon:"LD",color:"#3b82f6"},fx:{label:"FX",icon:"FX",color:"#8b5cf6"},vocal:{label:"Vocal",icon:"VO",color:"#ec4899"}};function qE({velocities:r,width:t=48,height:n=20,color:i="#f472b6",isSelected:o=!1,onClick:c,label:u,isRandom:d=!1}){const p=t-6,g=n-6,y=r.length,v=Math.max(3,(p-Math.max(0,y-1)*1)/y),b=y>1?Math.max(1,(p-v*y)/(y-1)):0;return B.jsx("div",{onClick:c,style:{width:t,height:n,background:d?"rgba(139, 92, 246, 0.25)":o?`${i}22`:"#1a1a2e",border:`1px solid ${d?"#8b5cf6":o?i:"#555"}`,borderRadius:3,cursor:c?"pointer":"default",position:"relative",overflow:"hidden"},title:u,children:B.jsxs("svg",{width:t,height:n,style:{position:"absolute",top:0,left:0},children:[B.jsx("line",{x1:3,y1:n-3,x2:t-3,y2:n-3,stroke:"#333",strokeWidth:.5}),d?B.jsx("text",{x:t/2,y:n/2+4,textAnchor:"middle",fill:"#a78bfa",fontSize:11,fontFamily:"monospace",fontWeight:"bold",children:"?"}):r.map((S,T)=>{const x=Math.max(2,S*g),E=3+T*(v+b),w=n-3-x;return B.jsx("rect",{x:E,y:w,width:v,height:x,fill:i,opacity:.5+S*.5,rx:1},T)})]})})}function PE({offsets:r,width:t=24,height:n=14,color:i="#4ade80",isRandom:o=!1,isSelected:c=!1,onClick:u,label:d}){const p=t-4,g=n-4,y=r.length,v=Math.min(...r,-6),b=Math.max(...r,6),S=Math.max(1,b-v);return B.jsx("div",{onClick:u,style:{width:t,height:n,background:o?"rgba(74, 222, 128, 0.15)":c?`${i}22`:"#1a2a1a",border:`2px solid ${o?"#4ade80":c?i:`${i}44`}`,borderRadius:2,cursor:u?"pointer":"default",position:"relative",overflow:"hidden",boxShadow:c?`0 0 6px ${i}66`:"none"},title:d,children:B.jsx("svg",{width:t,height:n,style:{position:"absolute",top:0,left:0},children:o?B.jsx("text",{x:t/2,y:n/2+3,textAnchor:"middle",fill:i,fontSize:9,fontFamily:"monospace",fontWeight:"bold",children:"?"}):y>0?B.jsxs(B.Fragment,{children:[B.jsx("polyline",{points:r.map((T,x)=>{const E=2+x/Math.max(1,y-1)*p,N=2+(1-(T-v)/S)*g;return`${E},${N}`}).join(" "),fill:"none",stroke:i,strokeWidth:1,opacity:.5}),r.map((T,x)=>{const E=2+x/Math.max(1,y-1)*p,N=2+(1-(T-v)/S)*g;return B.jsx("circle",{cx:E,cy:N,r:1.5,fill:i},x)})]}):B.jsx("line",{x1:2,y1:n/2,x2:t-2,y2:n/2,stroke:i,strokeWidth:1,opacity:.3})})})}function GE({beats:r,bars:t,width:n=80,height:i=18,color:o="#3b82f6",isSelected:c=!1,onClick:u,label:d}){const p=n-4,g=t*4,y=r.length;return B.jsx("div",{onClick:u,style:{width:n,height:i,background:c?`${o}22`:"#1a1a2a",border:`2px solid ${c?o:`${o}44`}`,borderRadius:3,cursor:u?"pointer":"default",position:"relative",overflow:"hidden",boxShadow:c?`0 0 6px ${o}66`:"none"},title:d,children:B.jsxs("svg",{width:n,height:i,style:{position:"absolute",top:0,left:0},children:[Array.from({length:t+1},(v,b)=>B.jsx("line",{x1:2+b/t*p,y1:2,x2:2+b/t*p,y2:i-2,stroke:"#333",strokeWidth:b===0?.5:.3},`grid-${b}`)),y>0?r.map((v,b)=>{const S=2+v/g*p;return B.jsx("line",{x1:S,y1:3,x2:S,y2:i-2-1,stroke:o,strokeWidth:2,strokeLinecap:"round"},b)}):B.jsx("line",{x1:2,y1:i/2,x2:n-2,y2:i/2,stroke:o,strokeWidth:1.5,strokeDasharray:"3,3",opacity:.4})]})})}function ny(r){const t={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},n=r.match(/^([A-G][#b]?)(\d+)$/);if(!n)return 60;const[,i,o]=n;return t[i]+(parseInt(o)+1)*12}function HE({pattern:r,bars:t,width:n,height:i=50,color:o="#4ade80",label:c}){const u=n??Math.max(56,t*14),d=4,f=u-d*2,p=i-d*2,g=t*4,y=r.map(w=>ny(w.note)),v=y.length>0?Math.min(...y):60,b=y.length>0?Math.max(...y):72,S=b-v,T=S<6?v-6:v-2,E=(S<6?b+6:b+2)-T;return B.jsxs("div",{style:{width:u,height:i,background:"#0a0a12",border:`2px solid ${o}44`,borderRadius:4,position:"relative",overflow:"hidden"},title:c||"Current pattern",children:[B.jsxs("svg",{width:u,height:i,style:{position:"absolute",top:0,left:0},children:[Array.from({length:t+1},(w,N)=>B.jsx("line",{x1:d+N/t*f,y1:d,x2:d+N/t*f,y2:i-d,stroke:"#333",strokeWidth:N===0?1:.5},`v-${N}`)),B.jsx("line",{x1:d,y1:i/2,x2:u-d,y2:i/2,stroke:"#333",strokeWidth:.5}),r.length>0?r.map((w,N)=>{const X=ny(w.note),O=w.time,U=w.velocity??.8,j=d+O/g*f,z=(X-T)/E,nt=i-d-z*p,G=w.duration==="4n"?1:w.duration==="8n"?.5:w.duration==="16n"?.25:w.duration==="32n"?.125:.5,$=Math.max(3,G/g*f),Q=4+U*8;return B.jsx("rect",{x:j,y:nt-Q/2,width:$,height:Q,fill:o,opacity:.4+U*.6,rx:1},N)}):B.jsx("text",{x:u/2,y:i/2,textAnchor:"middle",fill:"#444",fontSize:10,children:"No notes"})]}),B.jsxs("div",{style:{position:"absolute",bottom:2,left:4,fontSize:7,color:"#666",fontFamily:"monospace"},children:[r.length,"n"]}),B.jsxs("div",{style:{position:"absolute",top:2,right:4,fontSize:7,color:"#666",fontFamily:"monospace"},children:[t,"b"]})]})}function FE(r){if(r===0)return[];const t=r*4,n=[];for(let i=0;i<t;i++){const o=i/(t-1),c=i%8,u=[];for(let d=0;d<r;d++){const f=d/Math.max(1,r-1);let p;switch(c){case 0:p=.2+o*.75;break;case 1:p=.2+f*(.3+o*.5);break;case 2:p=.95-f*(.3+o*.5);break;case 3:p=.5+Math.sin(f*Math.PI*(2+i*.5))*(.2+o*.25);break;case 4:{const g=Math.max(2,Math.floor(4-o*3));p=d%g===0?.9:.3+o*.3;break}case 5:p=d%2===0?.3+f*.6*(.5+o*.5):.9-f*.6*(.5+o*.5);break;case 6:{const g=.2+o*.3;p=f%.5<g?.8+o*.2:.3+o*.2;break}case 7:{p=.3+(i*1e3+d*7)%100/100*.6+o*.1;break}default:p=.7}u.push(Math.max(.1,Math.min(1,p)))}n.push({id:i,velocities:u})}return n.push({id:t,velocities:Array.from({length:r},()=>.2+Math.random()*.8)}),n}const sy=[{id:0,label:"1/4",getBeats:r=>{const t=[];for(let n=0;n<r*4;n++)t.push(n);return t}},{id:1,label:"Swng",getBeats:r=>{const t=[];for(let n=0;n<r*4;n++)t.push(n),t.push(n+.67);return t}},{id:2,label:"1/8",getBeats:r=>{const t=[];for(let n=0;n<r*8;n++)t.push(n*.5);return t}},{id:9,label:"1/16",getBeats:r=>{const t=[];for(let n=0;n<r*16;n++)t.push(n*.25);return t}},{id:3,label:"Funk",getBeats:r=>{const t=[];for(let n=0;n<r;n++)t.push(n*4,n*4+.5,n*4+1.5,n*4+2,n*4+2.75,n*4+3.5);return t}},{id:4,label:"Tres",getBeats:r=>{const t=[];for(let n=0;n<r;n++)t.push(n*4,n*4+.75,n*4+1.5,n*4+2,n*4+2.75,n*4+3.5);return t}},{id:5,label:"Trip",getBeats:r=>{const t=[];for(let n=0;n<r*4;n++)t.push(n,n+.33,n+.67);return t}},{id:6,label:"Clav",getBeats:r=>{const t=[];for(let n=0;n<r;n+=2)t.push(n*4,n*4+1.5,n*4+3),n+1<r&&t.push((n+1)*4+1,(n+1)*4+2.5);return t}},{id:7,label:"3:4",getBeats:r=>{const t=[];for(let n=0;n<r;n++)t.push(n*4,n*4+1.33,n*4+2.67);return t}},{id:8,label:"5:4",getBeats:r=>{const t=[];for(let n=0;n<r;n++)t.push(n*4,n*4+.8,n*4+1.6,n*4+2.4,n*4+3.2);return t}},{id:9,label:"Brk",getBeats:r=>{const t=[];for(let n=0;n<r;n++)t.push(n*4,n*4+.25,n*4+1,n*4+1.5,n*4+2.5,n*4+3,n*4+3.25,n*4+3.75);return t}},{id:10,label:"Air",getBeats:r=>{const t=[];for(let n=0;n<r;n++)n%2===0?t.push(n*4,n*4+2.5):t.push(n*4+1,n*4+3);return t}},{id:11,label:"Amen",getBeats:r=>{const t=[];for(let n=0;n<r;n++)t.push(n*4,n*4+.5,n*4+1,n*4+1.5,n*4+2.25,n*4+2.75,n*4+3,n*4+3.5);return t}},{id:12,label:"Swng",getBeats:r=>{const t=[];for(let n=0;n<r*4;n++)t.push(n,n+.67);return t}},{id:13,label:"Half",getBeats:r=>{const t=[];for(let n=0;n<r;n++)t.push(n*4,n*4+2);return t}},{id:14,label:"Shuf",getBeats:r=>{const t=[];for(let n=0;n<r*4;n++)t.push(n,n+.5,n+.75);return t}},{id:15,label:"BoDd",getBeats:r=>{const t=[];for(let n=0;n<r;n++)t.push(n*4,n*4+.5,n*4+1.5,n*4+2,n*4+3);return t}}],iy=[{id:0,label:"Flat",getOffsets:r=>Array(r).fill(0)},{id:1,label:"Up",getOffsets:r=>Array.from({length:r},(t,n)=>Math.round(n/Math.max(1,r-1)*12))},{id:2,label:"Down",getOffsets:r=>Array.from({length:r},(t,n)=>Math.round((1-n/Math.max(1,r-1))*12)-6)},{id:3,label:"Wave",getOffsets:r=>Array.from({length:r},(t,n)=>Math.round(Math.sin(n/Math.max(1,r-1)*Math.PI*2)*6))},{id:4,label:"Saw",getOffsets:r=>Array.from({length:r},(t,n)=>n%4*3-6)},{id:5,label:"Oct",getOffsets:r=>Array.from({length:r},(t,n)=>n%2===0?0:12)},{id:6,label:"5th",getOffsets:r=>Array.from({length:r},(t,n)=>n%2===0?0:7)},{id:7,label:"Inv",getOffsets:r=>Array.from({length:r},(t,n)=>-Math.round(n/Math.max(1,r-1)*12))},{id:8,label:"Arp",getOffsets:r=>Array.from({length:r},(t,n)=>[0,4,7,12][n%4])},{id:9,label:"Rnd",getOffsets:r=>Array.from({length:r},()=>Math.round(Math.random()*12-6))}],sa=24,uc=96,ac=uc-sa,YE=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function sr(r){const t={C:0,"C#":1,D:2,"D#":3,E:4,F:5,"F#":6,G:7,"G#":8,A:9,"A#":10,B:11},n=r.match(/^([A-G]#?)(\d)$/);if(!n)return 60;const i=n[1];return(parseInt(n[2])+1)*12+t[i]}function ay(r){const t=Math.floor(r/12)-1;return`${YE[r%12]}${t}`}function N_(r,t){return t===0?r:N_(t,r%t)}function XE(r,t){return r*t/N_(r,t)}function QE(r){return r.length===0?1:r.reduce((t,n)=>XE(t,n),r[0])}const ry=[{label:"1/4",value:"4n",beats:1,quantize:1},{label:"1/8",value:"8n",beats:.5,quantize:2},{label:"1/16",value:"16n",beats:.25,quantize:4},{label:"1/32",value:"32n",beats:.125,quantize:8}];function $E({loops:r,currentBar:t,currentBeat:n,isPlaying:i,tempo:o,onPatternChange:c,onPreviewPattern:u,onStopPreview:d,onPreviewNote:f,onVolumeChange:p,onTransposeChange:g,onSoloChange:y,soloedLoopId:v,editableLoopIds:b=[],queuedChanges:S=[]}){const T=at.useRef(null),x=at.useRef(0),[E,w]=at.useState(null),[N,X]=at.useState(ry[1]),[O,U]=at.useState(null),[j,z]=at.useState(null),nt=at.useRef(new Set);at.useEffect(()=>{const I=r.filter(yt=>b.includes(yt.id)).map(yt=>yt.id),D=new Set(I),ht=nt.current,lt=I.filter(yt=>!ht.has(yt));lt.length>0&&z(lt[lt.length-1]),nt.current=D},[r,b]);const G=4,$=r.filter(I=>!I.muted),Q=$.length>0?$.map(I=>I.bars):r.map(I=>I.bars),st=Q.length>0?QE(Q):1,J=st*G,ot=at.useCallback(I=>S.find(D=>D.loopId===I),[S]),M=at.useCallback(()=>{const I=T.current;if(!I)return;const D=I.getContext("2d");if(!D)return;const{width:ht,height:lt}=I,yt=40,Ot=80,Gt=ht-Ot,fe=lt-yt,cn=xt().seconds,Ve=xt().bpm.value,ct=cn*(Ve/60),pt=ct%J;D.fillStyle="#0a0a0f",D.fillRect(0,0,ht,lt),D.fillStyle="#1a1a2e",D.fillRect(0,0,ht,yt),D.fillStyle="#666",D.font="10px monospace",D.textAlign="left",D.fillText(`Cycle: ${st} bars`,10,15);const zt=Math.floor(pt/G)+1,Lt=Math.floor(pt%G)+1;D.fillStyle="#fff",D.font="bold 12px monospace",D.fillText(`${zt}.${Lt}`,10,32),D.fillStyle="#666",D.font="10px monospace",D.textAlign="right",D.fillText(`${Math.round(Ve)} BPM`,ht-10,15),i&&(D.fillStyle="#4ade80",D.beginPath(),D.arc(ht-50,28,4,0,Math.PI*2),D.fill(),D.fillStyle="#4ade80",D.textAlign="left",D.fillText("PLAY",ht-42,32)),S.length>0&&(D.fillStyle="#f59e0b",D.font="10px monospace",D.textAlign="center",D.fillText(`${S.length} pending change(s)`,ht/2,28));const vt=yt-4,kt=3;D.fillStyle="#252542",D.fillRect(Ot,vt,Gt,kt);const ie=pt/J;if(D.fillStyle="#4ade80",D.fillRect(Ot,vt,Gt*ie,kt),r.length===0){D.fillStyle="#666",D.font="14px monospace",D.textAlign="center",D.fillText("Activate loops to see them here",ht/2,lt/2),x.current=requestAnimationFrame(M);return}const Nt=fe/r.length;r.forEach((Dt,de)=>{const Yt=yt+de*Nt,Ee=!Dt.muted,Ss=E===Dt.id,en=b.includes(Dt.id),us=j===Dt.id,mn=Dt.bars*G,gn=Ys[Dt.instrument],Un=ot(Dt.id),mt=!!Un;D.fillStyle=us?"#1a1825":Ss&&en?"#1a1a2e":"#111118",D.fillRect(0,Yt,ht,Nt),D.strokeStyle="#252542",D.lineWidth=1,D.beginPath(),D.moveTo(0,Yt+Nt),D.lineTo(ht,Yt+Nt),D.stroke(),D.fillStyle=us?"#1f1a28":mt?"#1a1520":"#151520",D.fillRect(0,Yt,Ot,Nt),us&&(D.strokeStyle=gn?.color||"#4ade80",D.lineWidth=2,D.strokeRect(1,Yt+1,Ot-2,Nt-2));const At=pt%mn,le=Math.floor(At/G)+1;if(D.fillStyle=Ee?Dt.color:"#555",D.font="bold 10px monospace",D.textAlign="left",D.fillText(`${Dt.name} ${le}/${Dt.bars}`,6,Yt+14),mt){const Zt=Math.floor(ct/G),Ae=Math.max(0,Un.applyAtBar-Zt),Wt=Math.sin(Date.now()/200)*.3+.7;D.globalAlpha=Wt,D.fillStyle="#f59e0b",D.font="bold 9px monospace",D.fillText(`IN ${Ae}`,6,Yt+Nt-6),D.globalAlpha=1}if(N.quantize>1){D.strokeStyle="#151520",D.lineWidth=.3;for(let Zt=0;Zt<J;Zt++)for(let Ae=1;Ae<N.quantize;Ae++){const Wt=Zt+Ae/N.quantize,Ye=Ot+Wt/J*Gt;D.beginPath(),D.moveTo(Ye,Yt),D.lineTo(Ye,Yt+Nt),D.stroke()}}for(let Zt=0;Zt<=J;Zt++){const Ae=Ot+Zt/J*Gt;D.beginPath(),D.moveTo(Ae,Yt),D.lineTo(Ae,Yt+Nt),Zt%G===0?(D.strokeStyle="#2a2a3a",D.lineWidth=1):(D.strokeStyle="#1a1a25",D.lineWidth=.5),D.stroke()}for(let Zt=0;Zt<=Math.ceil(J/mn);Zt++){const Ae=Zt*mn;if(Ae>J)break;const Wt=Ot+Ae/J*Gt;D.strokeStyle=Ee?Dt.color:"#333",D.lineWidth=2,D.beginPath(),D.moveTo(Wt,Yt),D.lineTo(Wt,Yt+Nt),D.stroke(),Zt>0&&Ae<J&&(D.fillStyle=`${Dt.color}66`,D.font="8px monospace",D.textAlign="left",D.fillText(`${Zt+1}`,Wt+2,Yt+10))}const Qt=mt?Un.pattern:Dt.pattern,Vi=Dt.pattern;if(Qt&&Qt.length>0){const Zt=Math.ceil(J/mn),Ae=Gt/J;for(let Wt=0;Wt<Zt;Wt++){const Ye=Wt*mn,In=Wt===0;Qt.forEach(ce=>{const Cs=Ye+ce.time;if(Cs>=J)return;const Ts=ce.velocity??.8,Js=Ot+Cs/J*Gt,xs=ce.duration==="32n"?.125:ce.duration==="16n"?.25:ce.duration==="8n"?.5:ce.duration==="4n"?1:ce.duration==="2n"?2:.5,ga=Math.max(6,xs*Ae),ti=Ts*(Nt-4);D.fillStyle=Dt.color,D.globalAlpha=In?Ee?.25:.1:.05,D.fillRect(Js-1,Yt+Nt-ti-2,ga,ti),D.globalAlpha=1,us&&In&&en&&(D.fillStyle="#fff",D.globalAlpha=.6,D.font="7px monospace",D.textAlign="center",D.fillText(`${Math.round(Ts*100)}`,Js+ga/2,Yt+Nt-ti-6),D.globalAlpha=1)})}for(let Wt=0;Wt<Zt;Wt++){const Ye=Wt*mn,In=Wt===0;Qt.forEach(ce=>{const Cs=Ye+ce.time;if(Cs>=J)return;const Ts=sr(ce.note);if(Ts<sa||Ts>uc)return;const Js=Ot+Cs/J*Gt,xs=(Ts-sa)/ac,ga=Yt+Nt*(1-xs)-2,ti=ce.duration==="32n"?.125:ce.duration==="16n"?.25:ce.duration==="8n"?.5:ce.duration==="4n"?1:ce.duration==="2n"?2:.5,qo=Math.max(4,ti*Ae),xr=Math.max(4,Nt/ac*.8),Er=mt&&!Vi.some(ya=>Math.abs(ya.time-ce.time)<.1&&ya.note===ce.note);mt&&In?Er?(D.fillStyle="#f59e0b",D.globalAlpha=.9):(D.fillStyle=Ee?Dt.color:"#666",D.globalAlpha=Ee?1:.5):In?(D.fillStyle=Ee?Dt.color:"#666",D.globalAlpha=Ee?1:.5):(D.fillStyle=Ee?"#444":"#333",D.globalAlpha=Ee?.4:.2),D.fillRect(Js-1,ga-xr/2,qo,xr),D.globalAlpha=1})}}mt&&Vi.length>0&&Vi.forEach(Zt=>{if(!Un.pattern.some(Wt=>Math.abs(Wt.time-Zt.time)<.1&&Wt.note===Zt.note)){const Wt=sr(Zt.note);if(Wt<sa||Wt>uc)return;const Ye=Ot+Zt.time/J*Gt,In=(Wt-sa)/ac,ce=Yt+Nt*(1-In)-2,Cs=Math.max(3,.5/J*Gt);D.strokeStyle="#ef4444",D.lineWidth=2,D.globalAlpha=.8,D.beginPath(),D.moveTo(Ye-3,ce),D.lineTo(Ye+Cs+3,ce),D.stroke(),D.globalAlpha=1}});const Ui=Ot+pt/J*Gt;D.strokeStyle="#fff",D.lineWidth=2,D.beginPath(),D.moveTo(Ui,Yt),D.lineTo(Ui,Yt+Nt),D.stroke();const ma=D.createLinearGradient(Ui-10,0,Ui+10,0);ma.addColorStop(0,"transparent"),ma.addColorStop(.5,"rgba(255,255,255,0.08)"),ma.addColorStop(1,"transparent"),D.fillStyle=ma,D.fillRect(Ui-10,Yt,20,Nt)}),D.fillStyle="#444",D.font="9px monospace",D.textAlign="left",D.fillText("Click to add/remove notes  Click  for presets  Orange = pending",Ot+5,lt-4),x.current=requestAnimationFrame(M)},[r,i,o,st,J,b,E,S,ot,G,N,j]),A=at.useCallback(I=>{const D=T.current;if(!D||r.length===0)return;const ht=D.getBoundingClientRect(),lt=I.clientY-ht.top,yt=40,Ot=(D.height-yt)/r.length;if(lt<yt){w(null);return}const Gt=Math.floor((lt-yt)/Ot);Gt>=0&&Gt<r.length?w(r[Gt].id):w(null)},[r]),Y=at.useCallback(()=>{w(null)},[]),W=at.useCallback(I=>{const D=T.current;if(!D||!c)return;const ht=D.getBoundingClientRect(),lt=I.clientX-ht.left,yt=I.clientY-ht.top,Ot=40,Gt=80,fe=D.width-Gt,cn=r.length>0?(D.height-Ot)/r.length:0;if(yt<Ot)return;const Ve=Math.floor((yt-Ot)/cn);if(Ve<0||Ve>=r.length)return;const ct=r[Ve];if(lt<Gt||!b.includes(ct.id))return;const pt=ct.bars*G,vt=(lt-Gt)/fe*J%pt,kt=Math.round(vt*N.quantize)/N.quantize,ie=Ot+Ve*cn,Dt=1-(yt-ie)/cn,de=Math.round(sa+Dt*ac),Yt=Math.max(sa,Math.min(uc,de)),Ee=ay(Yt),Ss=ot(ct.id),en=Ss?Ss.pattern:ct.pattern||[],us=1/N.quantize*.6,mn=6,gn=en.findIndex(mt=>{const At=mt.time,le=sr(mt.note),Qt=Math.abs(At-kt),Vi=Math.abs(le-Yt);return Qt<us&&Vi<mn});console.log("Click:",{quantizedBeat:kt,clickedNote:Ee,clampedPitch:Yt,existingIndex:gn,subdivisionValue:N.value,subdivisionBeats:N.beats,basePatternLength:en.length});let Un;if(gn>=0)console.log("Removing note at index",gn,"note:",en[gn]),Un=en.filter((mt,At)=>At!==gn);else{const mt={note:Ee,time:kt,duration:N.value,velocity:.8};console.log("Adding note with duration:",N.value,"full note:",mt),Un=[...en,mt].sort((At,le)=>At.time-le.time)}c(ct.id,Un),f&&gn<0&&f(Ee)},[r,b,c,J,ot,G,N,f]),rt=at.useCallback(I=>{const D=r.find(yt=>yt.id===I);if(!D||!u)return;const ht=ot(I),lt=ht?ht.pattern:D.pattern;if(lt&&lt.length>0){U(I),u(lt,D.bars);const yt=D.bars*G*60*1e3/o;setTimeout(()=>{U(null)},yt+100)}},[r,u,ot,G,o]),R=at.useCallback(()=>{d&&d(),U(null)},[d]);at.useEffect(()=>{const I=T.current;if(!I)return;const D=()=>{const ht=I.getBoundingClientRect();ht.width>0&&ht.height>0&&(I.width=ht.width,I.height=ht.height)};return D(),window.addEventListener("resize",D),x.current=requestAnimationFrame(M),()=>{window.removeEventListener("resize",D),x.current&&cancelAnimationFrame(x.current)}},[M]);const F=40,it=110,ut=r.length>0?Math.max(it,(300-F)/r.length):it;return B.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",flex:1},children:[B.jsx("canvas",{ref:T,onMouseMove:A,onMouseLeave:Y,onClick:W,style:{width:"100%",height:r.length>0?F+r.length*it:300,minHeight:300,display:"block",background:"#0a0a0f",cursor:b.length>0?"crosshair":"default"}}),B.jsxs("div",{style:{position:"absolute",top:8,right:120,display:"flex",gap:4,zIndex:10,background:"rgba(10, 10, 15, 0.9)",padding:"4px 8px",borderRadius:6,border:"1px solid #252542"},children:[B.jsx("span",{style:{fontSize:10,color:"#666",marginRight:4,alignSelf:"center"},children:"Grid:"}),ry.map(I=>B.jsx("button",{onClick:()=>X(I),style:{background:N.value===I.value?"#4ade80":"#252542",color:N.value===I.value?"#000":"#999",border:"none",borderRadius:4,padding:"4px 8px",fontSize:11,fontFamily:"monospace",cursor:"pointer",fontWeight:N.value===I.value?"bold":"normal"},children:I.label},I.value))]}),r.map((I,D)=>{const ht=b.includes(I.id),lt=S.some(zt=>zt.loopId===I.id),yt=O===I.id,Ot=Ys[I.instrument];if(!ht)return null;const Gt=F+D*ut,fe=j===I.id,cn=I.pattern.length,Ve=zt=>{if(!c||cn===0)return;const Lt=zt.getOffsets(cn),vt=I.pattern,kt=sr(vt[0]?.note||"C4"),ie=vt.map((Nt,Dt)=>({...Nt,note:ay(kt+Lt[Dt])}));c(I.id,ie)},ct=zt=>{if(!c)return;const Lt=zt.getBeats(I.bars),vt=I.pattern,kt=Lt.length>8?"16n":Lt.length>16?"32n":"8n",ie=Lt.map((Nt,Dt)=>({note:vt[Dt%vt.length]?.note||"C4",time:Nt,duration:kt,velocity:vt[Dt%vt.length]?.velocity||.8}));c(I.id,ie)},pt=(zt,Lt)=>{if(!c||cn===0)return;const vt=Lt?Array.from({length:cn},()=>.2+Math.random()*.8):zt.velocities,kt=I.pattern.map((ie,Nt)=>({...ie,velocity:vt[Nt]}));c(I.id,kt)};return B.jsxs("div",{style:{position:"absolute",right:8,top:Gt+2,display:"flex",flexDirection:"column",gap:2,zIndex:fe?100:20,background:"rgba(10, 10, 15, 0.95)",padding:4,borderRadius:6,border:`1px solid ${Ot?.color||"#333"}${fe?"88":"33"}`,boxShadow:fe?"0 4px 20px rgba(0,0,0,0.6)":"none"},children:[B.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[B.jsx("input",{type:"range",min:"0",max:"2",step:"0.05",value:I.volume,onChange:zt=>p?.(I.id,parseFloat(zt.target.value)),style:{width:fe?60:40,height:3,cursor:"pointer"},title:`Vol: ${Math.round(I.volume*100)}%`}),B.jsx("button",{onClick:()=>g?.(I.id,I.transpose-1),disabled:I.transpose<=-12,style:{width:14,height:14,background:"#252542",color:"#888",border:"none",borderRadius:2,fontSize:9,cursor:"pointer",opacity:I.transpose<=-12?.3:1},children:""}),B.jsx("span",{style:{fontSize:8,fontFamily:"monospace",width:18,textAlign:"center",color:I.transpose===0?"#555":"#4ade80"},children:I.transpose>0?`+${I.transpose}`:I.transpose}),B.jsx("button",{onClick:()=>g?.(I.id,I.transpose+1),disabled:I.transpose>=12,style:{width:14,height:14,background:"#252542",color:"#888",border:"none",borderRadius:2,fontSize:9,cursor:"pointer",opacity:I.transpose>=12?.3:1},children:"+"}),B.jsx("button",{onClick:zt=>{zt.stopPropagation(),z(fe?null:I.id)},style:{width:18,height:14,background:fe?Ot?.color||"#4ade80":"#252542",color:fe?"#000":"#888",border:"none",borderRadius:2,fontSize:8,cursor:"pointer",fontWeight:"bold"},title:fe?"Hide presets":"Show presets",children:fe?"":""}),B.jsx("button",{onClick:()=>y?.(I.id,v!==I.id),style:{width:18,height:14,background:v===I.id?"#eab308":"#252542",color:v===I.id?"#000":"#888",border:"none",borderRadius:2,fontSize:8,cursor:"pointer",fontWeight:"bold"},title:v===I.id?"Unsolo":"Solo this track",children:"S"}),B.jsx("button",{onClick:()=>yt?R():rt(I.id),style:{width:18,height:14,background:yt?"#f59e0b":lt?"#3b82f6":"#252542",color:yt?"#000":"#fff",border:"none",borderRadius:2,fontSize:8,cursor:"pointer",opacity:I.pattern.length>0||lt?1:.3},title:yt?"Stop":"Preview",children:yt?"":""})]}),fe&&(()=>{const Nt=S.find(mt=>mt.loopId===I.id),Dt=Nt?Nt.pattern:I.pattern,de=Dt.length,Yt=Dt.map(mt=>`${mt.note}-${mt.time}-${mt.velocity?.toFixed(2)}`).join("|"),Ee=de>0?(()=>{const mt=sr(Dt[0]?.note||"C4");return Dt.map(At=>sr(At.note)-mt)})():[],Ss=iy.find(mt=>{if(mt.label==="Rnd")return!1;const At=mt.getOffsets(de);return At.length!==Ee.length?!1:At.every((le,Qt)=>Math.abs(le-Ee[Qt])<1)})?.id,en=Dt.map(mt=>mt.time),us=sy.find(mt=>{const At=mt.getBeats(I.bars);return At.length!==en.length?!1:At.every((le,Qt)=>Math.abs(le-en[Qt])<.1)})?.id,mn=Dt.map(mt=>mt.velocity??.8),gn=FE(de),Un=gn.findIndex(mt=>mt.velocities.length!==mn.length?!1:mt.velocities.every((At,le)=>Math.abs(At-mn[le])<.05));return B.jsxs("div",{style:{display:"flex",gap:8,borderTop:`1px solid ${Ot?.color}44`,paddingTop:4,marginTop:2,width:520},children:[(()=>{const mt=S.find(Qt=>Qt.loopId===I.id),At=mt?mt.pattern:I.pattern,le=mt?At.map(Qt=>`${Qt.note}-${Qt.time}-${Qt.velocity?.toFixed(2)}`).join("|"):Yt;return B.jsx(HE,{pattern:At,bars:I.bars,height:68,color:Ot?.color||"#4ade80",label:mt?"Pending pattern":"Current pattern"},le)})(),B.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:3,flex:1,minWidth:0},children:[B.jsxs("div",{style:{display:"flex",gap:2,alignItems:"center",height:24},children:[B.jsx("span",{style:{fontSize:8,color:"#4ade80",width:12,fontWeight:"bold",flexShrink:0},children:"P"}),B.jsx("div",{style:{display:"flex",gap:3,overflowX:"auto",flex:1,scrollbarWidth:"thin",paddingBottom:2},children:iy.map(mt=>{const At=mt.getOffsets(8);return B.jsx(PE,{offsets:At,width:48,height:20,color:"#4ade80",isRandom:mt.label==="Rnd",isSelected:Ss===mt.id,onClick:()=>Ve(mt),label:mt.label},mt.id)})})]}),B.jsxs("div",{style:{display:"flex",gap:2,alignItems:"center",height:20},children:[B.jsx("span",{style:{fontSize:8,color:"#3b82f6",width:12,fontWeight:"bold",flexShrink:0},children:"R"}),B.jsx("div",{style:{display:"flex",gap:4,overflowX:"auto",flex:1,scrollbarWidth:"thin",paddingBottom:2},children:sy.map(mt=>{const At=mt.getBeats(I.bars);return B.jsx(GE,{beats:At.slice(0,64),bars:I.bars,width:72,height:18,color:"#3b82f6",isSelected:us===mt.id,onClick:()=>ct(mt),label:mt.label},mt.id)})})]}),B.jsxs("div",{style:{display:"flex",gap:2,alignItems:"center",height:24},children:[B.jsx("span",{style:{fontSize:8,color:"#f472b6",width:12,fontWeight:"bold",flexShrink:0},children:"I"}),B.jsx("div",{style:{display:"flex",gap:3,overflowX:"auto",flex:1,scrollbarWidth:"thin",paddingBottom:2},children:gn.map((mt,At)=>{const le=At===gn.length-1;return B.jsx(qE,{velocities:mt.velocities,width:48,height:20,color:"#f472b6",isRandom:le,isSelected:Un===At,onClick:()=>pt(mt,le),label:le?"Random":`Preset ${At+1}`},mt.id)})})]})]})]})})()]},`controls-${I.id}`)})]})}const ZE=["drums","bass","arpeggio","chord","lead","fx","vocal"];function WE({loop:r,currentBar:t,onToggle:n,onEdit:i,compact:o=!1,isPending:c=!1,isPendingStop:u=!1}){const d=!r.muted,f=t%r.bars/r.bars,p=t%r.bars+1,g=r.bars-t%r.bars,y=Ys[r.instrument]||Ys.arpeggio,v=x=>{if(x.shiftKey&&i){x.preventDefault(),i(r.id);return}n(r.id,!d)},b=x=>{i&&(x.preventDefault(),i(r.id))};let S=`${y.label} ${r.bars} bar${r.bars>1?"s":""}`;c?S=`${y.label} - Queued (starting next cycle)`:u&&(S=`${y.label} - Ending in ${g} bar${g>1?"s":""}`);let T=d?`${p}/${r.bars}`:`${r.bars}b`;return c?T="Queued":u&&(T=`Out ${g}`),B.jsxs("button",{className:`loop-pad ${d?"active":""} ${o?"compact":""} ${c?"pending":""} ${u?"pending-stop":""}`,style:{"--loop-color":r.color,"--phase":f},onClick:v,onContextMenu:b,title:S,children:[B.jsx("div",{className:"loop-pad-progress"}),o?B.jsxs(B.Fragment,{children:[B.jsx("span",{className:"loop-pad-label",children:r.name}),c&&B.jsx("span",{className:"pending-indicator",children:"..."}),u&&B.jsx("span",{className:"pending-indicator",children:""})]}):B.jsxs(B.Fragment,{children:[B.jsx("span",{className:"loop-pad-icon",children:y.icon}),B.jsx("span",{className:"loop-pad-label",children:r.name}),B.jsx("span",{className:"loop-pad-status",children:T})]})]})}function KE({loops:r,currentBar:t,onToggle:n,onEdit:i,playerName:o,playerColor:c,pendingLoopIds:u=[],pendingStopLoopIds:d=[]}){const f=ZE.map(y=>({instrument:y,info:Ys[y],loops:r.filter(v=>v.instrument===y).sort((v,b)=>v.bars-b.bars)})).filter(y=>y.loops.length>0),p=r.filter(y=>!y.muted).length,g=[];return u.forEach(y=>{const v=r.find(b=>b.id===y);if(v){const b=Ys[v.instrument]||Ys.arpeggio;g.push({loopName:v.name,type:"in",instrument:b.icon})}}),d.forEach(y=>{const v=r.find(b=>b.id===y);if(v){const b=Ys[v.instrument]||Ys.arpeggio;g.push({loopName:v.name,type:"out",instrument:b.icon})}}),B.jsxs("div",{className:"loop-pad-matrix",children:[B.jsxs("div",{className:"player-header",style:{borderColor:c},children:[B.jsx("div",{className:"player-dot",style:{backgroundColor:c}}),B.jsx("span",{className:"player-name",children:o}),p>0&&B.jsxs("span",{className:"active-count",children:[p," active"]}),g.length>0&&B.jsx("div",{className:"in-out-events",children:g.map((y,v)=>B.jsxs("span",{className:`in-out-event ${y.type}`,title:`${y.loopName} ${y.type==="in"?"coming in":"going out"}`,children:[B.jsx("span",{className:"event-icon",children:y.instrument}),B.jsx("span",{className:"event-type",children:y.type})]},`${y.type}-${y.loopName}-${v}`))})]}),B.jsxs("div",{className:"matrix-container",children:[B.jsxs("div",{className:"matrix-header-subtitle",children:[B.jsx("div",{className:"matrix-label"}),B.jsx("div",{className:"bars-hint",children:" short loops | long loops "})]}),f.map(({instrument:y,info:v,loops:b})=>{const S=b.filter(T=>!T.muted).length;return B.jsxs("div",{className:"matrix-row",style:{"--row-color":v.color},children:[B.jsxs("div",{className:"matrix-label",style:{color:v.color},title:v.label,children:[B.jsx("span",{className:"matrix-icon",children:v.icon}),B.jsx("span",{className:"matrix-label-text",children:v.label}),S>0&&B.jsx("span",{className:"row-active-dot",style:{backgroundColor:v.color}})]}),B.jsx("div",{className:"matrix-cells",children:[1,2,3,4,5,6,7,8].map(T=>{const x=b.find(E=>E.bars===T);return x?B.jsx("div",{className:"loop-pad-wrapper",children:B.jsx(WE,{loop:x,currentBar:t,onToggle:n,onEdit:i,compact:!0,isPending:u.includes(x.id),isPendingStop:d.includes(x.id)})},x.id):B.jsx("div",{className:"matrix-cell-empty",title:`No ${v.label} ${T}-bar loop`},T)})})]},y)})]}),B.jsx("div",{className:"matrix-footer",children:B.jsx("span",{className:"matrix-hint",children:"Click to toggle  Shift+click to edit"})})]})}function JE({sections:r,currentSectionIndex:t,nextSectionIndex:n,sectionVotes:i,createSectionVotes:o,playerCount:c,currentBar:u,myPlayerId:d,onVoteSection:f,onVoteCreateSection:p}){const g=r[t],y=g?.bars||0,v=y>0?u%y+1:u+1,b=y>0?y-v+1:0,S=new Map;i.forEach(N=>{S.set(N.sectionIndex,(S.get(N.sectionIndex)||0)+1)});const T=i.find(N=>N.playerId===d)?.sectionIndex,x=o.find(N=>N.playerId===d),E=o.length,w=Math.ceil(c/2+.1);return B.jsxs("div",{className:"section-bar",children:[B.jsxs("div",{className:"section-header",children:[B.jsxs("div",{className:"current-section",children:[B.jsx("span",{className:"section-label",children:"Section"}),B.jsx("span",{className:"section-name",children:g?.name||""})]}),n!==null&&B.jsxs("div",{className:"next-section",children:[B.jsx("span",{className:"next-label",children:"Next:"}),B.jsx("span",{className:"next-name",children:r[n]?.name}),B.jsxs("span",{className:"next-countdown",children:["in ",b," bars"]})]}),y>0&&B.jsxs("div",{className:"section-progress",children:[B.jsx("div",{className:"progress-fill",style:{width:`${v/y*100}%`}}),B.jsxs("span",{className:"progress-text",children:[v," / ",y]})]})]}),B.jsx("div",{className:"section-buttons",children:r.map((N,X)=>{const O=S.get(X)||0,U=T===X,j=X===t,z=X===n;return B.jsxs("button",{className:`section-button ${j?"current":""} ${z?"queued":""} ${U?"voted":""} ${N.hasMemory?"has-memory":""}`,onClick:()=>f(X),title:`Vote for ${N.name}${N.hasMemory?" (has saved loop states)":""}${O>0?` (${O} vote${O>1?"s":""})`:""}`,children:[B.jsx("span",{className:"button-name",children:N.name}),N.hasMemory&&B.jsx("span",{className:"memory-indicator",children:"M"}),O>0&&!z&&B.jsxs("span",{className:"vote-count",children:[O,"/",Math.ceil(c/2+.1)]}),z&&B.jsx("span",{className:"queued-indicator",children:"!"})]},N.id)})}),B.jsxs("div",{className:"create-section-buttons",children:[B.jsxs("button",{className:`create-section-btn ${x&&!x.hasMemory?"voted":""}`,onClick:()=>p(!1),title:"Save this loop combination as a new section (marker only)",children:[B.jsx("span",{className:"btn-icon",children:"+"}),B.jsx("span",{className:"btn-label",children:"New"}),E>0&&B.jsxs("span",{className:"vote-count",children:[E,"/",w]})]}),B.jsxs("button",{className:`create-section-btn memory ${x?.hasMemory?"voted":""}`,onClick:()=>p(!0),title:"Save with patterns (recalls exact loop states)",children:[B.jsx("span",{className:"btn-icon",children:"+M"}),B.jsx("span",{className:"btn-label",children:"Memory"})]})]}),c>1&&B.jsx("div",{className:"vote-notice",children:"Vote to change or create sections"})]})}function tA({isPlaying:r,tempo:t,isLeader:n,onPlay:i,onStop:o,onTempoChange:c}){return B.jsxs("div",{className:"transport-controls",children:[B.jsxs("div",{className:"transport-buttons",children:[B.jsx("button",{className:`transport-button play ${r?"active":""}`,onClick:r?o:i,disabled:!n,title:n?"":"Only the leader can control playback",children:r?B.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[B.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),B.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):B.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:B.jsx("polygon",{points:"5,3 19,12 5,21"})})}),B.jsx("button",{className:"transport-button stop",onClick:o,disabled:!n||!r,children:B.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:B.jsx("rect",{x:"4",y:"4",width:"16",height:"16"})})})]}),B.jsxs("div",{className:"tempo-control",children:[B.jsx("label",{children:"BPM"}),B.jsx("input",{type:"range",min:"60",max:"180",value:t,onChange:u=>c(Number(u.target.value)),disabled:!n}),B.jsx("span",{className:"tempo-value",children:t})]}),!n&&B.jsxs("div",{className:"sync-indicator",children:[B.jsx("span",{className:"sync-dot"}),"Synced"]})]})}var eA=Object.defineProperty,Nc=Object.getOwnPropertySymbols,D_=Object.prototype.hasOwnProperty,w_=Object.prototype.propertyIsEnumerable,oy=(r,t,n)=>t in r?eA(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,Nf=(r,t)=>{for(var n in t||(t={}))D_.call(t,n)&&oy(r,n,t[n]);if(Nc)for(var n of Nc(t))w_.call(t,n)&&oy(r,n,t[n]);return r},Df=(r,t)=>{var n={};for(var i in r)D_.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&Nc)for(var i of Nc(r))t.indexOf(i)<0&&w_.call(r,i)&&(n[i]=r[i]);return n};var la;(r=>{const t=class Vt{constructor(f,p,g,y){if(this.version=f,this.errorCorrectionLevel=p,this.modules=[],this.isFunction=[],f<Vt.MIN_VERSION||f>Vt.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=f*4+17;let v=[];for(let S=0;S<this.size;S++)v.push(!1);for(let S=0;S<this.size;S++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(g);if(this.drawCodewords(b),y==-1){let S=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const x=this.getPenaltyScore();x<S&&(y=T,S=x),this.applyMask(T)}}o(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(f,p){const g=r.QrSegment.makeSegments(f);return Vt.encodeSegments(g,p)}static encodeBinary(f,p){const g=r.QrSegment.makeBytes(f);return Vt.encodeSegments([g],p)}static encodeSegments(f,p,g=1,y=40,v=-1,b=!0){if(!(Vt.MIN_VERSION<=g&&g<=y&&y<=Vt.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let S,T;for(S=g;;S++){const N=Vt.getNumDataCodewords(S,p)*8,X=u.getTotalBits(f,S);if(X<=N){T=X;break}if(S>=y)throw new RangeError("Data too long")}for(const N of[Vt.Ecc.MEDIUM,Vt.Ecc.QUARTILE,Vt.Ecc.HIGH])b&&T<=Vt.getNumDataCodewords(S,N)*8&&(p=N);let x=[];for(const N of f){n(N.mode.modeBits,4,x),n(N.numChars,N.mode.numCharCountBits(S),x);for(const X of N.getData())x.push(X)}o(x.length==T);const E=Vt.getNumDataCodewords(S,p)*8;o(x.length<=E),n(0,Math.min(4,E-x.length),x),n(0,(8-x.length%8)%8,x),o(x.length%8==0);for(let N=236;x.length<E;N^=253)n(N,8,x);let w=[];for(;w.length*8<x.length;)w.push(0);return x.forEach((N,X)=>w[X>>>3]|=N<<7-(X&7)),new Vt(S,p,w,v)}getModule(f,p){return 0<=f&&f<this.size&&0<=p&&p<this.size&&this.modules[p][f]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const f=this.getAlignmentPatternPositions(),p=f.length;for(let g=0;g<p;g++)for(let y=0;y<p;y++)g==0&&y==0||g==0&&y==p-1||g==p-1&&y==0||this.drawAlignmentPattern(f[g],f[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(f){const p=this.errorCorrectionLevel.formatBits<<3|f;let g=p;for(let v=0;v<10;v++)g=g<<1^(g>>>9)*1335;const y=(p<<10|g)^21522;o(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,i(y,v));this.setFunctionModule(8,7,i(y,6)),this.setFunctionModule(8,8,i(y,7)),this.setFunctionModule(7,8,i(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,i(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,i(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,i(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let f=this.version;for(let g=0;g<12;g++)f=f<<1^(f>>>11)*7973;const p=this.version<<12|f;o(p>>>18==0);for(let g=0;g<18;g++){const y=i(p,g),v=this.size-11+g%3,b=Math.floor(g/3);this.setFunctionModule(v,b,y),this.setFunctionModule(b,v,y)}}drawFinderPattern(f,p){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(g)),b=f+y,S=p+g;0<=b&&b<this.size&&0<=S&&S<this.size&&this.setFunctionModule(b,S,v!=2&&v!=4)}}drawAlignmentPattern(f,p){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(f+y,p+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(f,p,g){this.modules[p][f]=g,this.isFunction[p][f]=!0}addEccAndInterleave(f){const p=this.version,g=this.errorCorrectionLevel;if(f.length!=Vt.getNumDataCodewords(p,g))throw new RangeError("Invalid argument");const y=Vt.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][p],v=Vt.ECC_CODEWORDS_PER_BLOCK[g.ordinal][p],b=Math.floor(Vt.getNumRawDataModules(p)/8),S=y-b%y,T=Math.floor(b/y);let x=[];const E=Vt.reedSolomonComputeDivisor(v);for(let N=0,X=0;N<y;N++){let O=f.slice(X,X+T-v+(N<S?0:1));X+=O.length;const U=Vt.reedSolomonComputeRemainder(O,E);N<S&&O.push(0),x.push(O.concat(U))}let w=[];for(let N=0;N<x[0].length;N++)x.forEach((X,O)=>{(N!=T-v||O>=S)&&w.push(X[N])});return o(w.length==b),w}drawCodewords(f){if(f.length!=Math.floor(Vt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let p=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const b=g-v,T=(g+1&2)==0?this.size-1-y:y;!this.isFunction[T][b]&&p<f.length*8&&(this.modules[T][b]=i(f[p>>>3],7-(p&7)),p++)}}o(p==f.length*8)}applyMask(f){if(f<0||f>7)throw new RangeError("Mask value out of range");for(let p=0;p<this.size;p++)for(let g=0;g<this.size;g++){let y;switch(f){case 0:y=(g+p)%2==0;break;case 1:y=p%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+p)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(p/2))%2==0;break;case 5:y=g*p%2+g*p%3==0;break;case 6:y=(g*p%2+g*p%3)%2==0;break;case 7:y=((g+p)%2+g*p%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[p][g]&&y&&(this.modules[p][g]=!this.modules[p][g])}}getPenaltyScore(){let f=0;for(let v=0;v<this.size;v++){let b=!1,S=0,T=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[v][x]==b?(S++,S==5?f+=Vt.PENALTY_N1:S>5&&f++):(this.finderPenaltyAddHistory(S,T),b||(f+=this.finderPenaltyCountPatterns(T)*Vt.PENALTY_N3),b=this.modules[v][x],S=1);f+=this.finderPenaltyTerminateAndCount(b,S,T)*Vt.PENALTY_N3}for(let v=0;v<this.size;v++){let b=!1,S=0,T=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[x][v]==b?(S++,S==5?f+=Vt.PENALTY_N1:S>5&&f++):(this.finderPenaltyAddHistory(S,T),b||(f+=this.finderPenaltyCountPatterns(T)*Vt.PENALTY_N3),b=this.modules[x][v],S=1);f+=this.finderPenaltyTerminateAndCount(b,S,T)*Vt.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let b=0;b<this.size-1;b++){const S=this.modules[v][b];S==this.modules[v][b+1]&&S==this.modules[v+1][b]&&S==this.modules[v+1][b+1]&&(f+=Vt.PENALTY_N2)}let p=0;for(const v of this.modules)p=v.reduce((b,S)=>b+(S?1:0),p);const g=this.size*this.size,y=Math.ceil(Math.abs(p*20-g*10)/g)-1;return o(0<=y&&y<=9),f+=y*Vt.PENALTY_N4,o(0<=f&&f<=2568888),f}getAlignmentPatternPositions(){if(this.version==1)return[];{const f=Math.floor(this.version/7)+2,p=this.version==32?26:Math.ceil((this.version*4+4)/(f*2-2))*2;let g=[6];for(let y=this.size-7;g.length<f;y-=p)g.splice(1,0,y);return g}}static getNumRawDataModules(f){if(f<Vt.MIN_VERSION||f>Vt.MAX_VERSION)throw new RangeError("Version number out of range");let p=(16*f+128)*f+64;if(f>=2){const g=Math.floor(f/7)+2;p-=(25*g-10)*g-55,f>=7&&(p-=36)}return o(208<=p&&p<=29648),p}static getNumDataCodewords(f,p){return Math.floor(Vt.getNumRawDataModules(f)/8)-Vt.ECC_CODEWORDS_PER_BLOCK[p.ordinal][f]*Vt.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][f]}static reedSolomonComputeDivisor(f){if(f<1||f>255)throw new RangeError("Degree out of range");let p=[];for(let y=0;y<f-1;y++)p.push(0);p.push(1);let g=1;for(let y=0;y<f;y++){for(let v=0;v<p.length;v++)p[v]=Vt.reedSolomonMultiply(p[v],g),v+1<p.length&&(p[v]^=p[v+1]);g=Vt.reedSolomonMultiply(g,2)}return p}static reedSolomonComputeRemainder(f,p){let g=p.map(y=>0);for(const y of f){const v=y^g.shift();g.push(0),p.forEach((b,S)=>g[S]^=Vt.reedSolomonMultiply(b,v))}return g}static reedSolomonMultiply(f,p){if(f>>>8||p>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(p>>>y&1)*f;return o(g>>>8==0),g}finderPenaltyCountPatterns(f){const p=f[1];o(p<=this.size*3);const g=p>0&&f[2]==p&&f[3]==p*3&&f[4]==p&&f[5]==p;return(g&&f[0]>=p*4&&f[6]>=p?1:0)+(g&&f[6]>=p*4&&f[0]>=p?1:0)}finderPenaltyTerminateAndCount(f,p,g){return f&&(this.finderPenaltyAddHistory(p,g),p=0),p+=this.size,this.finderPenaltyAddHistory(p,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(f,p){p[0]==0&&(f+=this.size),p.pop(),p.unshift(f)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=t;function n(d,f,p){if(f<0||f>31||d>>>f)throw new RangeError("Value out of range");for(let g=f-1;g>=0;g--)p.push(d>>>g&1)}function i(d,f){return(d>>>f&1)!=0}function o(d){if(!d)throw new Error("Assertion error")}const c=class Te{constructor(f,p,g){if(this.mode=f,this.numChars=p,this.bitData=g,p<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(f){let p=[];for(const g of f)n(g,8,p);return new Te(Te.Mode.BYTE,f.length,p)}static makeNumeric(f){if(!Te.isNumeric(f))throw new RangeError("String contains non-numeric characters");let p=[];for(let g=0;g<f.length;){const y=Math.min(f.length-g,3);n(parseInt(f.substring(g,g+y),10),y*3+1,p),g+=y}return new Te(Te.Mode.NUMERIC,f.length,p)}static makeAlphanumeric(f){if(!Te.isAlphanumeric(f))throw new RangeError("String contains unencodable characters in alphanumeric mode");let p=[],g;for(g=0;g+2<=f.length;g+=2){let y=Te.ALPHANUMERIC_CHARSET.indexOf(f.charAt(g))*45;y+=Te.ALPHANUMERIC_CHARSET.indexOf(f.charAt(g+1)),n(y,11,p)}return g<f.length&&n(Te.ALPHANUMERIC_CHARSET.indexOf(f.charAt(g)),6,p),new Te(Te.Mode.ALPHANUMERIC,f.length,p)}static makeSegments(f){return f==""?[]:Te.isNumeric(f)?[Te.makeNumeric(f)]:Te.isAlphanumeric(f)?[Te.makeAlphanumeric(f)]:[Te.makeBytes(Te.toUtf8ByteArray(f))]}static makeEci(f){let p=[];if(f<0)throw new RangeError("ECI assignment value out of range");if(f<128)n(f,8,p);else if(f<16384)n(2,2,p),n(f,14,p);else if(f<1e6)n(6,3,p),n(f,21,p);else throw new RangeError("ECI assignment value out of range");return new Te(Te.Mode.ECI,0,p)}static isNumeric(f){return Te.NUMERIC_REGEX.test(f)}static isAlphanumeric(f){return Te.ALPHANUMERIC_REGEX.test(f)}getData(){return this.bitData.slice()}static getTotalBits(f,p){let g=0;for(const y of f){const v=y.mode.numCharCountBits(p);if(y.numChars>=1<<v)return 1/0;g+=4+v+y.bitData.length}return g}static toUtf8ByteArray(f){f=encodeURI(f);let p=[];for(let g=0;g<f.length;g++)f.charAt(g)!="%"?p.push(f.charCodeAt(g)):(p.push(parseInt(f.substring(g+1,g+3),16)),g+=2);return p}};c.NUMERIC_REGEX=/^[0-9]*$/,c.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,c.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let u=c;r.QrSegment=c})(la||(la={}));(r=>{(t=>{const n=class{constructor(o,c){this.ordinal=o,this.formatBits=c}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(r.QrCode||(r.QrCode={}))})(la||(la={}));(r=>{(t=>{const n=class{constructor(o,c){this.modeBits=o,this.numBitsCharCount=c}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(r.QrSegment||(r.QrSegment={}))})(la||(la={}));var lr=la;var nA={L:lr.QrCode.Ecc.LOW,M:lr.QrCode.Ecc.MEDIUM,Q:lr.QrCode.Ecc.QUARTILE,H:lr.QrCode.Ecc.HIGH},L_=128,z_="L",B_="#FFFFFF",j_="#000000",V_=!1,U_=1,sA=4,iA=0,aA=.1;function I_(r,t=0){const n=[];return r.forEach(function(i,o){let c=null;i.forEach(function(u,d){if(!u&&c!==null){n.push(`M${c+t} ${o+t}h${d-c}v1H${c+t}z`),c=null;return}if(d===i.length-1){if(!u)return;c===null?n.push(`M${d+t},${o+t} h1v1H${d+t}z`):n.push(`M${c+t},${o+t} h${d+1-c}v1H${c+t}z`);return}u&&c===null&&(c=d)})}),n.join("")}function q_(r,t){return r.slice().map((n,i)=>i<t.y||i>=t.y+t.h?n:n.map((o,c)=>c<t.x||c>=t.x+t.w?o:!1))}function rA(r,t,n,i){if(i==null)return null;const o=r.length+n*2,c=Math.floor(t*aA),u=o/t,d=(i.width||c)*u,f=(i.height||c)*u,p=i.x==null?r.length/2-d/2:i.x*u,g=i.y==null?r.length/2-f/2:i.y*u,y=i.opacity==null?1:i.opacity;let v=null;if(i.excavate){let S=Math.floor(p),T=Math.floor(g),x=Math.ceil(d+p-S),E=Math.ceil(f+g-T);v={x:S,y:T,w:x,h:E}}const b=i.crossOrigin;return{x:p,y:g,h:f,w:d,excavation:v,opacity:y,crossOrigin:b}}function oA(r,t){return t!=null?Math.max(Math.floor(t),0):r?sA:iA}function P_({value:r,level:t,minVersion:n,includeMargin:i,marginSize:o,imageSettings:c,size:u,boostLevel:d}){let f=Ie.useMemo(()=>{const S=(Array.isArray(r)?r:[r]).reduce((T,x)=>(T.push(...lr.QrSegment.makeSegments(x)),T),[]);return lr.QrCode.encodeSegments(S,nA[t],n,void 0,void 0,d)},[r,t,n,d]);const{cells:p,margin:g,numCells:y,calculatedImageSettings:v}=Ie.useMemo(()=>{let b=f.getModules();const S=oA(i,o),T=b.length+S*2,x=rA(b,u,S,c);return{cells:b,margin:S,numCells:T,calculatedImageSettings:x}},[f,u,c,i,o]);return{qrcode:f,margin:g,cells:p,numCells:y,calculatedImageSettings:v}}var lA=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),cA=Ie.forwardRef(function(t,n){const i=t,{value:o,size:c=L_,level:u=z_,bgColor:d=B_,fgColor:f=j_,includeMargin:p=V_,minVersion:g=U_,boostLevel:y,marginSize:v,imageSettings:b}=i,T=Df(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:x}=T,E=Df(T,["style"]),w=b?.src,N=Ie.useRef(null),X=Ie.useRef(null),O=Ie.useCallback(J=>{N.current=J,typeof n=="function"?n(J):n&&(n.current=J)},[n]),[U,j]=Ie.useState(!1),{margin:z,cells:nt,numCells:G,calculatedImageSettings:$}=P_({value:o,level:u,minVersion:g,boostLevel:y,includeMargin:p,marginSize:v,imageSettings:b,size:c});Ie.useEffect(()=>{if(N.current!=null){const J=N.current,ot=J.getContext("2d");if(!ot)return;let M=nt;const A=X.current,Y=$!=null&&A!==null&&A.complete&&A.naturalHeight!==0&&A.naturalWidth!==0;Y&&$.excavation!=null&&(M=q_(nt,$.excavation));const W=window.devicePixelRatio||1;J.height=J.width=c*W;const rt=c/G*W;ot.scale(rt,rt),ot.fillStyle=d,ot.fillRect(0,0,G,G),ot.fillStyle=f,lA?ot.fill(new Path2D(I_(M,z))):nt.forEach(function(R,F){R.forEach(function(it,ut){it&&ot.fillRect(ut+z,F+z,1,1)})}),$&&(ot.globalAlpha=$.opacity),Y&&ot.drawImage(A,$.x+z,$.y+z,$.w,$.h)}}),Ie.useEffect(()=>{j(!1)},[w]);const Q=Nf({height:c,width:c},x);let st=null;return w!=null&&(st=Ie.createElement("img",{src:w,key:w,style:{display:"none"},onLoad:()=>{j(!0)},ref:X,crossOrigin:$?.crossOrigin})),Ie.createElement(Ie.Fragment,null,Ie.createElement("canvas",Nf({style:Q,height:c,width:c,ref:O,role:"img"},E)),st)});cA.displayName="QRCodeCanvas";var G_=Ie.forwardRef(function(t,n){const i=t,{value:o,size:c=L_,level:u=z_,bgColor:d=B_,fgColor:f=j_,includeMargin:p=V_,minVersion:g=U_,boostLevel:y,title:v,marginSize:b,imageSettings:S}=i,T=Df(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:x,cells:E,numCells:w,calculatedImageSettings:N}=P_({value:o,level:u,minVersion:g,boostLevel:y,includeMargin:p,marginSize:b,imageSettings:S,size:c});let X=E,O=null;S!=null&&N!=null&&(N.excavation!=null&&(X=q_(E,N.excavation)),O=Ie.createElement("image",{href:S.src,height:N.h,width:N.w,x:N.x+x,y:N.y+x,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const U=I_(X,x);return Ie.createElement("svg",Nf({height:c,width:c,viewBox:`0 0 ${w} ${w}`,ref:n,role:"img"},T),!!v&&Ie.createElement("title",null,v),Ie.createElement("path",{fill:d,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),Ie.createElement("path",{fill:f,d:U,shapeRendering:"crispEdges"}),O)});G_.displayName="QRCodeSVG";const Ke=[];for(let r=0;r<256;++r)Ke.push((r+256).toString(16).slice(1));function uA(r,t=0){return(Ke[r[t+0]]+Ke[r[t+1]]+Ke[r[t+2]]+Ke[r[t+3]]+"-"+Ke[r[t+4]]+Ke[r[t+5]]+"-"+Ke[r[t+6]]+Ke[r[t+7]]+"-"+Ke[r[t+8]]+Ke[r[t+9]]+"-"+Ke[r[t+10]]+Ke[r[t+11]]+Ke[r[t+12]]+Ke[r[t+13]]+Ke[r[t+14]]+Ke[r[t+15]]).toLowerCase()}let _f;const hA=new Uint8Array(16);function fA(){if(!_f){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_f=crypto.getRandomValues.bind(crypto)}return _f(hA)}const dA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ly={randomUUID:dA};function pA(r,t,n){r=r||{};const i=r.random??r.rng?.()??fA();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,uA(i)}function rc(r,t,n){return ly.randomUUID&&!r?ly.randomUUID():pA(r)}class mA{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return gA(t).buffer}}function gA(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let i=0;for(const o of r){const c=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);n.set(c,i),i+=o.byteLength}return n}function H_(r){return new yA(r).unpack()}function F_(r){const t=new _A,n=t.pack(r);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class yA{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let i=0,o="",c,u;for(;i<t;)c=n[i],c<160?(u=c,i++):(c^192)<32?(u=(c&31)<<6|n[i+1]&63,i+=2):(c^224)<16?(u=(c&15)<<12|(n[i+1]&63)<<6|n[i+2]&63,i+=3):(u=(c&7)<<18|(n[i+1]&63)<<12|(n[i+2]&63)<<6|n[i+3]&63,i+=4),o+=String.fromCodePoint(u);return this.index+=t,o}unpack_array(t){const n=new Array(t);for(let i=0;i<t;i++)n[i]=this.unpack();return n}unpack_map(t){const n={};for(let i=0;i<t;i++){const o=this.unpack();n[o]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,i=(t>>23&255)-127,o=t&8388607|8388608;return(n===0?1:-1)*o*2**(i-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),i=t>>31,o=(t>>20&2047)-1023,u=(t&1048575|1048576)*2**(o-20)+n*2**(o-52);return(i===0?1:-1)*u}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class _A{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const i=this.pack_array(t);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const i=t;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(i=>{this.pack_bin(new Uint8Array(i)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const i=this.pack_object(t);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),i=n.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const i=o=>{if(o<n){const c=this.pack(t[o]);return c instanceof Promise?c.then(()=>i(o+1)):i(o+1)}};return i(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const i=Math.floor(Math.log(t)/Math.LN2),o=t/2**i-1,c=Math.floor(o*2**52),u=2**32,d=n<<31|i+1023<<20|c/u&1048575,f=c%u;this._bufferBuilder.append(203),this.pack_int32(d),this.pack_int32(f)}pack_object(t){const n=Object.keys(t),i=n.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");const o=c=>{if(c<n.length){const u=n[c];if(t.hasOwnProperty(u)){this.pack(u);const d=this.pack(t[u]);if(d instanceof Promise)return d.then(()=>o(c+1))}return o(c+1)}};return o(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,i=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),i=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new mA,this._textEncoder=new TextEncoder}}let Y_=!0,X_=!0;function vo(r,t,n){const i=r.match(t);return i&&i.length>=n&&parseFloat(i[n],10)}function fa(r,t,n){if(!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype,o=i.addEventListener;i.addEventListener=function(u,d){if(u!==t)return o.apply(this,arguments);const f=p=>{const g=n(p);g&&(d.handleEvent?d.handleEvent(g):d(g))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(d,f),o.apply(this,[u,f])};const c=i.removeEventListener;i.removeEventListener=function(u,d){if(u!==t||!this._eventMap||!this._eventMap[t])return c.apply(this,arguments);if(!this._eventMap[t].has(d))return c.apply(this,arguments);const f=this._eventMap[t].get(d);return this._eventMap[t].delete(d),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,c.apply(this,[u,f])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(u){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),u&&this.addEventListener(t,this["_on"+t]=u)},enumerable:!0,configurable:!0})}function vA(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(Y_=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function bA(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(X_=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function Q_(){if(typeof window=="object"){if(Y_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Md(r,t){X_&&console.warn(r+" is deprecated, please use "+t+" instead.")}function SA(r){const t={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=r;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(o=>o.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(vo(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(vo(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(vo(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,t._safariVersion=vo(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function cy(r){return Object.prototype.toString.call(r)==="[object Object]"}function $_(r){return cy(r)?Object.keys(r).reduce(function(t,n){const i=cy(r[n]),o=i?$_(r[n]):r[n],c=i&&!Object.keys(o).length;return o===void 0||c?t:Object.assign(t,{[n]:o})},{}):r}function wf(r,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(i=>{i.endsWith("Id")?wf(r,r.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach(o=>{wf(r,r.get(o),n)})}))}function uy(r,t,n){const i=n?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const c=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===t.id&&c.push(u)}),c.forEach(u=>{r.forEach(d=>{d.type===i&&d.trackId===u.id&&wf(r,d,o)})}),o}const hy=Q_;function Z_(r,t){const n=r&&r.navigator;if(!n.mediaDevices)return;const i=function(d){if(typeof d!="object"||d.mandatory||d.optional)return d;const f={};return Object.keys(d).forEach(p=>{if(p==="require"||p==="advanced"||p==="mediaSource")return;const g=typeof d[p]=="object"?d[p]:{ideal:d[p]};g.exact!==void 0&&typeof g.exact=="number"&&(g.min=g.max=g.exact);const y=function(v,b){return v?v+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(g.ideal!==void 0){f.optional=f.optional||[];let v={};typeof g.ideal=="number"?(v[y("min",p)]=g.ideal,f.optional.push(v),v={},v[y("max",p)]=g.ideal,f.optional.push(v)):(v[y("",p)]=g.ideal,f.optional.push(v))}g.exact!==void 0&&typeof g.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[y("",p)]=g.exact):["min","max"].forEach(v=>{g[v]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[y(v,p)]=g[v])})}),d.advanced&&(f.optional=(f.optional||[]).concat(d.advanced)),f},o=function(d,f){if(t.version>=61)return f(d);if(d=JSON.parse(JSON.stringify(d)),d&&typeof d.audio=="object"){const p=function(g,y,v){y in g&&!(v in g)&&(g[v]=g[y],delete g[y])};d=JSON.parse(JSON.stringify(d)),p(d.audio,"autoGainControl","googAutoGainControl"),p(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=i(d.audio)}if(d&&typeof d.video=="object"){let p=d.video.facingMode;p=p&&(typeof p=="object"?p:{ideal:p});const g=t.version<66;if(p&&(p.exact==="user"||p.exact==="environment"||p.ideal==="user"||p.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!g)){delete d.video.facingMode;let y;if(p.exact==="environment"||p.ideal==="environment"?y=["back","rear"]:(p.exact==="user"||p.ideal==="user")&&(y=["front"]),y)return n.mediaDevices.enumerateDevices().then(v=>{v=v.filter(S=>S.kind==="videoinput");let b=v.find(S=>y.some(T=>S.label.toLowerCase().includes(T)));return!b&&v.length&&y.includes("back")&&(b=v[v.length-1]),b&&(d.video.deviceId=p.exact?{exact:b.deviceId}:{ideal:b.deviceId}),d.video=i(d.video),hy("chrome: "+JSON.stringify(d)),f(d)})}d.video=i(d.video)}return hy("chrome: "+JSON.stringify(d)),f(d)},c=function(d){return t.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(d,f,p){o(d,g=>{n.webkitGetUserMedia(g,f,y=>{p&&p(c(y))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const d=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(f){return o(f,p=>d(p).then(g=>{if(p.audio&&!g.getAudioTracks().length||p.video&&!g.getVideoTracks().length)throw g.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return g},g=>Promise.reject(c(g))))}}}function W_(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function K_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",o=>{let c;r.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(d=>d.track&&d.track.id===o.track.id):c={track:o.track};const u=new Event("track");u.track=o.track,u.receiver=c,u.transceiver={receiver:c},u.streams=[i.stream],this.dispatchEvent(u)}),i.stream.getTracks().forEach(o=>{let c;r.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(d=>d.track&&d.track.id===o.id):c={track:o};const u=new Event("track");u.track=o,u.receiver=c,u.transceiver={receiver:c},u.streams=[i.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else fa(r,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function J_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const t=function(o,c){return{track:c,get dtmf(){return this._dtmf===void 0&&(c.kind==="audio"?this._dtmf=o.createDTMFSender(c):this._dtmf=null),this._dtmf},_pc:o}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(d,f){let p=o.apply(this,arguments);return p||(p=t(this,d),this._senders.push(p)),p};const c=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(d){c.apply(this,arguments);const f=this._senders.indexOf(d);f!==-1&&this._senders.splice(f,1)}}const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(c){this._senders=this._senders||[],n.apply(this,[c]),c.getTracks().forEach(u=>{this._senders.push(t(this,u))})};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(c){this._senders=this._senders||[],i.apply(this,[c]),c.getTracks().forEach(u=>{const d=this._senders.find(f=>f.track===u);d&&this._senders.splice(this._senders.indexOf(d),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function tv(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const n=r.RTCPeerConnection.prototype.getSenders;n&&(r.RTCPeerConnection.prototype.getSenders=function(){const c=n.apply(this,[]);return c.forEach(u=>u._pc=this),c});const i=r.RTCPeerConnection.prototype.addTrack;i&&(r.RTCPeerConnection.prototype.addTrack=function(){const c=i.apply(this,arguments);return c._pc=this,c}),r.RTCRtpSender.prototype.getStats=function(){const c=this;return this._pc.getStats().then(u=>uy(u,c.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const n=r.RTCPeerConnection.prototype.getReceivers;n&&(r.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(c=>c._pc=this),o}),fa(r,"track",i=>(i.receiver._pc=i.srcElement,i)),r.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(c=>uy(c,o.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const t=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const i=arguments[0];let o,c,u;return this.getSenders().forEach(d=>{d.track===i&&(o?u=!0:o=d)}),this.getReceivers().forEach(d=>(d.track===i&&(c?u=!0:c=d),d.track===i)),u||o&&c?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():c?c.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function ev(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,d){if(!d)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=t.apply(this,arguments);return this._shimmedLocalStreams[d.id]?this._shimmedLocalStreams[d.id].indexOf(f)===-1&&this._shimmedLocalStreams[d.id].push(f):this._shimmedLocalStreams[d.id]=[d,f],f};const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(p=>{if(this.getSenders().find(y=>y.track===p))throw new DOMException("Track already exists.","InvalidAccessError")});const d=this.getSenders();n.apply(this,arguments);const f=this.getSenders().filter(p=>d.indexOf(p)===-1);this._shimmedLocalStreams[u.id]=[u].concat(f)};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],i.apply(this,arguments)};const o=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(d=>{const f=this._shimmedLocalStreams[d].indexOf(u);f!==-1&&this._shimmedLocalStreams[d].splice(f,1),this._shimmedLocalStreams[d].length===1&&delete this._shimmedLocalStreams[d]}),o.apply(this,arguments)}}function nv(r,t){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&t.version>=65)return ev(r);const n=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const g=n.apply(this);return this._reverseStreams=this._reverseStreams||{},g.map(y=>this._reverseStreams[y.id])};const i=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(g){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},g.getTracks().forEach(y=>{if(this.getSenders().find(b=>b.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[g.id]){const y=new r.MediaStream(g.getTracks());this._streams[g.id]=y,this._reverseStreams[y.id]=g,g=y}i.apply(this,[g])};const o=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(g){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[g.id]||g]),delete this._reverseStreams[this._streams[g.id]?this._streams[g.id].id:g.id],delete this._streams[g.id]},r.RTCPeerConnection.prototype.addTrack=function(g,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(T=>T===g))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(T=>T.track===g))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[y.id];if(S)S.addTrack(g),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const T=new r.MediaStream([g]);this._streams[y.id]=T,this._reverseStreams[T.id]=y,this.addStream(T)}return this.getSenders().find(T=>T.track===g)};function c(p,g){let y=g.sdp;return Object.keys(p._reverseStreams||[]).forEach(v=>{const b=p._reverseStreams[v],S=p._streams[b.id];y=y.replace(new RegExp(S.id,"g"),b.id)}),new RTCSessionDescription({type:g.type,sdp:y})}function u(p,g){let y=g.sdp;return Object.keys(p._reverseStreams||[]).forEach(v=>{const b=p._reverseStreams[v],S=p._streams[b.id];y=y.replace(new RegExp(b.id,"g"),S.id)}),new RTCSessionDescription({type:g.type,sdp:y})}["createOffer","createAnswer"].forEach(function(p){const g=r.RTCPeerConnection.prototype[p],y={[p](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?g.apply(this,[S=>{const T=c(this,S);v[0].apply(null,[T])},S=>{v[1]&&v[1].apply(null,S)},arguments[2]]):g.apply(this,arguments).then(S=>c(this,S))}};r.RTCPeerConnection.prototype[p]=y[p]});const d=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?d.apply(this,arguments):(arguments[0]=u(this,arguments[0]),d.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const p=f.get.apply(this);return p.type===""?p:c(this,p)}}),r.RTCPeerConnection.prototype.removeTrack=function(g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!g._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(g._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(T=>g.track===T)&&(v=this._streams[b])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(g.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Lf(r,t){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=r.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};r.RTCPeerConnection.prototype[n]=o[n]})}function sv(r,t){fa(r,"negotiationneeded",n=>{const i=n.target;if(!((t.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}const fy=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:sv,shimAddTrackRemoveTrack:nv,shimAddTrackRemoveTrackWithNative:ev,shimGetSendersWithDtmf:J_,shimGetUserMedia:Z_,shimMediaStream:W_,shimOnTrack:K_,shimPeerConnection:Lf,shimSenderReceiverGetStats:tv},Symbol.toStringTag,{value:"Module"}));function iv(r,t){const n=r&&r.navigator,i=r&&r.MediaStreamTrack;if(n.getUserMedia=function(o,c,u){Md("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(c,u)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])},c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),o(u.audio,"autoGainControl","mozAutoGainControl"),o(u.audio,"noiseSuppression","mozNoiseSuppression")),c(u)},i&&i.prototype.getSettings){const u=i.prototype.getSettings;i.prototype.getSettings=function(){const d=u.apply(this,arguments);return o(d,"mozAutoGainControl","autoGainControl"),o(d,"mozNoiseSuppression","noiseSuppression"),d}}if(i&&i.prototype.applyConstraints){const u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),o(d,"autoGainControl","mozAutoGainControl"),o(d,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[d])}}}}function CA(r,t){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return i.video===!0?i.video={mediaSource:t}:i.video.mediaSource=t,r.navigator.mediaDevices.getUserMedia(i)})}function av(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zf(r,t){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const c=r.RTCPeerConnection.prototype[o],u={[o](){return arguments[0]=new(o==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};r.RTCPeerConnection.prototype[o]=u[o]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[c,u,d]=arguments;return i.apply(this,[c||null]).then(f=>{if(t.version<53&&!u)try{f.forEach(p=>{p.type=n[p.type]||p.type})}catch(p){if(p.name!=="TypeError")throw p;f.forEach((g,y)=>{f.set(y,Object.assign({},g,{type:n[g.type]||g.type}))})}return f}).then(u,d)}}function rv(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(c=>c._pc=this),o});const n=r.RTCPeerConnection.prototype.addTrack;n&&(r.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ov(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i}),fa(r,"track",n=>(n.receiver._pc=n.srcElement,n)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function lv(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){Md("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function cv(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function uv(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.addTransceiver;t&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const o=i.length>0;o&&i.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const c=t.apply(this,arguments);if(o){const{sender:u}=c,d=u.getParameters();(!("encodings"in d)||d.encodings.length===1&&Object.keys(d.encodings[0]).length===0)&&(d.encodings=i,u.sendEncodings=i,this.setParametersPromises.push(u.setParameters(d).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return c})}function hv(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const t=r.RTCRtpSender.prototype.getParameters;t&&(r.RTCRtpSender.prototype.getParameters=function(){const i=t.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function fv(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function dv(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const dy=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:uv,shimCreateAnswer:dv,shimCreateOffer:fv,shimGetDisplayMedia:CA,shimGetParameters:hv,shimGetUserMedia:iv,shimOnTrack:av,shimPeerConnection:zf,shimRTCDataChannel:cv,shimReceiverGetStats:ov,shimRemoveStream:lv,shimSenderGetStats:rv},Symbol.toStringTag,{value:"Module"}));function pv(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(o=>t.call(this,o,i)),i.getVideoTracks().forEach(o=>t.call(this,o,i))},r.RTCPeerConnection.prototype.addTrack=function(i,...o){return o&&o.forEach(c=>{this._localStreams?this._localStreams.includes(c)||this._localStreams.push(c):this._localStreams=[c]}),t.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const o=n.getTracks();this.getSenders().forEach(c=>{o.includes(c.track)&&this.removeTrack(c)})})}}function mv(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const c=new Event("addstream");c.stream=o,this.dispatchEvent(c)})})}});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(c=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(c)>=0)return;i._remoteStreams.push(c);const u=new Event("addstream");u.stream=c,i.dispatchEvent(u)})}),t.apply(i,arguments)}}}function gv(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const t=r.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,c=t.setRemoteDescription,u=t.addIceCandidate;t.createOffer=function(p,g){const y=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[y]);return g?(v.then(p,g),Promise.resolve()):v},t.createAnswer=function(p,g){const y=arguments.length>=2?arguments[2]:arguments[0],v=i.apply(this,[y]);return g?(v.then(p,g),Promise.resolve()):v};let d=function(f,p,g){const y=o.apply(this,[f]);return g?(y.then(p,g),Promise.resolve()):y};t.setLocalDescription=d,d=function(f,p,g){const y=c.apply(this,[f]);return g?(y.then(p,g),Promise.resolve()):y},t.setRemoteDescription=d,d=function(f,p,g){const y=u.apply(this,[f]);return g?(y.then(p,g),Promise.resolve()):y},t.addIceCandidate=d}function yv(r){const t=r&&r.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,i=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=o=>i(_v(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(i,o,c){t.mediaDevices.getUserMedia(i).then(o,c)}).bind(t))}function _v(r){return r&&r.video!==void 0?Object.assign({},r,{video:$_(r.video)}):r}function vv(r){if(!r.RTCPeerConnection)return;const t=r.RTCPeerConnection;r.RTCPeerConnection=function(i,o){if(i&&i.iceServers){const c=[];for(let u=0;u<i.iceServers.length;u++){let d=i.iceServers[u];d.urls===void 0&&d.url?(Md("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,c.push(d)):c.push(i.iceServers[u])}i.iceServers=c}return new t(i,o)},r.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function bv(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Sv(r){const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):i.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const c=this.getTransceivers().find(u=>u.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):i.offerToReceiveVideo===!0&&!c&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Cv(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const py=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Cv,shimCallbacksAPI:gv,shimConstraints:_v,shimCreateOfferLegacy:Sv,shimGetUserMedia:yv,shimLocalStreamsAPI:pv,shimRTCIceServerUrls:vv,shimRemoteStreamsAPI:mv,shimTrackEventTransceiver:bv},Symbol.toStringTag,{value:"Module"}));var vf={exports:{}},my;function TA(){return my||(my=1,(function(r){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},t.splitSections=function(n){return n.split(`
m=`).map((o,c)=>(c>0?"m="+o:o).trim()+`\r
`)},t.getDescription=function(n){const i=t.splitSections(n);return i&&i[0]},t.getMediaSections=function(n){const i=t.splitSections(n);return i.shift(),i},t.matchPrefix=function(n,i){return t.splitLines(n).filter(o=>o.indexOf(i)===0)},t.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const o={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let c=8;c<i.length;c+=2)switch(i[c]){case"raddr":o.relatedAddress=i[c+1];break;case"rport":o.relatedPort=parseInt(i[c+1],10);break;case"tcptype":o.tcpType=i[c+1];break;case"ufrag":o.ufrag=i[c+1],o.usernameFragment=i[c+1];break;default:o[i[c]]===void 0&&(o[i[c]]=i[c+1]);break}return o},t.writeCandidate=function(n){const i=[];i.push(n.foundation);const o=n.component;o==="rtp"?i.push(1):o==="rtcp"?i.push(2):i.push(o),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const c=n.type;return i.push("typ"),i.push(c),c!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let i=n.substring(9).split(" ");const o={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),o.name=i[0],o.clockRate=parseInt(i[1],10),o.channels=i.length===3?parseInt(i[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const o=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const i={};let o;const c=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<c.length;u++)o=c[u].trim().split("="),i[o[0].trim()]=o[1];return i},t.writeFmtp=function(n){let i="",o=n.payloadType;if(n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const c=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?c.push(u+"="+n.parameters[u]):c.push(u)}),i+="a=fmtp:"+o+" "+c.join(";")+`\r
`}return i},t.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},t.writeRtcpFb=function(n){let i="",o=n.payloadType;return n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(c=>{i+="a=rtcp-fb:"+o+" "+c.type+(c.parameter&&c.parameter.length?" "+c.parameter:"")+`\r
`}),i},t.parseSsrcMedia=function(n){const i=n.indexOf(" "),o={ssrc:parseInt(n.substring(7,i),10)},c=n.indexOf(":",i);return c>-1?(o.attribute=n.substring(i+1,c),o.value=n.substring(c+1)):o.attribute=n.substring(i+1),o},t.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(o=>parseInt(o,10))}},t.getMid=function(n){const i=t.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},t.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},t.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:t.matchPrefix(n+i,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,i){let o="a=setup:"+i+`\r
`;return n.fingerprints.forEach(c=>{o+="a=fingerprint:"+c.algorithm+" "+c.value+`\r
`}),o},t.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,i){return t.matchPrefix(n+i,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,i){const o=t.matchPrefix(n+i,"a=ice-ufrag:")[0],c=t.matchPrefix(n+i,"a=ice-pwd:")[0];return o&&c?{usernameFragment:o.substring(12),password:c.substring(10)}:null},t.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},t.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},c=t.splitLines(n)[0].split(" ");i.profile=c[2];for(let d=3;d<c.length;d++){const f=c[d],p=t.matchPrefix(n,"a=rtpmap:"+f+" ")[0];if(p){const g=t.parseRtpMap(p),y=t.matchPrefix(n,"a=fmtp:"+f+" ");switch(g.parameters=y.length?t.parseFmtp(y[0]):{},g.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+f+" ").map(t.parseRtcpFb),i.codecs.push(g),g.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(g.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(d=>{i.headerExtensions.push(t.parseExtmap(d))});const u=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return i.codecs.forEach(d=>{u.forEach(f=>{d.rtcpFeedback.find(g=>g.type===f.type&&g.parameter===f.parameter)||d.rtcpFeedback.push(f)})}),i},t.writeRtpDescription=function(n,i){let o="";o+="m="+n+" ",o+=i.codecs.length>0?"9":"0",o+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=i.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(u=>{o+=t.writeRtpMap(u),o+=t.writeFmtp(u),o+=t.writeRtcpFb(u)});let c=0;return i.codecs.forEach(u=>{u.maxptime>c&&(c=u.maxptime)}),c>0&&(o+="a=maxptime:"+c+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(u=>{o+=t.writeExtmap(u)}),o},t.parseRtpEncodingParameters=function(n){const i=[],o=t.parseRtpParameters(n),c=o.fecMechanisms.indexOf("RED")!==-1,u=o.fecMechanisms.indexOf("ULPFEC")!==-1,d=t.matchPrefix(n,"a=ssrc:").map(v=>t.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),f=d.length>0&&d[0].ssrc;let p;const g=t.matchPrefix(n,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(S=>parseInt(S,10)));g.length>0&&g[0].length>1&&g[0][0]===f&&(p=g[0][1]),o.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let b={ssrc:f,codecPayloadType:parseInt(v.parameters.apt,10)};f&&p&&(b.rtx={ssrc:p}),i.push(b),c&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:f,mechanism:u?"red+ulpfec":"red"},i.push(b))}}),i.length===0&&f&&i.push({ssrc:f});let y=t.matchPrefix(n,"b=");return y.length&&(y[0].indexOf("b=TIAS:")===0?y=parseInt(y[0].substring(7),10):y[0].indexOf("b=AS:")===0?y=parseInt(y[0].substring(5),10)*1e3*.95-2e3*8:y=void 0,i.forEach(v=>{v.maxBitrate=y})),i},t.parseRtcpParameters=function(n){const i={},o=t.matchPrefix(n,"a=ssrc:").map(d=>t.parseSsrcMedia(d)).filter(d=>d.attribute==="cname")[0];o&&(i.cname=o.value,i.ssrc=o.ssrc);const c=t.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=c.length>0,i.compound=c.length===0;const u=t.matchPrefix(n,"a=rtcp-mux");return i.mux=u.length>0,i},t.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},t.parseMsid=function(n){let i;const o=t.matchPrefix(n,"a=msid:");if(o.length===1)return i=o[0].substring(7).split(" "),{stream:i[0],track:i[1]};const c=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(c.length>0)return i=c[0].value.split(" "),{stream:i[0],track:i[1]}},t.parseSctpDescription=function(n){const i=t.parseMLine(n),o=t.matchPrefix(n,"a=max-message-size:");let c;o.length>0&&(c=parseInt(o[0].substring(19),10)),isNaN(c)&&(c=65536);const u=t.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:i.fmt,maxMessageSize:c};const d=t.matchPrefix(n,"a=sctpmap:");if(d.length>0){const f=d[0].substring(10).split(" ");return{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:c}}},t.writeSctpDescription=function(n,i){let o=[];return n.protocol!=="DTLS/SCTP"?o=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:o=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&o.push("a=max-message-size:"+i.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,i,o){let c;const u=i!==void 0?i:2;return n?c=n:c=t.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+c+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,i){const o=t.splitLines(n);for(let c=0;c<o.length;c++)switch(o[c]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[c].substring(2)}return i?t.getDirection(i):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const o=t.splitLines(n)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(n){const o=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=t.splitLines(n);for(let o=0;o<i.length;o++)if(i[o].length<2||i[o].charAt(1)!=="=")return!1;return!0},r.exports=t})(vf)),vf.exports}var Tv=TA();const hr=Cy(Tv),xA=Pb({__proto__:null,default:hr},[Tv]);function hc(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const t=r.RTCIceCandidate;r.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const o=new t(i),c=hr.parseCandidate(i.candidate);for(const u in c)u in o||Object.defineProperty(o,u,{value:c[u]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(i)},r.RTCIceCandidate.prototype=t.prototype,fa(r,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new r.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Bf(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||fa(r,"icecandidate",t=>{if(t.candidate){const n=hr.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function fc(r,t){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(d){if(!d||!d.sdp)return!1;const f=hr.splitSections(d.sdp);return f.shift(),f.some(p=>{const g=hr.parseMLine(p);return g&&g.kind==="application"&&g.protocol.indexOf("SCTP")!==-1})},i=function(d){const f=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const p=parseInt(f[1],10);return p!==p?-1:p},o=function(d){let f=65536;return t.browser==="firefox"&&(t.version<57?d===-1?f=16384:f=2147483637:t.version<60?f=t.version===57?65535:65536:f=2147483637),f},c=function(d,f){let p=65536;t.browser==="firefox"&&t.version===57&&(p=65535);const g=hr.matchPrefix(d.sdp,"a=max-message-size:");return g.length>0?p=parseInt(g[0].substring(19),10):t.browser==="firefox"&&f!==-1&&(p=2147483637),p},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const f=i(arguments[0]),p=o(f),g=c(arguments[0],f);let y;p===0&&g===0?y=Number.POSITIVE_INFINITY:p===0||g===0?y=Math.max(p,g):y=Math.min(p,g);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return y}}),this._sctp=v}return u.apply(this,arguments)}}function dc(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function t(i,o){const c=i.send;i.send=function(){const d=arguments[0],f=d.length||d.size||d.byteLength;if(i.readyState==="open"&&o.sctp&&f>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return c.apply(i,arguments)}}const n=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const o=n.apply(this,arguments);return t(o,this),o},fa(r,"datachannel",i=>(t(i.channel,i.target),i))}function jf(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const t=r.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const c=o.target;if(c._lastConnectionState!==c.connectionState){c._lastConnectionState=c.connectionState;const u=new Event("connectionstatechange",o);c.dispatchEvent(u)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function Vf(r,t){if(!r.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const c=o.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&o instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:o.type,sdp:c}):o.sdp=c}return n.apply(this,arguments)}}function pc(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function mc(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return n.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?n.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const EA=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Vf,shimAddIceCandidateNullOrEmpty:pc,shimConnectionState:jf,shimMaxMessageSize:fc,shimParameterlessSetLocalDescription:mc,shimRTCIceCandidate:hc,shimRTCIceCandidateRelayProtocol:Bf,shimSendThrowTypeError:dc},Symbol.toStringTag,{value:"Module"}));function AA({window:r}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Q_,i=SA(r),o={browserDetails:i,commonShim:EA,extractVersion:vo,disableLog:vA,disableWarnings:bA,sdp:xA};switch(i.browser){case"chrome":if(!fy||!Lf||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=fy,pc(r,i),mc(r),Z_(r,i),W_(r),Lf(r,i),K_(r),nv(r,i),J_(r),tv(r),sv(r,i),hc(r),Bf(r),jf(r),fc(r,i),dc(r),Vf(r,i);break;case"firefox":if(!dy||!zf||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=dy,pc(r,i),mc(r),iv(r,i),zf(r,i),av(r),lv(r),rv(r),ov(r),cv(r),uv(r),hv(r),fv(r),dv(r),hc(r),jf(r),fc(r,i),dc(r);break;case"safari":if(!py||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=py,pc(r,i),mc(r),vv(r),Sv(r),gv(r),pv(r),mv(r),bv(r),yv(r),Cv(r),hc(r),Bf(r),fc(r,i),dc(r),Vf(r,i);break;default:n("Unsupported browser!");break}return o}const gy=AA({window:typeof window>"u"?void 0:window});function da(r,t,n,i){Object.defineProperty(r,t,{get:n,set:i,enumerable:!0,configurable:!0})}class xv{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],i=t.byteLength,o=Math.ceil(i/this.chunkedMTU);let c=0,u=0;for(;u<i;){const d=Math.min(i,u+this.chunkedMTU),f=t.slice(u,d),p={__peerData:this._dataCount,n:c,data:f,total:o};n.push(p),u=d,c++}return this._dataCount++,n}}}function MA(r){let t=0;for(const o of r)t+=o.byteLength;const n=new Uint8Array(t);let i=0;for(const o of r)n.set(o,i),i+=o.byteLength;return n}const bf=gy.default||gy,_o=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?t>=this.minChromeVersion:r==="firefox"?t>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return bf.browserDetails.browser}getVersion(){return bf.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),t=bf.browserDetails.version||0;if(r==="chrome"&&t<this.minChromeVersion)return!1;if(r==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,i=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),i=!0}catch{}finally{n&&n.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},RA=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),Ev=()=>Math.random().toString(36).slice(2),yy={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class kA extends xv{noop(){}blobToArrayBuffer(t,n){const i=new FileReader;return i.onload=function(o){o.target&&n(o.target.result)},i.readAsArrayBuffer(t),i}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=yy,this.browser=_o.getBrowser(),this.browserVersion=_o.getVersion(),this.pack=F_,this.unpack=H_,this.supports=(function(){const n={browser:_o.isBrowserSupported(),webRTC:_o.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let i;try{i=new RTCPeerConnection(yy),n.audioVideo=!0;let o;try{o=i.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!o.ordered;try{o.binaryType="blob",n.binaryBlob=!_o.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{i&&i.close()}return n})(),this.validateId=RA,this.randomToken=Ev}}const xn=new kA,OA="PeerJS: ";class NA{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const i=[OA,...n];for(const o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);t>=3?console.log(...i):t>=2?console.warn("WARNING",...i):t>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}}var dt=new NA,Rd={},DA=Object.prototype.hasOwnProperty,dn="~";function xo(){}Object.create&&(xo.prototype=Object.create(null),new xo().__proto__||(dn=!1));function wA(r,t,n){this.fn=r,this.context=t,this.once=n||!1}function Av(r,t,n,i,o){if(typeof n!="function")throw new TypeError("The listener must be a function");var c=new wA(n,i||r,o),u=dn?dn+t:t;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],c]:r._events[u].push(c):(r._events[u]=c,r._eventsCount++),r}function gc(r,t){--r._eventsCount===0?r._events=new xo:delete r._events[t]}function on(){this._events=new xo,this._eventsCount=0}on.prototype.eventNames=function(){var t=[],n,i;if(this._eventsCount===0)return t;for(i in n=this._events)DA.call(n,i)&&t.push(dn?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};on.prototype.listeners=function(t){var n=dn?dn+t:t,i=this._events[n];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,c=i.length,u=new Array(c);o<c;o++)u[o]=i[o].fn;return u};on.prototype.listenerCount=function(t){var n=dn?dn+t:t,i=this._events[n];return i?i.fn?1:i.length:0};on.prototype.emit=function(t,n,i,o,c,u){var d=dn?dn+t:t;if(!this._events[d])return!1;var f=this._events[d],p=arguments.length,g,y;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),p){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,n),!0;case 3:return f.fn.call(f.context,n,i),!0;case 4:return f.fn.call(f.context,n,i,o),!0;case 5:return f.fn.call(f.context,n,i,o,c),!0;case 6:return f.fn.call(f.context,n,i,o,c,u),!0}for(y=1,g=new Array(p-1);y<p;y++)g[y-1]=arguments[y];f.fn.apply(f.context,g)}else{var v=f.length,b;for(y=0;y<v;y++)switch(f[y].once&&this.removeListener(t,f[y].fn,void 0,!0),p){case 1:f[y].fn.call(f[y].context);break;case 2:f[y].fn.call(f[y].context,n);break;case 3:f[y].fn.call(f[y].context,n,i);break;case 4:f[y].fn.call(f[y].context,n,i,o);break;default:if(!g)for(b=1,g=new Array(p-1);b<p;b++)g[b-1]=arguments[b];f[y].fn.apply(f[y].context,g)}}return!0};on.prototype.on=function(t,n,i){return Av(this,t,n,i,!1)};on.prototype.once=function(t,n,i){return Av(this,t,n,i,!0)};on.prototype.removeListener=function(t,n,i,o){var c=dn?dn+t:t;if(!this._events[c])return this;if(!n)return gc(this,c),this;var u=this._events[c];if(u.fn)u.fn===n&&(!o||u.once)&&(!i||u.context===i)&&gc(this,c);else{for(var d=0,f=[],p=u.length;d<p;d++)(u[d].fn!==n||o&&!u[d].once||i&&u[d].context!==i)&&f.push(u[d]);f.length?this._events[c]=f.length===1?f[0]:f:gc(this,c)}return this};on.prototype.removeAllListeners=function(t){var n;return t?(n=dn?dn+t:t,this._events[n]&&gc(this,n)):(this._events=new xo,this._eventsCount=0),this};on.prototype.off=on.prototype.removeListener;on.prototype.addListener=on.prototype.on;on.prefixed=dn;on.EventEmitter=on;Rd=on;var pa={};da(pa,"ConnectionType",()=>Ni);da(pa,"PeerErrorType",()=>ze);da(pa,"BaseConnectionErrorType",()=>Uf);da(pa,"DataConnectionErrorType",()=>kd);da(pa,"SerializationType",()=>Kc);da(pa,"SocketEventType",()=>Mi);da(pa,"ServerMessageType",()=>sn);var Ni=(function(r){return r.Data="data",r.Media="media",r})({}),ze=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),Uf=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),kd=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),Kc=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),Mi=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),sn=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const Mv="1.5.5";class LA extends Rd.EventEmitter{constructor(t,n,i,o,c,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const d=t?"wss://":"ws://";this._baseUrl=d+n+":"+i+o+"peerjs?key="+c}start(t,n){this._id=t;const i=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+Mv),this._disconnected=!1,this._socket.onmessage=o=>{let c;try{c=JSON.parse(o.data),dt.log("Server message received:",c)}catch{dt.log("Invalid server message",o.data);return}this.emit(Mi.Message,c)},this._socket.onclose=o=>{this._disconnected||(dt.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Mi.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),dt.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){dt.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:sn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Mi.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Rv{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Ni.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const i=this.connection,o={ordered:!!t.reliable},c=n.createDataChannel(i.label,o);i._initializeDataChannel(c),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){dt.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,c=this.connection.provider;dt.log("Listening for ICE candidates."),t.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(dt.log(`Received ICE candidates for ${n}:`,u.candidate),c.socket.send({type:sn.Candidate,payload:{candidate:u.candidate,type:o,connectionId:i},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":dt.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Uf.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":dt.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Uf.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":dt.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},dt.log("Listening for data channel"),t.ondatachannel=u=>{dt.log("Received data channel");const d=u.channel;c.getConnection(n,i)._initializeDataChannel(d)},dt.log("Listening for remote stream"),t.ontrack=u=>{dt.log("Received remote stream");const d=u.streams[0],f=c.getConnection(n,i);if(f.type===Ni.Media){const p=f;this._addStreamToMediaConnection(d,p)}}}cleanup(){dt.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let i=!1;const o=this.connection.dataChannel;o&&(i=!!o.readyState&&o.readyState!=="closed"),(n||i)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const i=await t.createOffer(this.connection.options.constraints);dt.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await t.setLocalDescription(i),dt.log("Set localDescription:",i,`for:${this.connection.peer}`);let o={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ni.Data){const c=this.connection;o={...o,label:c.label,reliable:c.reliable,serialization:c.serialization}}n.socket.send({type:sn.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(ze.WebRTC,o),dt.log("Failed to setLocalDescription, ",o))}}catch(i){n.emitError(ze.WebRTC,i),dt.log("Failed to createOffer, ",i)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const i=await t.createAnswer();dt.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await t.setLocalDescription(i),dt.log("Set localDescription:",i,`for:${this.connection.peer}`),n.socket.send({type:sn.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){n.emitError(ze.WebRTC,o),dt.log("Failed to setLocalDescription, ",o)}}catch(i){n.emitError(ze.WebRTC,i),dt.log("Failed to create answer, ",i)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const i=this.connection.peerConnection,o=this.connection.provider;dt.log("Setting remote description",n);const c=this;try{await i.setRemoteDescription(n),dt.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await c._makeAnswer()}catch(u){o.emitError(ze.WebRTC,u),dt.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(t){dt.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),dt.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(ze.WebRTC,n),dt.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(dt.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return dt.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(i=>{n.addTrack(i,t)})}_addStreamToMediaConnection(t,n){dt.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class kv extends Rd.EventEmitter{emitError(t,n){dt.error("Error:",n),this.emit("error",new zA(`${t}`,n))}}class zA extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class Ov extends kv{get open(){return this._open}constructor(t,n,i){super(),this.peer=t,this.provider=n,this.options=i,this._open=!1,this.metadata=i.metadata}}class Dc extends Ov{static#t=this.ID_PREFIX="mc_";get type(){return Ni.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,i){super(t,n,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Dc.ID_PREFIX+xn.randomToken(),this._negotiator=new Rv(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{dt.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{dt.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){dt.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,i=t.payload;switch(t.type){case sn.Answer:this._negotiator.handleSDP(n,i.sdp),this._open=!0;break;case sn.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:dt.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){dt.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const i=this.provider._getMessages(this.connectionId);for(const o of i)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class BA{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:i,port:o,path:c,key:u}=this._options,d=new URL(`${n}://${i}:${o}${c}${u}/${t}`);return d.searchParams.set("ts",`${Date.now()}${Math.random()}`),d.searchParams.set("version",Mv),fetch(d.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){dt.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==xn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===xn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw dt.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class wc extends Ov{static#t=this.ID_PREFIX="dc_";static#e=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ni.Data}constructor(t,n,i){super(t,n,i),this.connectionId=this.options.connectionId||wc.ID_PREFIX+Ev(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Rv(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{dt.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{dt.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{dt.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(kd.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case sn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case sn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:dt.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Od extends wc{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>wc.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return dt.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Sf extends Od{close(t){super.close(t),this._chunkedData={}}constructor(t,n,i){super(t,n,i),this.chunker=new xv,this.serialization=Kc.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=H_(t),i=n.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,i=this._chunkedData[n]||{data:[],count:0,total:t.total};if(i.data[t.n]=new Uint8Array(t.data),i.count++,this._chunkedData[n]=i,i.total===i.count){delete this._chunkedData[n];const o=MA(i.data);this._handleDataMessage({data:o})}}_send(t,n){const i=F_(t);if(i instanceof Promise)return this._send_blob(i);if(!n&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);dt.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const i of n)this.send(i,!0)}}class jA extends Od{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Kc.None}}class VA extends Od{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),i=n.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const i=this.encoder.encode(this.stringify(t));if(i.byteLength>=xn.chunkedMTU){this.emitError(kd.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...t){super(...t),this.serialization=Kc.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Nd extends kv{static#t=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,i]of this._connections)t[n]=i;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:jA,json:VA,binary:Sf,"binary-utf8":Sf,default:Sf},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(t&&t.constructor==Object?n=t:t&&(i=t.toString()),n={debug:0,host:xn.CLOUD_HOST,port:xn.CLOUD_PORT,path:"/",key:Nd.DEFAULT_KEY,token:xn.randomToken(),config:xn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==xn.CLOUD_HOST?this._options.secure=xn.isSecure():this._options.host==xn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&dt.setLogFunction(this._options.logFunction),dt.logLevel=this._options.debug||0,this._api=new BA(n),this._socket=this._createServerConnection(),!xn.supports.audioVideo&&!xn.supports.data){this._delayedAbort(ze.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!xn.validateId(i)){this._delayedAbort(ze.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(ze.ServerError,o))}_createServerConnection(){const t=new LA(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Mi.Message,n=>{this._handleMessage(n)}),t.on(Mi.Error,n=>{this._abort(ze.SocketError,n)}),t.on(Mi.Disconnected,()=>{this.disconnected||(this.emitError(ze.Network,"Lost connection to server."),this.disconnect())}),t.on(Mi.Close,()=>{this.disconnected||this._abort(ze.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,i=t.payload,o=t.src;switch(n){case sn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case sn.Error:this._abort(ze.ServerError,i.msg);break;case sn.IdTaken:this._abort(ze.UnavailableID,`ID "${this.id}" is taken`);break;case sn.InvalidKey:this._abort(ze.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case sn.Leave:dt.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case sn.Expire:this.emitError(ze.PeerUnavailable,`Could not connect to peer ${o}`);break;case sn.Offer:{const c=i.connectionId;let u=this.getConnection(o,c);if(u&&(u.close(),dt.warn(`Offer received for existing Connection ID:${c}`)),i.type===Ni.Media){const f=new Dc(o,this,{connectionId:c,_payload:i,metadata:i.metadata});u=f,this._addConnection(o,u),this.emit("call",f)}else if(i.type===Ni.Data){const f=new this._serializers[i.serialization](o,this,{connectionId:c,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});u=f,this._addConnection(o,u),this.emit("connection",f)}else{dt.warn(`Received malformed connection type:${i.type}`);return}const d=this._getMessages(c);for(const f of d)u.handleMessage(f);break}default:{if(!i){dt.warn(`You received a malformed message from ${o} of type ${n}`);return}const c=i.connectionId,u=this.getConnection(o,c);u&&u.peerConnection?u.handleMessage(t):c?this._storeMessage(c,t):dt.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){dt.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(ze.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,i),i}call(t,n,i={}){if(this.disconnected){dt.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(ze.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){dt.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new Dc(t,this,{...i,_stream:n});return this._addConnection(t,o),o}_addConnection(t,n){dt.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const i=this._connections.get(t);if(!i)return null;for(const o of i)if(o.connectionId===n)return o;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){dt.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(dt.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const i of n)i.close()}disconnect(){if(this.disconnected)return;const t=this.id;dt.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)dt.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)dt.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(ze.ServerError,n))}}var UA=Nd;class IA{peer=null;connections=new Map;handlers=new Set;statusHandlers=new Set;roomId;isHost;hostConnection=null;reconnectAttempts=0;maxReconnectAttempts=3;constructor(t,n){this.roomId=t.toUpperCase(),this.isHost=n,this.initPeer()}initPeer(){const t=this.isHost?`maml-${this.roomId}`:`maml-${this.roomId}-${Date.now().toString(36)}`;console.log("Creating peer with ID:",t),this.peer=new UA(t,{debug:1,host:"0.peerjs.com",port:443,secure:!0,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]}}),this.peer.on("open",n=>{console.log(" Peer connected with ID:",n),this.reconnectAttempts=0,this.isHost||setTimeout(()=>this.connectToHost(),500),this.notifyStatus()}),this.peer.on("connection",n=>{console.log(" Incoming connection from:",n.peer),this.setupConnection(n)}),this.peer.on("error",n=>{console.error(" Peer error:",n.type,n.message),n.type==="peer-unavailable"?console.log("Host not found. Make sure the room code is correct."):n.type==="unavailable-id"&&console.log("Room already exists or ID conflict"),this.notifyStatus()}),this.peer.on("disconnected",()=>{console.log(" Peer disconnected from server"),this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,console.log(`Attempting reconnect ${this.reconnectAttempts}/${this.maxReconnectAttempts}`),setTimeout(()=>this.peer?.reconnect(),1e3))})}connectToHost(){if(!this.peer)return;const t=`maml-${this.roomId}`;console.log(" Connecting to host:",t);try{const n=this.peer.connect(t,{reliable:!0,serialization:"json"});n&&(this.hostConnection=n,this.setupConnection(n),setTimeout(()=>{!n.open&&this.reconnectAttempts<this.maxReconnectAttempts&&(console.log("Connection not opened, retrying..."),this.reconnectAttempts++,this.connectToHost())},5e3))}catch(n){console.error("Failed to connect to host:",n),this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,setTimeout(()=>this.connectToHost(),2e3))}}setupConnection(t){t.on("open",()=>{console.log(" Connection opened with:",t.peer),this.connections.set(t.peer,t),this.notifyStatus(),!this.isHost&&t===this.hostConnection&&(console.log("Connection opened - will request state sync after join delay..."),setTimeout(()=>{console.log("Requesting state sync from host...");try{t.send({type:"sync_request"})}catch(n){console.error("Failed to send sync request:",n)}},2500),setTimeout(()=>{console.log("Requesting state sync from host (retry)...");try{t.send({type:"sync_request"})}catch(n){console.error("Failed to send retry sync request:",n)}},4e3))}),t.on("data",n=>{const i=n;i.type!=="transport"&&i.type!=="clock_sync"&&i.type!=="ping"&&i.type!=="pong"&&console.log(" Received:",i.type),this.handlers.forEach(o=>o(i)),this.isHost&&this.broadcast(i,t.peer)}),t.on("close",()=>{console.log("Connection closed:",t.peer),this.connections.delete(t.peer),this.notifyStatus()}),t.on("error",n=>{console.error("Connection error:",n)})}broadcast(t,n){this.connections.forEach((i,o)=>{if(o!==n&&i.open)try{i.send(t)}catch(c){console.error("Failed to send to peer:",o,c)}})}notifyStatus(){const t=this.isHost?this.peer?.open??!1:this.hostConnection?.open??!1,n=this.connections.size;this.statusHandlers.forEach(i=>i(t,n))}send(t){if(t.type!=="transport"&&t.type!=="clock_sync"&&t.type!=="ping"&&t.type!=="pong"&&console.log(" Sending:",t.type),this.handlers.forEach(n=>n(t)),this.isHost)this.broadcast(t);else if(this.hostConnection?.open)try{this.hostConnection.send(t)}catch(n){console.error("Failed to send to host:",n)}else console.warn(" Not connected to host yet")}onMessage(t){return this.handlers.add(t),()=>this.handlers.delete(t)}onStatusChange(t){return this.statusHandlers.add(t),()=>this.statusHandlers.delete(t)}close(){this.connections.forEach(t=>{try{t.close()}catch{}}),this.peer?.destroy()}getConnectionCount(){return this.connections.size}isConnected(){return this.isHost?this.peer?.open??!1:this.hostConnection?.open??!1}}function qA(r,t=0){const n=[];for(let i=0;i<r;i++){const o=i*4;switch(t%10){case 0:n.push({note:"C1",time:o+0,duration:"8n"},{note:"E1",time:o+0,duration:"16n"},{note:"E1",time:o+.5,duration:"16n"},{note:"D1",time:o+1,duration:"8n"},{note:"E1",time:o+1,duration:"16n"},{note:"E1",time:o+1.5,duration:"16n"},{note:"C1",time:o+2,duration:"8n"},{note:"E1",time:o+2,duration:"16n"},{note:"E1",time:o+2.5,duration:"16n"},{note:"D1",time:o+3,duration:"8n"},{note:"E1",time:o+3,duration:"16n"},{note:"E1",time:o+3.5,duration:"16n"});break;case 1:n.push({note:"C1",time:o+0,duration:"8n"},{note:"E1",time:o+.5,duration:"16n"},{note:"D1",time:o+1,duration:"8n"},{note:"C1",time:o+1.5,duration:"8n"},{note:"E1",time:o+2,duration:"16n"},{note:"E1",time:o+2.5,duration:"16n"},{note:"D1",time:o+3,duration:"8n"},{note:"C1",time:o+3.5,duration:"8n"});break;case 2:n.push({note:"C1",time:o+0,duration:"8n"},{note:"E1",time:o+.5,duration:"16n"},{note:"C1",time:o+1,duration:"8n"},{note:"D1",time:o+1,duration:"8n"},{note:"E1",time:o+1.5,duration:"16n"},{note:"C1",time:o+2,duration:"8n"},{note:"E1",time:o+2.5,duration:"16n"},{note:"C1",time:o+3,duration:"8n"},{note:"D1",time:o+3,duration:"8n"},{note:"E1",time:o+3.5,duration:"16n"});break;case 3:n.push({note:"C1",time:o+0,duration:"8n"},{note:"E1",time:o+.5,duration:"16n"},{note:"D1",time:o+1,duration:"8n"},{note:"E1",time:o+1.5,duration:"16n"},{note:"C1",time:o+2.5,duration:"8n"},{note:"D1",time:o+3,duration:"8n"},{note:"C1",time:o+3.5,duration:"8n"});break;case 4:n.push({note:"C1",time:o+0,duration:"8n"},{note:"D1",time:o+2,duration:"8n"});break;case 5:n.push({note:"C1",time:o+0,duration:"8n"},{note:"E1",time:o+.25,duration:"16n"},{note:"E1",time:o+.5,duration:"16n"},{note:"E1",time:o+.75,duration:"16n"},{note:"D1",time:o+1,duration:"8n"},{note:"E1",time:o+1.25,duration:"16n"},{note:"E1",time:o+1.5,duration:"16n"},{note:"E1",time:o+1.75,duration:"16n"},{note:"C1",time:o+2,duration:"8n"},{note:"E1",time:o+2.5,duration:"16n"},{note:"D1",time:o+3,duration:"8n"},{note:"E1",time:o+3.5,duration:"16n"});break;case 6:n.push({note:"C1",time:o+0,duration:"8n"},{note:"C1",time:o+.5,duration:"8n"},{note:"D1",time:o+1,duration:"8n"},{note:"E1",time:o+1.5,duration:"16n"},{note:"C1",time:o+2,duration:"8n"},{note:"C1",time:o+2.5,duration:"8n"},{note:"D1",time:o+3,duration:"8n"},{note:"E1",time:o+3.5,duration:"16n"});break;case 7:n.push({note:"C1",time:o+0,duration:"8n"},{note:"E1",time:o+.67,duration:"16n"},{note:"D1",time:o+1,duration:"8n"},{note:"E1",time:o+1.67,duration:"16n"},{note:"C1",time:o+2,duration:"8n"},{note:"E1",time:o+2.67,duration:"16n"},{note:"D1",time:o+3,duration:"8n"},{note:"C1",time:o+3.5,duration:"8n"});break;case 8:n.push({note:"C1",time:o+0,duration:"8n"},{note:"E1",time:o+.25,duration:"16n"},{note:"E1",time:o+.5,duration:"16n"},{note:"E1",time:o+.75,duration:"16n"},{note:"E1",time:o+1,duration:"16n"},{note:"D1",time:o+1.5,duration:"8n"},{note:"E1",time:o+2,duration:"16n"},{note:"E1",time:o+2.25,duration:"16n"},{note:"C1",time:o+2.5,duration:"8n"},{note:"E1",time:o+3,duration:"16n"},{note:"D1",time:o+3.5,duration:"8n"});break;case 9:n.push({note:"C1",time:o+0,duration:"8n"},{note:"E1",time:o+.5,duration:"16n"},{note:"E1",time:o+1,duration:"16n"},{note:"E1",time:o+1.5,duration:"16n"},{note:"D1",time:o+2,duration:"8n"},{note:"E1",time:o+2.5,duration:"16n"},{note:"E1",time:o+3,duration:"16n"},{note:"E1",time:o+3.5,duration:"16n"});break}}return n}function PA(r,t=0){const n=["C2","F2","G2","Ab2","Bb2","Eb2","F2","C2"],i=[];for(let o=0;o<r;o++){const c=o*4,u=n[o%n.length];switch(t%10){case 0:i.push({note:u,time:c+0,duration:"4n"},{note:u,time:c+1.5,duration:"8n"},{note:"G2",time:c+2,duration:"4n"},{note:u,time:c+3.5,duration:"8n"});break;case 1:i.push({note:u,time:c+0,duration:"4n"},{note:"Eb2",time:c+1,duration:"4n"},{note:"F2",time:c+2,duration:"4n"},{note:"G2",time:c+3,duration:"4n"});break;case 2:i.push({note:u,time:c+0,duration:"8n"},{note:"C3",time:c+.5,duration:"8n"},{note:u,time:c+2,duration:"8n"},{note:"C3",time:c+2.5,duration:"8n"});break;case 3:i.push({note:u,time:c+0,duration:"8n"},{note:u,time:c+1.5,duration:"8n"},{note:"G2",time:c+2.5,duration:"8n"},{note:u,time:c+3,duration:"4n"});break;case 4:i.push({note:u,time:c+0,duration:"1n"});break;case 5:i.push({note:u,time:c+0,duration:"8n"},{note:u,time:c+.5,duration:"8n"},{note:u,time:c+1,duration:"8n"},{note:u,time:c+1.5,duration:"8n"},{note:u,time:c+2,duration:"8n"},{note:u,time:c+2.5,duration:"8n"},{note:u,time:c+3,duration:"8n"},{note:u,time:c+3.5,duration:"8n"});break;case 6:i.push({note:u,time:c+0,duration:"16n"},{note:"G2",time:c+.75,duration:"16n"},{note:u,time:c+1,duration:"8n"},{note:u,time:c+2,duration:"16n"},{note:"G2",time:c+2.5,duration:"16n"},{note:u,time:c+3,duration:"8n"});break;case 7:i.push({note:u,time:c+.5,duration:"8n"},{note:u,time:c+1.5,duration:"8n"},{note:u,time:c+2.5,duration:"8n"},{note:u,time:c+3.5,duration:"8n"});break;case 8:i.push({note:u,time:c+0,duration:"8n"},{note:"G2",time:c+.5,duration:"8n"},{note:u,time:c+1,duration:"8n"},{note:"G2",time:c+1.5,duration:"8n"},{note:u,time:c+2,duration:"8n"},{note:"G2",time:c+2.5,duration:"8n"},{note:u,time:c+3,duration:"8n"},{note:"G2",time:c+3.5,duration:"8n"});break;case 9:i.push({note:u,time:c+0,duration:"2n"},{note:"G1",time:c+2,duration:"2n"});break}}return i}function GA(r,t=0){const n=[["C4","Eb4","G4","C5"],["F3","Ab3","C4","F4"],["G3","B3","D4","G4"],["Ab3","C4","Eb4","Ab4"],["Bb3","D4","F4","Bb4"],["Eb4","G4","Bb4","Eb5"],["F4","A4","C5","F5"],["G4","B4","D5","G5"]],i=[];for(let o=0;o<r;o++){const c=o*4,u=n[o%n.length];switch(t%10){case 0:i.push({note:u[0],time:c+0,duration:"8n"},{note:u[1],time:c+.5,duration:"8n"},{note:u[2],time:c+1,duration:"8n"},{note:u[3],time:c+1.5,duration:"8n"},{note:u[2],time:c+2,duration:"8n"},{note:u[1],time:c+2.5,duration:"8n"},{note:u[0],time:c+3,duration:"8n"},{note:u[1],time:c+3.5,duration:"8n"});break;case 1:i.push({note:u[0],time:c+0,duration:"16n"},{note:u[1],time:c+.25,duration:"16n"},{note:u[2],time:c+.5,duration:"16n"},{note:u[3],time:c+.75,duration:"16n"},{note:u[0],time:c+2,duration:"16n"},{note:u[1],time:c+2.25,duration:"16n"},{note:u[2],time:c+2.5,duration:"16n"},{note:u[3],time:c+2.75,duration:"16n"});break;case 2:i.push({note:u[0],time:c+0,duration:"8n"},{note:u[2],time:c+.5,duration:"8n"},{note:u[1],time:c+1,duration:"8n"},{note:u[3],time:c+1.5,duration:"8n"},{note:u[0],time:c+2,duration:"8n"},{note:u[2],time:c+2.5,duration:"8n"},{note:u[1],time:c+3,duration:"8n"},{note:u[3],time:c+3.5,duration:"8n"});break;case 3:i.push({note:u[0],time:c+0,duration:"8n"},{note:u[1],time:c+.33,duration:"8n"},{note:u[2],time:c+.67,duration:"8n"},{note:u[3],time:c+1,duration:"4n"},{note:u[2],time:c+2,duration:"8n"},{note:u[1],time:c+2.33,duration:"8n"},{note:u[0],time:c+2.67,duration:"8n"},{note:u[3],time:c+3,duration:"4n"});break;case 4:i.push({note:u[0],time:c+0,duration:"2n"},{note:u[3],time:c+2,duration:"2n"});break;case 5:i.push({note:u[3],time:c+0,duration:"8n"},{note:u[2],time:c+.5,duration:"8n"},{note:u[1],time:c+1,duration:"8n"},{note:u[0],time:c+1.5,duration:"8n"},{note:u[3],time:c+2,duration:"8n"},{note:u[2],time:c+2.5,duration:"8n"},{note:u[1],time:c+3,duration:"8n"},{note:u[0],time:c+3.5,duration:"8n"});break;case 6:i.push({note:u[0],time:c+0,duration:"4n"},{note:u[1],time:c+1,duration:"4n"},{note:u[2],time:c+2,duration:"4n"},{note:u[3],time:c+3,duration:"4n"});break;case 7:i.push({note:u[0],time:c+0,duration:"8n"},{note:u[3],time:c+.5,duration:"8n"},{note:u[0],time:c+1,duration:"8n"},{note:u[2],time:c+1.5,duration:"8n"},{note:u[0],time:c+2,duration:"8n"},{note:u[1],time:c+2.5,duration:"8n"},{note:u[0],time:c+3,duration:"8n"},{note:u[3],time:c+3.5,duration:"8n"});break;case 8:i.push({note:u[0],time:c+0,duration:"8n"},{note:u[3],time:c+.5,duration:"8n"},{note:u[0],time:c+1,duration:"8n"},{note:u[3],time:c+1.5,duration:"8n"},{note:u[1],time:c+2,duration:"8n"},{note:u[2],time:c+2.5,duration:"8n"},{note:u[1],time:c+3,duration:"8n"},{note:u[2],time:c+3.5,duration:"8n"});break;case 9:i.push({note:u[2],time:c+0,duration:"8n"},{note:u[0],time:c+.5,duration:"8n"},{note:u[3],time:c+1,duration:"8n"},{note:u[1],time:c+1.5,duration:"8n"},{note:u[0],time:c+2,duration:"8n"},{note:u[3],time:c+2.5,duration:"8n"},{note:u[2],time:c+3,duration:"8n"},{note:u[1],time:c+3.5,duration:"8n"});break}}return i}function HA(r,t=0){const n=[["C4","Eb4","G4"],["F4","Ab4","C5"],["Ab4","C5","Eb5"],["G4","B4","D5"],["Bb4","D5","F5"],["Eb4","G4","Bb4"],["F4","A4","C5"],["C4","Eb4","G4"]],i=[];for(let o=0;o<r;o++){const c=o*4,u=n[o%n.length];switch(t%10){case 0:u.forEach(d=>{i.push({note:d,time:c+0,duration:"2n"}),i.push({note:d,time:c+2,duration:"2n"})});break;case 1:u.forEach(d=>{i.push({note:d,time:c+0,duration:"8n"}),i.push({note:d,time:c+1,duration:"8n"}),i.push({note:d,time:c+2.5,duration:"8n"})});break;case 2:u.forEach(d=>{i.push({note:d,time:c+0,duration:"8n"}),i.push({note:d,time:c+.5,duration:"8n"}),i.push({note:d,time:c+2,duration:"4n"}),i.push({note:d,time:c+3,duration:"4n"})});break;case 3:u.forEach(d=>{i.push({note:d,time:c+0,duration:"1n"})});break;case 4:u.forEach(d=>{i.push({note:d,time:c+.5,duration:"8n"}),i.push({note:d,time:c+1.5,duration:"8n"}),i.push({note:d,time:c+2.5,duration:"8n"}),i.push({note:d,time:c+3.5,duration:"8n"})});break;case 5:u.forEach(d=>{i.push({note:d,time:c+0,duration:"4n"}),i.push({note:d,time:c+1,duration:"4n"}),i.push({note:d,time:c+2,duration:"4n"}),i.push({note:d,time:c+3,duration:"4n"})});break;case 6:u.forEach(d=>{i.push({note:d,time:c+0,duration:"8n"}),i.push({note:d,time:c+1.5,duration:"8n"}),i.push({note:d,time:c+2.5,duration:"4n"})});break;case 7:u.forEach(d=>{i.push({note:d,time:c+0,duration:"16n"}),i.push({note:d,time:c+.25,duration:"16n"}),i.push({note:d,time:c+2,duration:"16n"}),i.push({note:d,time:c+2.25,duration:"16n"})});break;case 8:u.forEach(d=>{i.push({note:d,time:c+0,duration:"4n",velocity:.4}),i.push({note:d,time:c+1,duration:"4n",velocity:.6}),i.push({note:d,time:c+2,duration:"4n",velocity:.8}),i.push({note:d,time:c+3,duration:"4n",velocity:1})});break;case 9:u.forEach(d=>{i.push({note:d,time:c+0,duration:"2n"}),i.push({note:d,time:c+3,duration:"8n"})});break}}return i}function FA(r,t=0){const n=[[[{n:"G5",t:0,d:"4n"},{n:"Eb5",t:1,d:"8n"},{n:"F5",t:1.5,d:"8n"},{n:"G5",t:2,d:"2n"}],[{n:"C6",t:0,d:"4n"},{n:"Bb5",t:1,d:"8n"},{n:"Ab5",t:1.5,d:"8n"},{n:"G5",t:2,d:"2n"}]],[[{n:"G5",t:0,d:"8n"},{n:"G5",t:.5,d:"8n"},{n:"Ab5",t:1,d:"8n"},{n:"Bb5",t:2,d:"8n"},{n:"C6",t:3,d:"8n"}],[{n:"Eb5",t:0,d:"8n"},{n:"F5",t:1,d:"8n"},{n:"G5",t:2,d:"8n"},{n:"Ab5",t:3,d:"8n"}]],[[{n:"C6",t:0,d:"4n"},{n:"Bb5",t:.5,d:"4n"}],[{n:"Ab5",t:2,d:"4n"},{n:"G5",t:2.5,d:"4n"}]],[[{n:"G5",t:0,d:"2n"},{n:"Ab5",t:2,d:"2n"}],[{n:"Bb5",t:0,d:"2n"},{n:"C6",t:2,d:"2n"}]],[[{n:"C6",t:0,d:"8n"},{n:"Bb5",t:.25,d:"8n"},{n:"Ab5",t:.5,d:"8n"},{n:"G5",t:.75,d:"8n"},{n:"F5",t:1,d:"8n"},{n:"G5",t:1.5,d:"8n"},{n:"Ab5",t:2,d:"4n"}],[{n:"Eb5",t:0,d:"8n"},{n:"F5",t:.5,d:"8n"},{n:"G5",t:1,d:"8n"},{n:"Ab5",t:1.5,d:"8n"},{n:"Bb5",t:2,d:"8n"},{n:"C6",t:2.5,d:"4n"}]],[[{n:"C5",t:0,d:"8n"},{n:"D5",t:.5,d:"8n"},{n:"Eb5",t:1,d:"8n"},{n:"F5",t:1.5,d:"8n"},{n:"G5",t:2,d:"8n"},{n:"Ab5",t:2.5,d:"8n"},{n:"Bb5",t:3,d:"8n"},{n:"C6",t:3.5,d:"8n"}],[{n:"C6",t:0,d:"2n"},{n:"G5",t:2,d:"2n"}]],[[{n:"C6",t:0,d:"8n"},{n:"Bb5",t:.5,d:"8n"},{n:"Ab5",t:1,d:"8n"},{n:"G5",t:1.5,d:"8n"},{n:"F5",t:2,d:"8n"},{n:"Eb5",t:2.5,d:"8n"},{n:"D5",t:3,d:"8n"},{n:"C5",t:3.5,d:"8n"}],[{n:"G5",t:0,d:"2n"},{n:"C5",t:2,d:"2n"}]],[[{n:"G5",t:.5,d:"8n"},{n:"Bb5",t:1,d:"8n"},{n:"C6",t:1.5,d:"4n"},{n:"Bb5",t:2.5,d:"8n"},{n:"G5",t:3,d:"4n"}],[{n:"Ab5",t:.5,d:"8n"},{n:"G5",t:1,d:"8n"},{n:"F5",t:1.5,d:"4n"},{n:"Eb5",t:2.5,d:"8n"},{n:"C5",t:3,d:"4n"}]],[[{n:"G5",t:0,d:"8n"},{n:"G5",t:.5,d:"8n"},{n:"G5",t:1,d:"8n"},{n:"Ab5",t:1.5,d:"8n"},{n:"G5",t:2,d:"8n"},{n:"G5",t:2.5,d:"8n"},{n:"G5",t:3,d:"8n"},{n:"F5",t:3.5,d:"8n"}],[{n:"Eb5",t:0,d:"8n"},{n:"Eb5",t:.5,d:"8n"},{n:"Eb5",t:1,d:"8n"},{n:"F5",t:1.5,d:"8n"},{n:"Eb5",t:2,d:"8n"},{n:"Eb5",t:2.5,d:"8n"},{n:"Eb5",t:3,d:"8n"},{n:"D5",t:3.5,d:"8n"}]],[[{n:"C5",t:0,d:"4n"},{n:"G5",t:1,d:"4n"},{n:"C6",t:2,d:"2n"}],[{n:"Eb5",t:0,d:"4n"},{n:"Bb5",t:1,d:"4n"},{n:"G5",t:2,d:"2n"}]]],i=n[t%10]||n[0],o=[];for(let c=0;c<r;c++){const u=c*4;i[c%i.length].forEach(f=>{o.push({note:f.n,time:u+f.t,duration:f.d})})}return o}function YA(r,t=0){const n=[];for(let i=0;i<r;i++){const o=i*4;switch(t%10){case 0:n.push({note:"C6",time:o,duration:"1n"});break;case 1:n.push({note:"C5",time:o,duration:"4n"},{note:"E5",time:o+1,duration:"4n"},{note:"G5",time:o+2,duration:"4n"},{note:"C6",time:o+3,duration:"4n"});break;case 2:n.push({note:"C6",time:o,duration:"16n"},{note:"C6",time:o+.25,duration:"16n"},{note:"G5",time:o+1,duration:"16n"},{note:"C6",time:o+2.5,duration:"16n"},{note:"C6",time:o+2.75,duration:"16n"});break;case 3:n.push({note:"C6",time:o,duration:"4n"},{note:"G5",time:o+1,duration:"4n"},{note:"E5",time:o+2,duration:"4n"},{note:"C5",time:o+3,duration:"4n"});break;case 4:n.push({note:"C5",time:o,duration:"2n"},{note:"G5",time:o,duration:"2n"},{note:"E5",time:o+2,duration:"2n"},{note:"C6",time:o+2,duration:"2n"});break;case 5:n.push({note:"C6",time:o,duration:"16n"},{note:"C6",time:o+.125,duration:"16n"},{note:"C6",time:o+.25,duration:"16n"},{note:"C6",time:o+2,duration:"16n"},{note:"C6",time:o+2.125,duration:"16n"},{note:"C6",time:o+2.25,duration:"16n"});break;case 6:n.push({note:"C5",time:o,duration:"1n",velocity:.3},{note:"G5",time:o,duration:"1n",velocity:.3},{note:"C6",time:o,duration:"1n",velocity:.3});break;case 7:n.push({note:"C6",time:o,duration:"8n"},{note:"G5",time:o+.5,duration:"8n"},{note:"C6",time:o+1,duration:"8n"},{note:"G5",time:o+1.5,duration:"8n"},{note:"C6",time:o+2,duration:"8n"},{note:"G5",time:o+2.5,duration:"8n"});break;case 8:n.push({note:"C5",time:o,duration:"8n",velocity:.3},{note:"C5",time:o+.5,duration:"8n",velocity:.4},{note:"C5",time:o+1,duration:"8n",velocity:.5},{note:"C5",time:o+1.5,duration:"8n",velocity:.6},{note:"C5",time:o+2,duration:"8n",velocity:.7},{note:"C5",time:o+2.5,duration:"8n",velocity:.8},{note:"C5",time:o+3,duration:"8n",velocity:.9},{note:"C6",time:o+3.5,duration:"8n",velocity:1});break;case 9:n.push({note:"G5",time:o+.5,duration:"16n"},{note:"C6",time:o+1.25,duration:"16n"},{note:"E5",time:o+2.75,duration:"16n"},{note:"C6",time:o+3.5,duration:"16n"});break}}return n}function XA(r,t=0){const n=[];for(let i=0;i<r;i++){const o=i*4;switch(t%10){case 0:n.push({note:"C5",time:o,duration:"1n"});break;case 1:n.push({note:"C5",time:o,duration:"4n"},{note:"Eb5",time:o+1,duration:"4n"},{note:"G5",time:o+2,duration:"2n"});break;case 2:n.push({note:"C5",time:o,duration:"8n"},{note:"C5",time:o+.5,duration:"8n"},{note:"Eb5",time:o+1.5,duration:"8n"},{note:"G5",time:o+2,duration:"4n"},{note:"Eb5",time:o+3,duration:"4n"});break;case 3:n.push({note:"G5",time:o+2,duration:"2n"});break;case 4:n.push({note:"C5",time:o,duration:"2n"},{note:"Eb5",time:o,duration:"2n"},{note:"G5",time:o+2,duration:"2n"},{note:"C6",time:o+2,duration:"2n"});break;case 5:n.push({note:"G5",time:o,duration:"4n"},{note:"C5",time:o+2,duration:"4n"});break;case 6:n.push({note:"C5",time:o,duration:"8n"},{note:"Eb5",time:o+.5,duration:"8n"},{note:"G5",time:o+1,duration:"8n"},{note:"Eb5",time:o+1.5,duration:"8n"},{note:"C5",time:o+2,duration:"8n"},{note:"G4",time:o+2.5,duration:"8n"},{note:"C5",time:o+3,duration:"4n"});break;case 7:n.push({note:"C5",time:o,duration:"1n",velocity:.4},{note:"Eb5",time:o,duration:"1n",velocity:.4},{note:"G5",time:o,duration:"1n",velocity:.4});break;case 8:n.push({note:"G5",time:o,duration:"16n"},{note:"G5",time:o+1,duration:"16n"},{note:"G5",time:o+2,duration:"16n"},{note:"Ab5",time:o+3,duration:"16n"});break;case 9:n.push({note:"G5",time:o,duration:"2n",velocity:.5},{note:"C6",time:o+2,duration:"2n",velocity:.5});break}}return n}const QA={drums:"#ef4444",bass:"#f97316",chord:"#eab308",arpeggio:"#22c55e",lead:"#3b82f6",fx:"#8b5cf6",vocal:"#ec4899"};function $A(r){let t=0;for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);t=(t<<5)-t+i,t=t&t}return Math.abs(t)}function ZA(r){return function(){let t=r+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}const WA=["drums","bass","arpeggio","chord","lead","fx","vocal"],KA={drums:qA,bass:PA,arpeggio:GA,chord:HA,lead:FA,fx:YA,vocal:XA},JA=[{name:"Intro",loops:[],bars:8,hasMemory:!1},{name:"A",loops:[],bars:16,hasMemory:!1},{name:"B",loops:[],bars:16,hasMemory:!1},{name:"C",loops:[],bars:16,hasMemory:!1},{name:"Bridge",loops:[],bars:8,hasMemory:!1},{name:"Coda",loops:[],bars:8,hasMemory:!1}];function tM(r){const t=$A(r),n=ZA(t),i=[];for(const o of WA){const c=Math.floor(n()*10),u=KA[o],d=QA[o];for(let f=1;f<=8;f++)i.push({name:f.toString(),bars:f,color:d,pattern:u(f,c),volume:.8,transpose:0,muted:!0,instrument:o,variation:c})}return i}const eM=56;function nM(r){const t=eM;return{perPlayer:t,total:t*r}}class _y{roomId;playerId;sync;state;stateListeners=new Set;connectionStatusListeners=new Set;clockSyncListeners=new Set;latencyListeners=new Set;isHostFlag;constructor(t){this.isHostFlag=!t,this.roomId=(t||this.generateRoomCode()).toUpperCase(),this.playerId=rc(),this.sync=new IA(this.roomId,this.isHostFlag),this.state={id:this.roomId,players:[],sections:JA.map(n=>({...n,id:rc()})),currentSectionIndex:0,nextSectionIndex:null,sectionVotes:[],createSectionVotes:[],tempo:120,currentBeat:0,currentBar:0,isPlaying:!1,leaderId:this.playerId,maxPlayers:10},this.sync.onMessage(this.handleMessage.bind(this)),this.sync.onStatusChange((n,i)=>{console.log(`Connection status: ${n?"connected":"disconnected"}, peers: ${i}`),this.connectionStatusListeners.forEach(o=>o(n,i))})}generateRoomCode(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="";for(let i=0;i<4;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}getRoomId(){return this.roomId}getPlayerId(){return this.playerId}getState(){return this.state}isLeader(){return this.state.leaderId===this.playerId}join(t,n){const i=tM(this.playerId),o={id:this.playerId,name:t,color:n,loops:i.map(u=>({...u,id:rc()})),isReady:!1},c=this.isHostFlag?100:2e3;return setTimeout(()=>{console.log("Sending join message for player:",o.name,"with",o.loops.length,"tracks"),this.sync.send({type:"join",player:o})},c),o}leave(){this.sync.send({type:"leave",playerId:this.playerId}),this.sync.close()}triggerLoop(t,n){this.sync.send({type:"loop_trigger",playerId:this.playerId,loopId:t,active:n})}voteSection(t){this.sync.send({type:"section_vote",playerId:this.playerId,sectionIndex:t})}voteCreateSection(t){const n=this.computeLoopStateHash();this.sync.send({type:"create_section_vote",playerId:this.playerId,hasMemory:t,loopStateHash:n})}computeLoopStateHash(){const t=this.state.players.flatMap(n=>n.loops.filter(i=>!i.muted).map(i=>({id:i.id,playerId:n.id,patternHash:JSON.stringify(i.pattern).substring(0,50)})));return JSON.stringify(t)}createLoopSnapshot(){return this.state.players.flatMap(t=>t.loops.filter(n=>!n.muted).map(n=>({loopId:n.id,playerId:t.id,pattern:[...n.pattern],muted:n.muted,volume:n.volume,transpose:n.transpose,variation:n.variation})))}applySnapshot(t){console.log("Applying section snapshot:",t.length,"loops"),this.state={...this.state,players:this.state.players.map(n=>({...n,loops:n.loops.map(i=>({...i,muted:!0}))}))},t.forEach(n=>{this.state={...this.state,players:this.state.players.map(i=>i.id===n.playerId?{...i,loops:i.loops.map(o=>o.id===n.loopId?{...o,pattern:[...n.pattern],muted:n.muted,volume:n.volume!==void 0?n.volume:o.volume,transpose:n.transpose!==void 0?n.transpose:o.transpose,variation:n.variation!==void 0?n.variation:o.variation}:o)}:i)}})}generateNextSectionName(){const t=new Set(this.state.sections.map(o=>o.name)),n="DEFGHIJ";for(const o of n)if(!t.has(o))return o;let i=2;for(;t.has(`A${i}`);)i++;return`A${i}`}queueSection(t){this.isLeader()&&this.sync.send({type:"section_queue",sectionIndex:t})}changeSection(t){if(this.isLeader()){const n=this.state.sections[t],i=n?.hasMemory?n.snapshot:void 0;this.sync.send({type:"section_change",sectionIndex:t,snapshot:i})}}updateTransport(t,n,i,o){if(this.isLeader()){const c=performance.now();this.sync.send({type:"transport",state:{isPlaying:t,tempo:n,currentBeat:i,currentBar:o,timeSignature:[4,4],serverTime:c,startTime:this.state.startTime||c}})}}sendClockSync(t){this.isLeader()&&this.sync.send({type:"clock_sync",clock:{leaderTime:performance.now(),transportPosition:t,tempo:this.state.tempo}})}pingPeers(){this.sync.send({type:"ping",sendTime:performance.now()})}updateLoopPattern(t,n){this.sync.send({type:"loop_update",playerId:this.playerId,loopId:t,pattern:n})}updateLoopVolume(t,n){this.sync.send({type:"loop_volume",playerId:this.playerId,loopId:t,volume:n})}updateLoopTranspose(t,n){this.sync.send({type:"loop_transpose",playerId:this.playerId,loopId:t,transpose:n})}setReady(t){this.sync.send({type:"ready",playerId:this.playerId,ready:t})}requestSync(){this.isLeader()?this.sync.send({type:"state_sync",state:this.state}):(console.log("Client requesting state sync from host"),this.sync.send({type:"sync_request"}))}onStateChange(t){return this.stateListeners.add(t),()=>this.stateListeners.delete(t)}onConnectionStatusChange(t){return this.connectionStatusListeners.add(t),()=>this.connectionStatusListeners.delete(t)}onClockSync(t){return this.clockSyncListeners.add(t),()=>this.clockSyncListeners.delete(t)}onLatencyUpdate(t){return this.latencyListeners.add(t),()=>this.latencyListeners.delete(t)}handleMessage(t){switch(t.type!=="transport"&&t.type!=="clock_sync"&&console.log("Handling message:",t.type),t.type){case"join":this.handleJoin(t.player);break;case"leave":this.handleLeave(t.playerId);break;case"transport":this.state={...this.state,isPlaying:t.state.isPlaying,tempo:t.state.tempo,currentBeat:t.state.currentBeat,currentBar:t.state.currentBar};break;case"loop_trigger":this.handleLoopTrigger(t.playerId,t.loopId,t.active);break;case"section_vote":this.handleSectionVote(t.playerId,t.sectionIndex);break;case"section_queue":this.state={...this.state,nextSectionIndex:t.sectionIndex,sectionVotes:[]};break;case"section_change":t.snapshot&&t.snapshot.length>0&&this.applySnapshot(t.snapshot),this.state={...this.state,currentSectionIndex:t.sectionIndex,nextSectionIndex:null,sectionVotes:[]};break;case"sync_request":this.isHostFlag&&(console.log("Received sync request, sending state to client, players:",this.state.players.length),console.log("Current state players:",this.state.players.map(n=>({name:n.name,loops:n.loops.length}))),this.sync.send({type:"state_sync",state:this.state}));break;case"state_sync":if(console.log(" state_sync received, isHost:",this.isHostFlag,"players in message:",t.state?.players?.length),this.isHostFlag)console.log("Host ignoring own state_sync");else{const n=this.state.players.find(o=>o.id===this.playerId),i=t.state.players.filter(o=>o.id!==this.playerId);console.log("State sync received from host"),console.log("  - Host players:",i.map(o=>o.name)),console.log("  - My player:",n?.name||"none"),this.state={...t.state,players:n?[...i,n]:i},console.log("State sync applied, players now:",this.state.players.map(o=>o.name)),console.log("  - Total loops:",this.state.players.reduce((o,c)=>o+c.loops.length,0)),this.notifyListeners()}break;case"ready":this.handleReady(t.playerId,t.ready);break;case"clock_sync":this.isHostFlag||this.handleClockSync(t.clock);break;case"ping":this.sync.send({type:"pong",sendTime:t.sendTime,receiveTime:performance.now()});break;case"pong":this.handlePong(t.sendTime,t.receiveTime);break;case"loop_update":this.handleLoopUpdate(t.playerId,t.loopId,t.pattern);break;case"loop_volume":this.handleLoopVolume(t.playerId,t.loopId,t.volume);break;case"loop_transpose":this.handleLoopTranspose(t.playerId,t.loopId,t.transpose);break;case"create_section_vote":this.handleCreateSectionVote(t.playerId,t.hasMemory,t.loopStateHash);break;case"create_section_reset":this.state={...this.state,createSectionVotes:[]};break}this.notifyListeners()}handleClockSync(t){this.clockSyncListeners.forEach(n=>n(t))}handlePong(t,n){const c=(performance.now()-t)/2;this.latencyListeners.forEach(u=>u(c))}handleSectionVote(t,n){const i=this.state.sectionVotes.findIndex(u=>u.playerId===t);let o=[...this.state.sectionVotes];i>=0?o[i]={playerId:t,sectionIndex:n}:o.push({playerId:t,sectionIndex:n}),this.state={...this.state,sectionVotes:o};const c=this.state.players.length;if(c>0){const u=new Map;o.forEach(d=>{u.set(d.sectionIndex,(u.get(d.sectionIndex)||0)+1)});for(const[d,f]of u)if(f>c/2){const p=this.state.sections[d],g=p?.hasMemory?p.snapshot:void 0;console.log("Section changed via majority vote to:",p?.name,g?"with memory":"without memory"),this.sync.send({type:"section_change",sectionIndex:d,snapshot:g});break}}}handleLoopUpdate(t,n,i){this.state={...this.state,players:this.state.players.map(o=>o.id===t?{...o,loops:o.loops.map(c=>c.id===n?{...c,pattern:i}:c)}:o)},this.checkCreateSectionVoteValidity()}handleLoopVolume(t,n,i){this.state={...this.state,players:this.state.players.map(o=>o.id===t?{...o,loops:o.loops.map(c=>c.id===n?{...c,volume:i}:c)}:o)}}handleLoopTranspose(t,n,i){this.state={...this.state,players:this.state.players.map(o=>o.id===t?{...o,loops:o.loops.map(c=>c.id===n?{...c,transpose:i}:c)}:o)}}handleCreateSectionVote(t,n,i){const o=this.state.createSectionVotes.findIndex(d=>d.playerId===t);let c=[...this.state.createSectionVotes];o>=0?c[o]={playerId:t,hasMemory:n,loopStateHash:i}:c.push({playerId:t,hasMemory:n,loopStateHash:i}),this.state={...this.state,createSectionVotes:c};const u=this.state.players.length;if(u>0&&c.length>u/2){const d=new Map;c.forEach(f=>{const p=d.get(f.loopStateHash);p?(p.count++,p.hasMemory=p.hasMemory||f.hasMemory):d.set(f.loopStateHash,{count:1,hasMemory:f.hasMemory})});for(const[,f]of d)if(f.count>u/2){this.createNewSection(f.hasMemory);break}}}checkCreateSectionVoteValidity(){if(this.state.createSectionVotes.length===0)return;const t=this.computeLoopStateHash(),n=this.state.players.length;this.state.createSectionVotes.filter(o=>o.loopStateHash!==t).length>n/2&&(console.log("Create section votes reset: too many pattern changes"),this.sync.send({type:"create_section_reset",reason:"pattern_changed"}))}createNewSection(t){const n={id:rc(),name:this.generateNextSectionName(),loops:this.state.players.flatMap(i=>i.loops.filter(o=>!o.muted).map(o=>o.id)),bars:16,hasMemory:t,snapshot:t?this.createLoopSnapshot():void 0};console.log("Creating new section:",n.name,t?"with memory":"without memory"),this.state={...this.state,sections:[...this.state.sections,n],createSectionVotes:[]}}handleJoin(t){if(!this.state.players.find(i=>i.id===t.id)){const i=this.state.players.length+1;if(console.log("Player joined:",t.name,"- total players now:",i),this.state={...this.state,players:[...this.state.players,t]},this.isHostFlag&&t.id!==this.playerId){const o=()=>{console.log("Sending state sync to new player, players:",this.state.players.length),this.sync.send({type:"state_sync",state:this.state})};setTimeout(o,500),setTimeout(o,1500),setTimeout(o,3e3)}}}handleLeave(t){const n=this.state.players.filter(i=>i.id!==t);this.state={...this.state,players:n},this.state.leaderId===t&&this.state.players.length>0&&(this.state.leaderId=this.state.players[0].id),console.log("Player left - remaining players:",n.length)}handleLoopTrigger(t,n,i){this.state={...this.state,players:this.state.players.map(o=>o.id===t?{...o,loops:o.loops.map(c=>c.id===n?{...c,muted:!i}:c)}:o)}}handleReady(t,n){this.state={...this.state,players:this.state.players.map(i=>i.id===t?{...i,isReady:n}:i)}}notifyListeners(){this.stateListeners.forEach(t=>t(this.state))}}const vy=["#f472b6","#60a5fa","#4ade80","#fbbf24","#a78bfa","#fb923c"];function sM({onJoin:r,initialRoomId:t}){const[n,i]=at.useState(""),[o,c]=at.useState(vy[0]),[u,d]=at.useState(t||""),[f,p]=at.useState(t?"join":"create"),g=y=>{y.preventDefault(),n.trim()&&r(n.trim(),o,f==="join"?u:void 0)};return B.jsxs("div",{className:"room-join",children:[B.jsxs("div",{className:"join-header",children:[B.jsx("h1",{children:"MAML Loops"}),B.jsx("p",{children:"Polymetric Collaborative Music"})]}),B.jsxs("div",{className:"mode-toggle",children:[B.jsx("button",{className:f==="create"?"active":"",onClick:()=>p("create"),children:"Create Room"}),B.jsx("button",{className:f==="join"?"active":"",onClick:()=>p("join"),children:"Join Room"})]}),B.jsxs("form",{onSubmit:g,className:"join-form",children:[B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Your Name"}),B.jsx("input",{type:"text",value:n,onChange:y=>i(y.target.value),placeholder:"Enter your name",maxLength:20,required:!0})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Your Color"}),B.jsx("div",{className:"color-picker",children:vy.map(y=>B.jsx("button",{type:"button",className:`color-option ${o===y?"selected":""}`,style:{backgroundColor:y},onClick:()=>c(y)},y))})]}),f==="join"&&B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{children:["Room Code",t&&B.jsx("span",{className:"from-qr",children:" (from link)"})]}),B.jsx("input",{type:"text",value:u,onChange:y=>d(y.target.value.toUpperCase()),placeholder:"Enter room code",maxLength:8,required:!0,readOnly:!!t,className:t?"prefilled":""})]}),B.jsx("button",{type:"submit",className:"join-button",children:f==="create"?"Create Room":"Join Room"})]}),B.jsxs("div",{className:"glass-quote",children:[B.jsx("p",{children:'"Music is a place"'}),B.jsx("span",{children:" Philip Glass"})]})]})}function iM({roomId:r,playerCount:t,connectionStatus:n,debugInfo:i}){let o=window.location.pathname;o.endsWith("index.html")&&(o=o.slice(0,-10)),o.endsWith("/")||(o=o+"/");const c=`${window.location.origin}${o}#room=${r}`,[u,d]=at.useState(!1),f=nM(t),p=async()=>{await navigator.clipboard.writeText(c),d(!0),setTimeout(()=>d(!1),2e3)};return B.jsxs("div",{className:"room-share",children:[B.jsxs("div",{className:"share-info",children:[B.jsx("span",{className:"room-code",children:r}),B.jsxs("span",{className:"player-count",children:[t," player",t!==1?"s":""]}),B.jsxs("span",{className:"track-allocation",title:`${f.total} total tracks shared among all players`,children:[f.perPlayer," tracks/person"]}),n&&B.jsxs("span",{className:`connection-status ${n.connected?"connected":"disconnected"}`,title:`${n.isHost?"Host":"Client"} - ${n.peerCount} peers`,children:[n.connected?"":""," ",n.isHost?"Host":"Client",!n.isHost&&!n.connected&&" (connecting...)",n.peerCount>0&&` (${n.peerCount})`]})]}),B.jsxs("div",{className:"share-actions",children:[B.jsx("button",{onClick:p,className:"copy-button",children:u?"Copied!":"Copy Link"}),B.jsx("div",{className:"qr-container",children:B.jsx(G_,{value:c,size:64,bgColor:"transparent",fgColor:"#ffffff"})})]}),i&&B.jsx("div",{className:"debug-info",style:{fontSize:"10px",color:"#888",marginTop:"8px",wordBreak:"break-all"},children:i})]})}const oc={kick:"C1",snare:"D1",hihat:"E1",clap:"G1"},by=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Sy(r,t){if(t===0)return r;const n=r.match(/^([A-G]#?)(\d)$/);if(!n)return r;const i=n[1],o=parseInt(n[2]),c=by.indexOf(i);if(c===-1)return r;const u=o*12+c+t,d=Math.floor(u/12),f=(u%12+12)%12;return`${by[f]}${d}`}class aM{synths=new Map;sequences=new Map;loopBars=new Map;loopInstruments=new Map;loopTranspose=new Map;loopMuted=new Map;isStarted=!1;onBeatCallback;beatsPerBar=4;masterGain;clockOffset=0;latency=0;previewSynth=null;previewPart=null;isPreviewPlaying=!1;isFading=!1;onLoopStateChangeCallback;drumKits=new Map;pendingMuteChanges=new Map;pendingPatternChanges=new Map;loopPatterns=new Map;constructor(){xt().bpm.value=120,xt().timeSignature=this.beatsPerBar,Je().lookAhead=.1,Je().updateInterval=.05,this.masterGain=new ve(1).toDestination(),this.previewSynth=new es(En,{oscillator:{type:"sine"},envelope:{attack:.01,decay:.1,sustain:.4,release:.5}}).toDestination(),this.previewSynth.volume.value=-6}createDrumKitForLoop(t){(!this.masterGain||this.masterGain.disposed)&&(this.masterGain=new ve(1).toDestination());const n=this.drumKits.get(t);n&&(n.kick.dispose(),n.snare.dispose(),n.hihat.dispose());const i={kick:new Io({pitchDecay:.05,octaves:6,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:.4}}).connect(this.masterGain),snare:new Td({noise:{type:"white"},envelope:{attack:.001,decay:.2,sustain:0,release:.1}}).connect(this.masterGain),hihat:new Cd({envelope:{attack:.001,decay:.1,release:.01},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5}).connect(this.masterGain)};i.kick.volume.value=-6,i.snare.volume.value=-10,i.hihat.volume.value=-12,this.drumKits.set(t,i)}createSynthForInstrument(t,n){(!this.masterGain||this.masterGain.disposed)&&(this.masterGain=new ve(1).toDestination());let i;switch(t){case"drums":i=new es(En,{oscillator:{type:"sine"},envelope:{attack:.001,decay:.1,sustain:0,release:.1}}).connect(this.masterGain),i.volume.value=-1/0;break;case"bass":i=new es(En,{oscillator:{type:"sawtooth"},envelope:{attack:.01,decay:.3,sustain:.4,release:.3}}).connect(this.masterGain),i.volume.value=Hs(n)-3;break;case"chord":i=new es(En,{oscillator:{type:"sine"},envelope:{attack:.3,decay:.5,sustain:.7,release:1}}).connect(this.masterGain),i.volume.value=Hs(n)-6;break;case"arpeggio":i=new es(En,{oscillator:{type:"triangle"},envelope:{attack:.02,decay:.1,sustain:.3,release:.8}}).connect(this.masterGain),i.volume.value=Hs(n);break;case"lead":i=new es(En,{oscillator:{type:"square"},envelope:{attack:.01,decay:.2,sustain:.5,release:.4}}).connect(this.masterGain),i.volume.value=Hs(n)-3;break;case"fx":i=new es(En,{oscillator:{type:"sine"},envelope:{attack:.5,decay:1,sustain:.3,release:2}}).connect(this.masterGain),i.volume.value=Hs(n)-9;break;case"vocal":i=new es(En,{oscillator:{type:"sine"},envelope:{attack:.1,decay:.3,sustain:.6,release:.5}}).connect(this.masterGain),i.volume.value=Hs(n)-3;break;default:i=new es(En,{oscillator:{type:"triangle"},envelope:{attack:.02,decay:.1,sustain:.3,release:.8}}).connect(this.masterGain),i.volume.value=Hs(n)}return i}playDrumNote(t,n,i,o=.8){let c=this.drumKits.get(t);c||(this.createDrumKitForLoop(t),c=this.drumKits.get(t)),c&&(n===oc.kick||n.includes("C1")||n.includes("C2")?c.kick.triggerAttackRelease("C1","8n",i,o):n===oc.snare||n.includes("D1")||n.includes("D2")?c.snare.triggerAttackRelease("8n",i,o):n===oc.hihat||n.includes("E1")||n.includes("F1")||n.includes("E2")?c.hihat.triggerAttackRelease("32n",i,o):n===oc.clap||n.includes("G1")?c.snare.triggerAttackRelease("16n",i,o):c.hihat.triggerAttackRelease("32n",i,o))}async start(){this.isStarted||(await x_(),this.isStarted=!0,xt().scheduleRepeat(t=>{const n=xt().position,[i,o]=n.split(":").map(Number);this.onBeatCallback&&yf().schedule(()=>{this.onBeatCallback(o,i)},t)},"4n"))}setTempo(t){xt().bpm.value=t}getTempo(){return xt().bpm.value}play(){this.pendingMuteChanges.forEach((t,n)=>{!t.muted&&t.scheduledId===void 0&&this.loopMuted.set(n,!1)}),this.pendingMuteChanges.forEach((t,n)=>{t.scheduledId===void 0&&this.pendingMuteChanges.delete(n)}),xt().start()}playSynced(t){const n=performance.now(),i=t-this.clockOffset,o=Math.max(0,i-n);if(o>0)setTimeout(()=>{xt().start()},o);else{const c=this.msToSeconds(Math.abs(o))*(this.getTempo()/60)/this.beatsPerBar;xt().start(void 0,`${Math.floor(c)}:0:0`)}}stop(){if(this.isFading)return;const n=120/this.getTempo();this.isFading=!0;const i=ic();this.masterGain.gain.setValueAtTime(1,i),this.masterGain.gain.linearRampToValueAtTime(0,i+n),setTimeout(()=>{xt().stop(),xt().position=0,this.masterGain.gain.setValueAtTime(1,ic()),this.isFading=!1},n*1e3+50)}stopImmediate(){this.isFading=!1,this.masterGain.gain.cancelScheduledValues(ic()),this.masterGain.gain.setValueAtTime(1,ic()),xt().stop(),xt().position=0}pause(){xt().pause()}msToSeconds(t){return t/1e3}onBeat(t){this.onBeatCallback=t}onLoopStateChange(t){this.onLoopStateChangeCallback=t}getTransportState(){const t=xt().position,[n,i]=t.split(":").map(Number);return{isPlaying:xt().state==="started",tempo:xt().bpm.value,currentBeat:i,currentBar:n,timeSignature:[this.beatsPerBar,4]}}hasLoop(t){return this.sequences.has(t)}createLoop(t){if(this.sequences.has(t.id)){this.loopMuted.set(t.id,t.muted);return}const n=t.instrument||"arpeggio",i=this.createSynthForInstrument(n,t.volume);this.synths.set(t.id,i),this.loopBars.set(t.id,t.bars),this.loopInstruments.set(t.id,n),this.loopTranspose.set(t.id,t.transpose||0),this.loopMuted.set(t.id,!0);const o=`${t.bars}m`,c=t.id;if(t.pattern&&t.pattern.length>0){const u=t.pattern.map(p=>({time:this.beatsToToneTime(p.time),note:p})),d=n==="drums",f=new ur((p,g)=>{if(!(this.loopMuted.get(c)??!1)){const v=this.loopTranspose.get(c)||0,b=d?g.note.note:Sy(g.note.note,v);d?this.playDrumNote(c,b,p,g.note.velocity||.8):i.triggerAttackRelease(b,g.note.duration,p,g.note.velocity||.8)}},u);f.loop=!0,f.loopEnd=o,this.sequences.set(t.id,f)}}startLoop(t){const n=this.sequences.get(t),i=this.loopBars.get(t)||4;if(n)if(n.state!=="started"&&n.start(0),xt().state!=="started")this.pendingMuteChanges.set(t,{muted:!1,scheduledId:void 0});else{const c=xt().position,[u,d]=c.split(":").map(Number),p=u%i+d/4,g=i*.25,y=i-p;let v;y<g?v=Math.ceil((u+1)/i)*i+i:v=Math.ceil((u+1)/i)*i;const b=this.pendingMuteChanges.get(t);b?.scheduledId!==void 0&&xt().clear(b.scheduledId);const S=xt().scheduleOnce(T=>{this.loopMuted.set(t,!1),this.pendingMuteChanges.delete(t),yf().schedule(()=>{this.onLoopStateChangeCallback&&this.onLoopStateChangeCallback(t,!0)},T)},`${v}m`);this.pendingMuteChanges.set(t,{muted:!1,scheduledId:S})}}stopLoop(t){const n=this.pendingMuteChanges.get(t);n?.scheduledId!==void 0&&(xt().clear(n.scheduledId),this.pendingMuteChanges.delete(t)),this.loopMuted.set(t,!0)}scheduleStopLoop(t){const n=this.loopBars.get(t)||4;if(xt().state!=="started"){this.loopMuted.set(t,!0);return}const o=xt().position,[c]=o.split(":").map(Number),u=Math.ceil((c+1)/n)*n,d=this.pendingMuteChanges.get(t);d?.scheduledId!==void 0&&xt().clear(d.scheduledId);const f=xt().scheduleOnce(p=>{this.loopMuted.set(t,!0),this.pendingMuteChanges.delete(t),yf().schedule(()=>{this.onLoopStateChangeCallback&&this.onLoopStateChangeCallback(t,!1)},p)},`${u}m`);this.pendingMuteChanges.set(t,{muted:!0,scheduledId:f})}isLoopPendingStop(t){const n=this.pendingMuteChanges.get(t);return n!==void 0&&n.muted===!0}isLoopPendingStart(t){const n=this.pendingMuteChanges.get(t);return n!==void 0&&!n.muted}setLoopVolume(t,n){const i=this.synths.get(t);i&&(i.volume.value=Hs(n))}setLoopTranspose(t,n){const i=Math.max(-12,Math.min(12,n));this.loopTranspose.set(t,i)}setLoopMuted(t,n){this.loopMuted.set(t,n)}removeLoop(t){const n=this.pendingMuteChanges.get(t);n?.scheduledId!==void 0&&xt().clear(n.scheduledId),this.pendingMuteChanges.delete(t);const i=this.sequences.get(t);i&&(i.stop(),i.dispose(),this.sequences.delete(t));const o=this.synths.get(t);o&&(o.dispose(),this.synths.delete(t));const c=this.drumKits.get(t);c&&(c.kick.dispose(),c.snare.dispose(),c.hihat.dispose(),this.drumKits.delete(t)),this.loopBars.delete(t),this.loopInstruments.delete(t),this.loopTranspose.delete(t),this.loopMuted.delete(t),this.loopPatterns.delete(t)}schedulePatternChange(t,n,i){this.pendingPatternChanges.set(t,n),xt().scheduleOnce(()=>{const o=this.pendingPatternChanges.get(t);o&&(this.applyPatternChangeNow(t,o),this.pendingPatternChanges.delete(t))},`${i}m`)}applyPatternChangeNow(t,n){this.updateLoopPattern(t,n)}updateLoopPattern(t,n){const i=this.synths.get(t),o=this.sequences.get(t),u=(this.loopInstruments.get(t)||"arpeggio")==="drums",d=this.loopBars.get(t)||this.getLoopBarsFromPattern(n);if(!i)return;if(this.loopPatterns.set(t,n),o){o.clear(),n.forEach(g=>{const y=this.beatsToToneTime(g.time);o.add(y,{time:y,note:g})}),o.loopEnd=`${d}m`;return}const f=n.map(g=>({time:this.beatsToToneTime(g.time),note:g})),p=new ur((g,y)=>{if(this.loopMuted.get(t)??!1)return;const b=this.loopTranspose.get(t)||0,S=u?y.note.note:Sy(y.note.note,b);u?this.playDrumNote(t,S,g,y.note.velocity||.8):i.triggerAttackRelease(S,y.note.duration,g,y.note.velocity||.8)},f);p.loop=!0,p.loopEnd=`${d}m`,this.sequences.set(t,p)}getLoopBarsFromPattern(t){if(t.length===0)return 1;const n=Math.max(...t.map(i=>i.time));return Math.ceil((n+1)/4)}beatsToToneTime(t){const n=Math.floor(t/this.beatsPerBar),i=t%this.beatsPerBar,o=Math.floor(i),c=(i-o)*4;return`${n}:${o}:${c}`}getLoopPhase(t){const n=xt().position,[i]=n.split(":").map(Number);return i%t/t}calculateRealignment(t){if(t.length===0)return 0;const n=(o,c)=>c===0?o:n(c,o%c),i=(o,c)=>o*c/n(o,c);return t.reduce(i)}previewPattern(t,n){if(this.stopPreview(),!this.previewSynth||t.length===0)return;const i=t.map(c=>({time:this.beatsToToneTime(c.time),note:c})),o=this.previewSynth;if(this.previewPart=new ur((c,u)=>{o.triggerAttackRelease(u.note.note,u.note.duration,c,u.note.velocity||.8)},i),this.previewPart.loop=!0,this.previewPart.loopEnd=`${n}m`,this.previewPart.start(0),this.isPreviewPlaying=!0,xt().state!=="started"){xt().start();const c=n*this.beatsPerBar*60*1e3/this.getTempo();setTimeout(()=>{this.isPreviewPlaying&&(this.stopPreview(),xt().stop(),xt().position=0)},c+100)}}stopPreview(){this.previewPart&&(this.previewPart.stop(),this.previewPart.dispose(),this.previewPart=null),this.isPreviewPlaying=!1}isPreviewActive(){return this.isPreviewPlaying}playPreviewNote(t,n="8n"){this.previewSynth&&this.previewSynth.triggerAttackRelease(t,n)}dispose(){this.stopPreview(),this.stopImmediate(),this.pendingMuteChanges.forEach(t=>{t.scheduledId!==void 0&&xt().clear(t.scheduledId)}),this.pendingMuteChanges.clear(),this.previewSynth&&(this.previewSynth.dispose(),this.previewSynth=null),this.drumKits.forEach(t=>{t.kick.dispose(),t.snare.dispose(),t.hihat.dispose()}),this.drumKits.clear(),this.masterGain&&this.masterGain.dispose(),this.sequences.forEach(t=>t.dispose()),this.synths.forEach(t=>t.dispose()),this.sequences.clear(),this.synths.clear(),this.loopInstruments.clear(),this.loopPatterns.clear(),xt().cancel()}handleClockSync(t){const i=performance.now()-t.leaderTime;this.clockOffset=this.clockOffset*.8+i*.2;const o=t.transportPosition,c=this.getCurrentPositionInBars();Math.abs(o-c)>.25&&xt().state==="started"&&this.syncToPosition(o)}setLatency(t){this.latency=this.latency*.7+t*.3}getLatency(){return this.latency}getClockOffset(){return this.clockOffset}syncToPosition(t){const n=xt().state==="started";n&&xt().pause(),xt().position=`${Math.floor(t)}:0:0`,n&&xt().start()}getCurrentPositionInBars(){const n=xt().position.split(":").map(Number);return n[0]+n[1]/this.beatsPerBar+n[2]/(this.beatsPerBar*4)}getExpectedPosition(t){const n=performance.now()-t+this.clockOffset,i=this.getTempo()/60/1e3;return n*i/this.beatsPerBar}}const Pt=new aM;function rM(){const[r,t]=at.useState(!1),[n,i]=at.useState(!1),[o,c]=at.useState(0),[u,d]=at.useState(0),[f,p]=at.useState(120),g=at.useRef(new Set),y=at.useRef(new Set);at.useEffect(()=>(Pt.onBeat((A,Y)=>{c(A),d(Y)}),Pt.onLoopStateChange((A,Y)=>{y.current.forEach(W=>{W(A,Y)})}),()=>{Pt.dispose()}),[]);const v=at.useCallback(async()=>{if(!r)try{console.log("[Audio] Initializing audio context...");const A=Je().rawContext;if(console.log("[Audio] Initial context state:",A.state),(A.state==="suspended"||A.state==="interrupted")&&(console.log("[Audio] Resuming suspended context..."),await A.resume(),console.log("[Audio] After resume, state:",A.state)),console.log("[Audio] Starting Tone.js..."),await x_(),console.log("[Audio] Tone started, context state:",A.state),await Pt.start(),console.log("[Audio] AudioEngine started"),A.state!=="running"){console.log("[Audio] Context still not running, trying oscillator trick...");const Y=A.createOscillator(),W=A.createGain();W.gain.value=0,Y.connect(W),W.connect(A.destination),Y.start(0),Y.stop(.1),await new Promise(rt=>setTimeout(rt,100)),console.log("[Audio] After oscillator trick, state:",A.state)}if(A.state!=="running")throw console.warn("[Audio] Context still not running after all attempts, state:",A.state),new Error(`Audio context not running: ${A.state}`);t(!0),console.log("[Audio] Audio context started successfully!")}catch(A){throw console.error("[Audio] Failed to start audio:",A),A}},[r]),b=at.useCallback(async()=>{r||await v(),g.current.forEach(A=>{Pt.startLoop(A)}),console.log("[useAudioEngine] Starting transport, active loops:",g.current.size),Pt.play(),i(!0)},[r,v]),S=at.useCallback(()=>{Pt.stop(),i(!1),c(0),d(0)},[]),T=at.useCallback(()=>{Pt.pause(),i(!1)},[]),x=at.useCallback(A=>{Pt.setTempo(A),p(A)},[]),E=at.useCallback(A=>{Pt.createLoop(A)},[]),w=at.useCallback((A,Y)=>{console.log("[useAudioEngine] toggleLoop:",A.id,Y,"pattern length:",A.pattern.length),Y?(Pt.createLoop(A),Pt.startLoop(A.id),g.current.add(A.id),console.log("[useAudioEngine] Active loops now:",g.current.size)):(Pt.scheduleStopLoop(A.id),g.current.delete(A.id))},[]),N=at.useCallback(A=>{Pt.removeLoop(A),g.current.delete(A)},[]),X=at.useCallback(A=>Pt.getLoopPhase(A),[]),O=at.useCallback(A=>Pt.calculateRealignment(A),[]),U=at.useCallback((A,Y)=>{Pt.updateLoopPattern(A,Y)},[]),j=at.useCallback((A,Y,W)=>{Pt.schedulePatternChange(A,Y,W)},[]),z=at.useCallback((A,Y)=>{Pt.setLoopVolume(A,Y)},[]),nt=at.useCallback((A,Y)=>{Pt.setLoopTranspose(A,Y)},[]),G=at.useCallback(async(A,Y)=>{r||await v(),Pt.previewPattern(A,Y)},[r,v]),$=at.useCallback(()=>{Pt.stopPreview()},[]),Q=at.useCallback(A=>{Pt.playPreviewNote(A)},[]),st=at.useCallback(A=>Pt.isLoopPendingStart(A),[]),J=at.useCallback(A=>{Pt.scheduleStopLoop(A)},[]),ot=at.useCallback(A=>Pt.isLoopPendingStop(A),[]),M=at.useCallback(A=>(y.current.add(A),()=>{y.current.delete(A)}),[]);return{isReady:r,isPlaying:n,currentBeat:o,currentBar:u,tempo:f,initAudio:v,start:b,stop:S,pause:T,changeTempo:x,createLoop:E,toggleLoop:w,removeLoop:N,getLoopPhase:X,calculateRealignment:O,updateLoopPattern:U,schedulePatternChange:j,setLoopVolume:z,setLoopTranspose:nt,previewPattern:G,stopPreview:$,playPreviewNote:Q,isLoopPendingStart:st,scheduleStopLoop:J,isLoopPendingStop:ot,onLoopStateChange:M}}function oM(){const[r,t]=at.useState(null),[n,i]=at.useState(null),[o,c]=at.useState({connected:!1,peerCount:0,isHost:!1}),u=at.useRef(null),d=r?.players.find(G=>G.id===n)||null,f=at.useCallback((G,$)=>{const Q=new _y;u.current=Q;const st=Q.join(G,$);return i(st.id),Q.onStateChange(J=>{t(J)}),Q.onConnectionStatusChange((J,ot)=>{c({connected:J,peerCount:ot,isHost:!0})}),Q.onClockSync(J=>{Pt.handleClockSync(J)}),Q.onLatencyUpdate(J=>{Pt.setLatency(J)}),t(Q.getState()),Q.getRoomId()},[]),p=at.useCallback((G,$,Q)=>{const st=new _y(G);u.current=st;const J=st.join($,Q);return i(J.id),st.onStateChange(ot=>{t(ot)}),st.onConnectionStatusChange((ot,M)=>{c({connected:ot,peerCount:M,isHost:!1})}),st.onClockSync(ot=>{Pt.handleClockSync(ot)}),st.onLatencyUpdate(ot=>{Pt.setLatency(ot)}),setTimeout(()=>{st.requestSync()},500),st.getRoomId()},[]),g=at.useCallback(()=>{u.current&&(u.current.leave(),u.current=null),t(null),i(null)},[]),y=at.useCallback((G,$)=>{u.current&&u.current.triggerLoop(G,$)},[]),v=at.useCallback((G,$)=>{u.current&&u.current.updateLoopPattern(G,$)},[]),b=at.useCallback((G,$)=>{u.current&&u.current.updateLoopVolume(G,$)},[]),S=at.useCallback((G,$)=>{u.current&&u.current.updateLoopTranspose(G,$)},[]),T=at.useCallback(G=>{u.current&&u.current.voteSection(G)},[]),x=at.useCallback(G=>{u.current&&u.current.voteCreateSection(G)},[]),E=at.useCallback(G=>{u.current&&u.current.queueSection(G)},[]),w=at.useCallback(G=>{u.current&&u.current.changeSection(G)},[]),N=at.useCallback((G,$,Q,st)=>{u.current&&u.current.updateTransport(G,$,Q,st)},[]),X=at.useCallback(()=>u.current&&d?u.current.isLeader():!1,[d]),O=at.useCallback(()=>{if(u.current&&u.current.isLeader()){const G=Pt.getCurrentPositionInBars();u.current.sendClockSync(G)}},[]),U=at.useCallback(()=>{u.current&&u.current.pingPeers()},[]),j=at.useCallback(G=>{Pt.handleClockSync(G)},[]),z=at.useCallback(G=>{Pt.playSynced(G)},[]),nt=at.useCallback(()=>({latency:Pt.getLatency(),clockOffset:Pt.getClockOffset()}),[]);return at.useEffect(()=>()=>{u.current&&u.current.leave()},[]),{roomState:r,currentPlayer:d,connectionStatus:o,createRoom:f,joinRoom:p,leaveRoom:g,triggerLoop:y,updateLoopPattern:v,updateLoopVolume:b,updateLoopTranspose:S,voteSection:T,voteCreateSection:x,queueSection:E,changeSection:w,updateTransport:N,isLeader:X,sendClockSync:O,pingPeers:U,handleClockSync:j,startSyncedPlayback:z,getSyncStats:nt}}function lM(){const[r,t]=at.useState(!1),[n,i]=at.useState([]),[o,c]=at.useState(null),[u,d]=at.useState(null),[f,p]=at.useState([]),[g,y]=at.useState([]),[v,b]=at.useState(!1),[S,T]=at.useState(""),x=at.useRef(0),E=rM(),w=oM();at.useEffect(()=>{console.log("[App] Checking URL for room ID..."),console.log("[App] window.location.href:",window.location.href),console.log("[App] window.location.hash:",window.location.hash),console.log("[App] window.location.search:",window.location.search);let A=new URLSearchParams(window.location.search).get("room");if(!A&&window.location.hash){const Y=window.location.hash.match(/room=([A-Za-z0-9]+)/);console.log("[App] Hash match result:",Y),Y&&(A=Y[1])}console.log("[App] Final roomParam:",A),A&&c(A.toUpperCase())},[]);const N=async(M,A,Y)=>{T("Initializing audio...");try{await E.initAudio(),b(!1),T("Audio OK")}catch(W){console.warn("Audio init failed, will need unlock:",W),b(!0),T(`Audio failed: ${W}`)}Y?(T(W=>W+" | Joining room..."),w.joinRoom(Y,M,A)):(T(W=>W+" | Creating room..."),w.createRoom(M,A)),t(!0)},X=at.useCallback(async()=>{try{return await E.initAudio(),b(!1),!0}catch(M){return console.error("Audio unlock failed:",M),!1}},[E]);at.useEffect(()=>{if(!v)return;const M=async()=>{await X()&&(document.removeEventListener("touchstart",M),document.removeEventListener("touchend",M),document.removeEventListener("click",M),document.removeEventListener("keydown",M))};return document.addEventListener("touchstart",M,{passive:!0}),document.addEventListener("touchend",M,{passive:!0}),document.addEventListener("click",M),document.addEventListener("keydown",M),()=>{document.removeEventListener("touchstart",M),document.removeEventListener("touchend",M),document.removeEventListener("click",M),document.removeEventListener("keydown",M)}},[v,X]),at.useEffect(()=>{if(w.roomState){const M=w.roomState.players.map(Y=>Y.name).join(", "),A=E.isReady?"ready":"not ready";T(`Players: ${M||"none"} | Audio: ${A}`)}},[w.roomState,E.isReady]);const O=at.useRef({isPlaying:!1,tempo:120,bar:0});at.useEffect(()=>{if(!w.isLeader()||!w.roomState)return;const A=O.current;A.isPlaying===E.isPlaying&&A.tempo===E.tempo&&A.bar===E.currentBar||(O.current={isPlaying:E.isPlaying,tempo:E.tempo,bar:E.currentBar},w.updateTransport(E.isPlaying,E.tempo,E.currentBeat,E.currentBar))},[E.isPlaying,E.tempo,E.currentBar,E.currentBeat,w]);const U=at.useMemo(()=>w.roomState?w.roomState.players.flatMap(M=>M.loops.filter(A=>!A.muted)):[],[w.roomState]);at.useEffect(()=>E.onLoopStateChange((A,Y)=>{console.log("[App] Instant loop state change:",A,Y),Y?p(W=>W.filter(rt=>rt!==A)):(y(W=>W.filter(rt=>rt!==A)),w.triggerLoop(A,!1))}),[E,w]),at.useEffect(()=>{if(!w.roomState)return;const M=w.roomState.players.flatMap(W=>W.loops),A=M.filter(W=>E.isLoopPendingStart(W.id)).map(W=>W.id),Y=M.filter(W=>E.isLoopPendingStop(W.id)).map(W=>W.id);p(W=>W.length!==A.length||!W.every((rt,R)=>rt===A[R])?A:W),y(W=>W.length!==Y.length||!W.every((rt,R)=>rt===Y[R])?Y:W)},[w.roomState,E]);const j=at.useRef(-1);at.useEffect(()=>{if(!w.roomState)return;const M=w.roomState.currentSectionIndex;j.current!==M&&(j.current=M,console.log("[App] Section changed to:",M),w.roomState.players.forEach(A=>{A.loops.forEach(Y=>{E.toggleLoop(Y,!Y.muted),E.updateLoopPattern(Y.id,Y.pattern)})}))},[w.roomState,E]),at.useEffect(()=>{if(n.length===0||E.currentBar===x.current)return;x.current=E.currentBar;const M=n.filter(A=>w.currentPlayer?.loops.find(W=>W.id===A.loopId)?E.currentBar>=A.applyAtBar:!1);M.length>0&&(M.forEach(A=>{w.updateLoopPattern(A.loopId,A.pattern)}),i(A=>A.filter(Y=>!M.some(W=>W.loopId===Y.loopId))))},[E.currentBar,n,w.currentPlayer,w]);const z=(M,A)=>{const Y=w.currentPlayer;if(!Y)return;const W=Y.loops.find(rt=>rt.id===M);W&&(E.toggleLoop({...W,muted:!A},A),A?(p(rt=>[...rt.filter(R=>R!==M),M]),w.triggerLoop(M,A)):y(rt=>[...rt.filter(R=>R!==M),M]))},nt=at.useCallback((M,A)=>{const Y=w.currentPlayer;if(!Y)return;const W=Y.loops.find(it=>it.id===M);if(!W)return;const rt=E.currentBar,R=W.bars,F=Math.ceil((rt+1)/R)*R;console.log("[App] Scheduling pattern change for loop:",M,"at bar:",F),console.log("[App] Pattern notes:",A.map(it=>({note:it.note,time:it.time,duration:it.duration}))),E.schedulePatternChange(M,A,F),i(it=>[...it.filter(I=>I.loopId!==M),{loopId:M,pattern:A,applyAtBar:F}])},[w.currentPlayer,E.currentBar,E]),G=at.useCallback((M,A)=>{E.setLoopVolume(M,A),w.updateLoopVolume(M,A)},[E,w]),$=at.useCallback((M,A)=>{E.setLoopTranspose(M,A),w.updateLoopTranspose(M,A)},[E,w]),Q=at.useCallback((M,A)=>{const Y=A?M:null;d(Y),U.forEach(W=>{Y===null||W.id===Y?E.setLoopVolume(W.id,W.volume):E.setLoopVolume(W.id,0)})},[U,E]);if(!r)return B.jsx(sM,{onJoin:N,initialRoomId:o});const{roomState:st,currentPlayer:J}=w;if(!st||!J)return B.jsx("div",{className:"loading",children:"Connecting..."});const ot=w.isLeader();return B.jsxs("div",{className:"app",children:[B.jsxs("header",{className:"app-header",children:[B.jsx("h1",{children:"MAML Loops"}),v&&B.jsx("button",{className:"audio-unlock-btn",onClick:X,children:" Tap to Enable Sound"})]}),B.jsxs("main",{className:"app-main",children:[B.jsx("div",{className:"timeline-section",children:B.jsx($E,{loops:U,currentBar:E.currentBar,currentBeat:E.currentBeat,isPlaying:E.isPlaying,tempo:E.tempo,onPatternChange:nt,onPreviewPattern:E.previewPattern,onStopPreview:E.stopPreview,onPreviewNote:E.playPreviewNote,onVolumeChange:G,onTransposeChange:$,onSoloChange:Q,soloedLoopId:u,editableLoopIds:J?.loops.map(M=>M.id),queuedChanges:n})}),B.jsxs("div",{className:"controls-and-pads-row",children:[B.jsxs("div",{className:"controls-column",children:[B.jsx(tA,{isPlaying:E.isPlaying,tempo:E.tempo,isLeader:ot,onPlay:E.start,onStop:E.stop,onTempoChange:E.changeTempo}),B.jsx(JE,{sections:st.sections,currentSectionIndex:st.currentSectionIndex,nextSectionIndex:st.nextSectionIndex,sectionVotes:st.sectionVotes||[],createSectionVotes:st.createSectionVotes||[],playerCount:st.players.length,currentBar:E.currentBar,myPlayerId:J.id,onVoteSection:w.voteSection,onVoteCreateSection:w.voteCreateSection}),B.jsx(iM,{roomId:st.id,playerCount:st.players.length,connectionStatus:w.connectionStatus,debugInfo:S})]}),B.jsx("div",{className:"loop-pads-row",children:st.players.map(M=>{const A=M.id===J.id;return B.jsx(KE,{loops:M.loops,currentBar:E.currentBar,onToggle:A?z:()=>{},playerName:A?`${M.name} (You)`:M.name,playerColor:M.color,pendingLoopIds:f,pendingStopLoopIds:g},M.id)})})]})]}),B.jsxs("footer",{className:"app-footer",children:[B.jsx("p",{children:"Inspired by Philip Glass  Polymetric patterns meet collaborative music-making"}),B.jsx("p",{className:"copyright",children:" 2025 Phan Gia Anh Th. All Rights Reserved."})]})]})}Kb.createRoot(document.getElementById("root")).render(B.jsx(at.StrictMode,{children:B.jsx(lM,{})}));
